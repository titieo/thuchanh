import{M as Bn,S as br,i as wr,s as Er,k as M,N as ze,a as de,l as B,m as N,O as Ke,h as P,c as fe,n as k,b as ge,G as A,P as It,Q as ke,H as Cr,L as nt,R as Sr,T as wn,q as me,r as ye,u as Je,e as Bt,U as Hn,V as $e,W as Ir,g as Le,v as ur,d as Ge,f as hr,I as Ur,w as En,X as Sn,y as Jt,z as qt,A as zt,Y as Tn,Z as Jn,_ as xr,B as Kt,p as qn,$ as zn}from"../chunks/index.4eab105a.js";/* empty css                      */import{w as kn}from"../chunks/index.d9c701e7.js";import{g as Kn,c as Gn,S as Wn,D as Yn,d as Vn}from"../chunks/DateCard.03188aed.js";import{_ as Gt}from"../chunks/preload-helper.41c905a7.js";function Xn(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function Qn(n,...e){const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ye(n){let e;return Qn(n,t=>e=t)(),e}class Zn extends Error{constructor(e,t){super(e),this.name="FelteSubmitError",this.response=t}}function ei(n,e){return Object.keys(n).some(r=>e(n[r]))}function Wt(n,e){return Object.keys(n||{}).reduce((r,i)=>Object.assign(Object.assign({},r),{[i]:e(n[i])}),{})}function V(n){return Object.prototype.toString.call(n)==="[object Object]"}function Re(n){return Object.keys(n||{}).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:V(n[t])?Re(n[t]):Array.isArray(n[t])?[...n[t]]:n[t]}),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ti(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ri(n){return function(e){if(V(e)){const t=Ce(e,n);return ti(t,["key"])}return n}}function Ce(n,e){return Wt(n,t=>V(t)?Ce(t,e):Array.isArray(t)?t.map(ri(e)):e)}function st(...n){const e=n.pop(),t=n.shift();if(typeof t=="string")return t;const r=Re(t);if(n.length===0)return r;for(const i of n){if(!i)continue;if(typeof i=="string")return i;let s=e(r,i);if(typeof s<"u")return s;const o=Array.from(new Set(Object.keys(r).concat(Object.keys(i))));for(const a of o)if(s=e(r[a],i[a]),typeof s<"u")r[a]=s;else if(V(i[a])&&V(r[a]))r[a]=st(r[a],i[a],e);else if(Array.isArray(i[a]))r[a]=i[a].map((l,c)=>{if(!V(l))return l;const u=Array.isArray(r[a])?r[a][c]:r[a];return st(u,l,e)});else if(V(i[a])){const l=Ce(Re(i[a]),void 0);r[a]=st(l,i[a],e)}else typeof i[a]<"u"&&(r[a]=i[a])}return r}function ni(n,e){if(!(V(n)&&V(e))){if(Array.isArray(e)){if(e.some(V))return;const t=Array.isArray(n)?n:[];return e.map((r,i)=>{var s;return(s=t[i])!==null&&s!==void 0?s:r})}if(typeof n<"u")return n}}function Fr(...n){return st(...n,ni)}function An(...n){return st(...n,()=>{})}function Xe(n,e,t){const r=s=>String.prototype.split.call(e,s).filter(Boolean).reduce((o,a)=>o!=null?o[a]:o,n),i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return i===void 0||i===n?t:i}function Rt(n,e,t){n&&(n=Re(n)),V(n)||(n={});const r=Array.isArray(e)?e:e.match(/[^.[\]]+/g)||[],i=r[r.length-1];if(!i)return n;let s=n;for(let o=0;o<r.length-1;o++){const a=r[o];if(!s[a]||!V(s[a])&&!Array.isArray(s[a])){const l=r[o+1];isNaN(Number(l))?s[a]={}:s[a]=[]}s=s[a]}return s[i]=t(s[i]),n}function ce(n,e,t){return Rt(n,e,()=>t)}function Tt(n,e){if(!n||Object(n)!==n)return;typeof n<"u"&&(n=Re(n));const t=Array.isArray(e)?e:e.toString().match(/[^.[\]]+/g)||[],r=t.length===1?n:Xe(n,t.slice(0,-1).join("."));return Array.isArray(r)?r.splice(Number(t[t.length-1]),1):r==null||delete r[t[t.length-1]],n}function Pt(n,e){return ei(n,t=>V(t)?Pt(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e(t):t.some(r=>V(r)?Pt(r,e):e(r)):e(t))}function yt(n){return(n==null?void 0:n.nodeName)==="INPUT"}function ii(n){return(n==null?void 0:n.nodeName)==="TEXTAREA"}function gt(n){return(n==null?void 0:n.nodeName)==="SELECT"}function Yt(n){return(n==null?void 0:n.nodeName)==="FIELDSET"}function Ee(n){return yt(n)||ii(n)||gt(n)}function Lr(n){return n.nodeType===Node.ELEMENT_NODE}function we(n,e){return e??(Ee(n)?n.name:"")}function Zt(n){let e=n;for(;e&&e.nodeName!=="FORM";){if(e.hasAttribute("data-felte-ignore"))return!0;e=e.parentElement}return!1}function si(n,e){if(!(V(n)||V(e))){if(n===null||n==="")return e;if(e===null||e===""||!e)return n;if(!(!n||!e)){if(Array.isArray(n)){if(!Array.isArray(e))return[...n,e];const t=[],r=Math.max(e.length,n.length);for(let i=0;i<r;i++){let s=n[i],o=e[i];!V(s)&&!V(o)?(Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]),t.push(...s,...o)):t.push(pt([s??{},o??{}]))}return t.filter(Boolean)}return Array.isArray(e)||(e=[e]),[n,...e].reduce((t,r)=>t.concat(r),[]).filter(Boolean)}}}function pt(n){return st(...n,si)}function oi(n,e){return e?(Array.isArray(e)?e:[e]).map(r=>r(n)):[]}function dr(n,e){return e?Array.isArray(e)?e.reduce((t,r)=>r(t),n):e(n):n}function On(n=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Ht(n,e,{onInit:t,onEnd:r}={}){let i;return(...s)=>{i||t==null||t(),i&&clearTimeout(i),i=setTimeout(()=>{n.apply(this,s),i=void 0,r==null||r()},e)}}function fr(n){if(Ee(n))return[n];if(n.childElementCount===0)return[];const e=new Set;for(const t of n.children){if(Ee(t)&&e.add(t),Yt(t))for(const r of t.elements)Ee(r)&&e.add(r);t.childElementCount>0&&fr(t).forEach(r=>e.add(r))}return Array.from(e)}function Pn(n){for(const e of n.elements)!Ee(e)&&!Yt(e)||n.hasAttribute("data-felte-keep-on-remove")&&!e.hasAttribute("data-felte-keep-on-remove")&&(e.dataset.felteKeepOnRemove=n.dataset.felteKeepOnRemove)}function jn(n){return n.type.match(/^(number|range)$/)?n.value?+n.value:void 0:n.value}function Nr(n){var e;let t={},r={};for(const i of n.elements){if(Yt(i)&&Pn(i),!Ee(i)||!i.name)continue;const s=we(i);if(yt(i)){if(i.type==="checkbox"){if(typeof Xe(t,s)>"u"){if(Array.from(n.querySelectorAll(`[name="${i.name}"]`)).filter(l=>Ee(l)?s===we(l):!1).length===1){t=ce(t,s,i.checked),r=ce(r,s,!1);continue}t=ce(t,s,i.checked?[i.value]:[]),r=ce(r,s,!1);continue}Array.isArray(Xe(t,s))&&i.checked&&(t=Rt(t,s,a=>[...a,i.value]));continue}if(i.type==="radio"){if(Xe(t,s))continue;t=ce(t,s,i.checked?i.value:void 0),r=ce(r,s,!1);continue}if(i.type==="file"){t=ce(t,s,i.multiple?Array.from(i.files||[]):(e=i.files)===null||e===void 0?void 0:e[0]),r=ce(r,s,!1);continue}}else if(gt(i)){if(!i.multiple)t=ce(t,s,i.value);else{const l=Array.from(i.options).filter(c=>c.selected).map(c=>c.value);t=ce(t,s,l)}r=ce(r,s,!1);continue}const o=jn(i);t=ce(t,s,o),r=ce(r,s,!1)}return{defaultData:t,defaultTouched:r}}function ai(n,e){var t;if(!Ee(n))return;const r=e;if(yt(n)){if(n.type==="checkbox"){const i=r;if(typeof i>"u"||typeof i=="boolean"){n.checked=!!i;return}Array.isArray(i)&&(i.includes(n.value)?n.checked=!0:n.checked=!1);return}if(n.type==="radio"){const i=r;n.value===i?n.checked=!0:n.checked=!1;return}if(n.type==="file"){n.files=null,n.value="";return}}else if(gt(n)){if(n.multiple){if(Array.isArray(r)){n.value=String((t=r[0])!==null&&t!==void 0?t:"");const s=r.map(o=>String(o));for(const o of n.options)s.includes(o.value)?o.selected=!0:o.selected=!1}}else{n.value=String(r??"");for(const s of n.options)s.value===String(r)?s.selected=!0:s.selected=!1}return}n.value=String(r??"")}function Ut(n,e){for(const t of n.elements){if(Yt(t)&&Pn(t),!Ee(t)||!t.name)continue;const r=we(t);ai(t,Xe(e,r))}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Dn(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Ve(n,e){return Wt(n,t=>V(t)?Ve(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e:t.map(r=>{const i=Ve(r,e);return Dn(i,["key"])}):e)}function Qe(n){return n?Wt(n,e=>V(e)?Qe(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!V(t))return t;const r=Qe(t);return r.key||(r.key=On()),r}):e):{}}function kt(n){return n?Wt(n,e=>V(e)?Qe(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!V(t))return t;const r=Qe(t);return Dn(r,["key"])}):e):{}}function li(){class n extends CustomEvent{constructor(i){super("feltesuccess",{detail:i})}}class e extends CustomEvent{constructor(i){super("felteerror",{detail:i,cancelable:!0})}setErrors(i){this.preventDefault(),this.errors=i}}class t extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(i){this.onSubmit=i}handleError(i){this.onError=i}handleSuccess(i){this.onSuccess=i}}return{createErrorEvent:r=>new e(r),createSubmitEvent:()=>new t,createSuccessEvent:r=>new n(r)}}function ci(n){if(n)return async function(){let t=new FormData(n);const r=new URL(n.action),i=n.method.toLowerCase()==="get"?"get":r.searchParams.get("_method")||n.method;let s=n.enctype;n.querySelector('input[type="file"]')&&(s="multipart/form-data"),(i==="get"||s==="application/x-www-form-urlencoded")&&(t=new URLSearchParams(t));let o;i==="get"?(t.forEach((l,c)=>{r.searchParams.append(c,l)}),o={method:i,headers:{Accept:"application/json"}}):o={method:i,body:t,headers:Object.assign(Object.assign({},s!=="multipart/form-data"&&{"Content-Type":s}),{Accept:"application/json"})};const a=await window.fetch(r.toString(),o);if(a.ok)return a;throw new Zn("An error occurred while submitting the form",a)}}function xt(n,e,t,r){return Rt(n,e,i=>(typeof i<"u"&&!Array.isArray(i)||(i||(i=[]),typeof r>"u"?i.push(t):i.splice(r,0,t)),i))}function ui(n,e,t,r){return Rt(n,e,i=>(!i||!Array.isArray(i)||([i[t],i[r]]=[i[r],i[t]]),i))}function hi(n,e,t,r){return Rt(n,e,i=>(!i||!Array.isArray(i)||i.splice(r,0,i.splice(t,1)[0]),i))}function $r(n){return typeof n=="function"}function et(n){return(t,r)=>{if(typeof t=="string"){const i=t;n(s=>{const o=$r(r)?r(Xe(s,i)):r;return ce(s,i,o)})}else n(i=>$r(t)?t(i):t)}}function di({stores:n,config:e,validateErrors:t,validateWarnings:r,_getCurrentExtenders:i}){var s;let o,a=Qe((s=e.initialValues)!==null&&s!==void 0?s:{});const{data:l,touched:c,errors:u,warnings:d,isDirty:_,isSubmitting:y,interacted:v}=n,p=et(l.update),m=et(c.update),g=et(u.update),q=et(d.update);function U(w){p(F=>{const R=w(F);return o&&Ut(o,R),R})}const O=(w,F,R)=>{et(U)(w,F),typeof w=="string"&&R&&m(w,!0)};function W(w,F,R){const X=V(F)?Ve(F,!1):!1,I=V(X)?Ce(X,[]):[];F=V(F)?Object.assign(Object.assign({},F),{key:On()}):F,u.update(H=>xt(H,w,I,R)),d.update(H=>xt(H,w,I,R)),c.update(H=>xt(H,w,X,R)),l.update(H=>{const G=xt(H,w,F,R);return setTimeout(()=>o&&Ut(o,G)),G})}function x(w){u.update(w),d.update(w),c.update(w),l.update(F=>{const R=w(F);return setTimeout(()=>o&&Ut(o,R)),R})}function ee(w){x(F=>Tt(F,w))}function Y(w,F,R){x(X=>ui(X,w,F,R))}function te(w,F,R){x(X=>hi(X,w,F,R))}function ne(w){const F=Xe(a,w),R=V(F)?Ve(F,!1):!1,X=V(R)?Ce(R,[]):[];l.update(I=>{const H=ce(I,w,F);return o&&Ut(o,H),H}),c.update(I=>ce(I,w,R)),u.update(I=>ce(I,w,X)),d.update(I=>ce(I,w,X))}const C=et(y.update),Q=et(_.update),Z=et(v.update);async function f(){const w=Ye(l);c.set(Ve(w,!0)),v.set(null);const F=await t(w);return await r(w),F}function S(){O(Re(a)),m(w=>Ce(w,!1)),v.set(null),_.set(!1)}function h(w){return async function(R){var X,I,H,G,_e,ie,T;const{createErrorEvent:se,createSubmitEvent:b,createSuccessEvent:K}=li(),Se=b();o==null||o.dispatchEvent(Se);const D=(I=(X=Se.onError)!==null&&X!==void 0?X:w==null?void 0:w.onError)!==null&&I!==void 0?I:e.onError,E=(G=(H=Se.onSuccess)!==null&&H!==void 0?H:w==null?void 0:w.onSuccess)!==null&&G!==void 0?G:e.onSuccess,L=(T=(ie=(_e=Se.onSubmit)!==null&&_e!==void 0?_e:w==null?void 0:w.onSubmit)!==null&&ie!==void 0?ie:e.onSubmit)!==null&&T!==void 0?T:ci(o);if(!L||(R==null||R.preventDefault(),Se.defaultPrevented))return;y.set(!0),v.set(null);const z=kt(Ye(l)),be=await t(z,w==null?void 0:w.validate),Ae=await r(z,w==null?void 0:w.warn);if(Ae&&d.set(An(Ce(z,[]),Ae)),c.set(Ve(z,!0)),be&&(c.set(Ve(be,!0)),Pt(be,pe=>Array.isArray(pe)?pe.length>=1:!!pe))){await new Promise(pe=>setTimeout(pe)),i().forEach(pe=>{var Pe;return(Pe=pe.onSubmitError)===null||Pe===void 0?void 0:Pe.call(pe,{data:z,errors:be})}),y.set(!1);return}const Ie={setFields:O,setData:p,setTouched:m,setErrors:g,setWarnings:q,unsetField:ee,addField:W,resetField:ne,reset:S,setInitialValues:j.setInitialValues,moveField:te,swapFields:Y,form:o,controls:o&&Array.from(o.elements).filter(Ee),config:Object.assign(Object.assign({},e),w)};try{const ve=await L(z,Ie);o==null||o.dispatchEvent(K(Object.assign({response:ve},Ie))),await(E==null?void 0:E(ve,Ie))}catch(ve){const pe=se(Object.assign({error:ve},Ie));if(o==null||o.dispatchEvent(pe),!D&&!pe.defaultPrevented)throw ve;if(!D&&!pe.errors)return;const Pe=pe.errors||await(D==null?void 0:D(ve,Ie));Pe&&(c.set(Ve(Pe,!0)),u.set(Pe),await new Promise(Ue=>setTimeout(Ue)),i().forEach(Ue=>{var Me;return(Me=Ue.onSubmitError)===null||Me===void 0?void 0:Me.call(Ue,{data:z,errors:Ye(u)})}))}finally{y.set(!1)}}}const j={setData:p,setFields:O,setTouched:m,setErrors:g,setWarnings:q,setIsSubmitting:C,setIsDirty:Q,setInteracted:Z,validate:f,reset:S,unsetField:ee,resetField:ne,addField:W,swapFields:Y,moveField:te,createSubmitHandler:h,handleSubmit:h(),setInitialValues:w=>{a=Qe(w)}};return{public:j,private:{_setFormNode(w){o=w},_getInitialValues:()=>a}}}function fi({helpers:n,stores:e,config:t,extender:r,createSubmitHandler:i,handleSubmit:s,_setFormNode:o,_getInitialValues:a,_setCurrentExtenders:l,_getCurrentExtenders:c}){const{setFields:u,setTouched:d,reset:_,setInitialValues:y}=n,{addValidator:v,addTransformer:p,validate:m}=n,{data:g,errors:q,warnings:U,touched:O,isSubmitting:W,isDirty:x,interacted:ee,isValid:Y,isValidating:te}=e;function ne(C){C.requestSubmit||(C.requestSubmit=s);function Q(D){return function(E){return E({form:C,stage:D,controls:Array.from(C.elements).filter(Ee),data:g,errors:q,warnings:U,touched:O,isValid:Y,isValidating:te,isSubmitting:W,isDirty:x,interacted:ee,config:t,addValidator:v,addTransformer:p,setFields:u,validate:m,reset:_,createSubmitHandler:i,handleSubmit:s})}}l(r.map(Q("MOUNT"))),C.noValidate=!!t.validate;const{defaultData:Z,defaultTouched:f}=Nr(C);o(C),y(An(Re(Z),a())),u(a()),O.set(f);function S(D){const E=we(D),L=Array.from(C.querySelectorAll(`[name="${D.name}"]`)).filter(z=>Ee(z)?E===we(z):!1);if(L.length!==0)return L.length===1?g.update(z=>ce(z,we(D),D.checked)):g.update(z=>ce(z,we(D),L.filter(yt).filter(be=>be.checked).map(be=>be.value)))}function h(D){const E=C.querySelectorAll(`[name="${D.name}"]`),L=Array.from(E).find(z=>yt(z)&&z.checked);g.update(z=>ce(z,we(D),L==null?void 0:L.value))}function j(D){var E;const L=Array.from((E=D.files)!==null&&E!==void 0?E:[]);g.update(z=>ce(z,we(D),D.multiple?L:L[0]))}function $(D){if(!D.multiple)g.update(E=>ce(E,we(D),D.value));else{const E=Array.from(D.options).filter(L=>L.selected).map(L=>L.value);g.update(L=>ce(L,we(D),E))}}function w(D){const E=D.target;if(!E||!Ee(E)||gt(E)||Zt(E)||["checkbox","radio","file"].includes(E.type)||!E.name)return;x.set(!0);const L=jn(E);ee.set(E.name),g.update(z=>ce(z,we(E),L))}function F(D){const E=D.target;if(!(!E||!Ee(E)||Zt(E))&&E.name)if(d(we(E),!0),ee.set(E.name),(gt(E)||["checkbox","radio","file","hidden"].includes(E.type))&&x.set(!0),E.type==="hidden"&&g.update(L=>ce(L,we(E),E.value)),gt(E))$(E);else if(yt(E))E.type==="checkbox"?S(E):E.type==="radio"?h(E):E.type==="file"&&j(E);else return}function R(D){const E=D.target;!E||!Ee(E)||Zt(E)||E.name&&(d(we(E),!0),ee.set(E.name))}function X(D){D.preventDefault(),_()}const I={childList:!0,subtree:!0};function H(D){let E=Ye(g),L=Ye(O),z=Ye(q),be=Ye(U);for(const Ae of D.reverse()){if(Ae.hasAttribute("data-felte-keep-on-remove")&&Ae.dataset.felteKeepOnRemove!=="false")continue;const Ie=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let ve=we(Ae);const pe=Ye(O);if(Ie.test(ve)){const Ue=ve.split(".").slice(0,-1).join("."),Me=Xe(pe,Ue);V(Me)&&Object.keys(Me).length<=1&&(ve=Ue)}E=Tt(E,ve),L=Tt(L,ve),z=Tt(z,ve),be=Tt(be,ve)}g.set(E),O.set(L),q.set(z),U.set(be)}const G=Ht(()=>{c().forEach(L=>{var z;return(z=L.destroy)===null||z===void 0?void 0:z.call(L)}),l(r.map(Q("UPDATE")));const{defaultData:D,defaultTouched:E}=Nr(C);g.update(L=>Fr(L,D)),O.update(L=>Fr(L,E)),n.setFields(Ye(g))},0);let _e=[];const ie=Ht(()=>{c().forEach(D=>{var E;return(E=D.destroy)===null||E===void 0?void 0:E.call(D)}),l(r.map(Q("UPDATE"))),H(_e),_e=[]},0);function T(D){Array.from(D.addedNodes).some(L=>Lr(L)?Ee(L)?!0:fr(L).length>0:!1)&&G()}function se(D){for(const E of D.removedNodes){if(!Lr(E))continue;const L=fr(E);L.length!==0&&(_e.push(...L),ie())}}function b(D){for(const E of D)E.type==="childList"&&(E.addedNodes.length>0&&T(E),E.removedNodes.length>0&&se(E))}const K=new MutationObserver(b);K.observe(C,I),C.addEventListener("input",w),C.addEventListener("change",F),C.addEventListener("focusout",R),C.addEventListener("submit",s),C.addEventListener("reset",X);const Se=q.subscribe(D=>{for(const E of C.elements){if(!Ee(E)||!E.name)continue;const L=Xe(D,we(E)),z=Array.isArray(L)?L.join(`
`):typeof L=="string"?L:void 0;z!==E.dataset.felteValidationMessage&&(z?(E.dataset.felteValidationMessage=z,E.setAttribute("aria-invalid","true")):(delete E.dataset.felteValidationMessage,E.removeAttribute("aria-invalid")))}});return{destroy(){K.disconnect(),C.removeEventListener("input",w),C.removeEventListener("change",F),C.removeEventListener("focusout",R),C.removeEventListener("submit",s),C.removeEventListener("reset",X),Se(),c().forEach(D=>{var E;return(E=D.destroy)===null||E===void 0?void 0:E.call(D)})}}}return{form:ne}}function vi(n){const e={aborted:!1,priority:n};return{signal:e,abort(){e.aborted=!0}}}function pi(n,e){if(V(n))return!e||V(e)&&Object.keys(e).length===0?Ce(n,null):void 0;if(Array.isArray(n)){if(n.some(V))return;const t=Array.isArray(e)?e:[];return n.map((r,i)=>{const s=t[i];return Array.isArray(s)&&s.length===0?null:r&&s||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?n?e:null:n&&e?[e]:null}function mi(n,e){if(V(n))return!e||V(e)&&Object.keys(e).length===0?Ce(n,null):void 0;if(Array.isArray(n)){if(n.some(V))return;const t=Array.isArray(e)?e:[];return n.map((r,i)=>{const s=t[i];return Array.isArray(s)&&s.length===0?null:s||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?e:e?[e]:null}function yi([n,e]){return st(e,n,pi)}function gi([n,e]){return st(e,n,mi)}function _i(n){return function(t,r,i){const s=Array.isArray(t)?t:[t],o=new Array(s.length),a=n(i),l=a.set,c=a.subscribe;let u;function d(){u=s.map((y,v)=>y.subscribe(p=>{o[v]=p,l(r(o))}))}function _(){u==null||u.forEach(y=>y())}return a.subscribe=function(v){const p=c(v);return()=>{p()}},[a,d,_]}}function bi(n,e){var t,r,i,s,o,a,l,c,u;const d=_i(n),_=e.initialValues=e.initialValues?Qe(dr(Re(e.initialValues),e.transform)):{},y=Ve(kt(_),!1),v=n(y),p=n(0),[m,g,q]=d([v,p],([he,ae])=>Pt(he,xe=>!!xe)&&ae>=1,!1);delete m.set,delete m.update;function U(he){let ae;return async function(xe,Be,je,ot=!1){if(!je||!xe)return;let Ze=Be&&Object.keys(Be).length>0?Be:Ce(xe,[]);const at=vi(ot);if((!(ae!=null&&ae.signal.priority)||ot)&&(ae==null||ae.abort(),ae=at),ae.signal.priority&&!ot)return;p.update(bt=>bt+1);const Rr=oi(xe,je);return Rr.forEach(async bt=>{const Mn=await bt;at.signal.aborted||(Ze=pt([Ze,Mn]),he.set(Ze))}),await Promise.all(Rr),ae=void 0,p.update(bt=>bt-1),Ze}}let O=Ce(y,[]);const W=n(_),x=Ce(y,[]),ee=n(x),Y=n(Re(x)),[te,ne,C]=d([ee,Y],pt,Re(x)),Q=Ce(y,[]),Z=n(Q),f=n(Re(Q)),[S,h,j]=d([Z,f],pt,Re(Q)),[$,w,F]=d([te,v],yi,Re(x)),[R,X,I]=d([S,v],gi,Re(Q));let H=!1;const[G,_e,ie]=d(te,([he])=>{var ae;return H?!Pt(he,Oe=>Array.isArray(Oe)?Oe.length>=1:!!Oe):(H=!0,!e.validate&&!(!((ae=e.debounced)===null||ae===void 0)&&ae.validate))},!e.validate&&!(!((t=e.debounced)===null||t===void 0)&&t.validate));delete G.set,delete G.update;const T=n(!1),se=n(!1),b=n(null),K=U(ee),Se=U(Z),D=U(Y),E=U(f),L=Ht(D,(o=(i=(r=e.debounced)===null||r===void 0?void 0:r.validateTimeout)!==null&&i!==void 0?i:(s=e.debounced)===null||s===void 0?void 0:s.timeout)!==null&&o!==void 0?o:300,{onInit:()=>{p.update(he=>he+1)},onEnd:()=>{p.update(he=>he-1)}}),z=Ht(E,(u=(l=(a=e.debounced)===null||a===void 0?void 0:a.warnTimeout)!==null&&l!==void 0?l:(c=e.debounced)===null||c===void 0?void 0:c.timeout)!==null&&u!==void 0?u:300);async function be(he,ae){var Oe;const xe=kt(he),Be=K(xe,O,ae??e.validate,!0);if(ae)return Be;const je=D(xe,O,(Oe=e.debounced)===null||Oe===void 0?void 0:Oe.validate,!0);return pt(await Promise.all([Be,je]))}async function Ae(he,ae){var Oe;const xe=kt(he),Be=Se(xe,O,ae??e.warn,!0);if(ae)return Be;const je=E(xe,O,(Oe=e.debounced)===null||Oe===void 0?void 0:Oe.warn,!0);return pt(await Promise.all([Be,je]))}let Ie=x,ve=Q;function pe(){const he=W.subscribe(je=>{var ot,Ze;const at=kt(je);K(at,O,e.validate),Se(at,O,e.warn),L(at,O,(ot=e.debounced)===null||ot===void 0?void 0:ot.validate),z(at,O,(Ze=e.debounced)===null||Ze===void 0?void 0:Ze.warn)}),ae=v.subscribe(je=>{O=Ce(je,[])}),Oe=te.subscribe(je=>{Ie=je}),xe=S.subscribe(je=>{ve=je});ne(),_e(),h(),w(),X(),g();function Be(){he(),F(),C(),j(),I(),ie(),q(),ae(),Oe(),xe()}return Be}function Pe(he){ee.set(he(Ie)),Y.set({})}function Ue(he){Z.set(he(ve)),f.set({})}function Me(he){Pe(()=>he)}function ue(he){Ue(()=>he)}return $.set=Me,$.update=Pe,R.set=ue,R.update=Ue,{data:W,errors:$,warnings:R,touched:v,isValid:G,isSubmitting:T,isDirty:se,isValidating:m,interacted:b,validateErrors:be,validateWarnings:Ae,cleanup:e.preventStoreStart?()=>{}:pe(),start:pe}}function wi(n,e){var t,r;(t=n.extend)!==null&&t!==void 0||(n.extend=[]),(r=n.debounced)!==null&&r!==void 0||(n.debounced={}),n.validate&&!Array.isArray(n.validate)&&(n.validate=[n.validate]),n.debounced.validate&&!Array.isArray(n.debounced.validate)&&(n.debounced.validate=[n.debounced.validate]),n.transform&&!Array.isArray(n.transform)&&(n.transform=[n.transform]),n.warn&&!Array.isArray(n.warn)&&(n.warn=[n.warn]),n.debounced.warn&&!Array.isArray(n.debounced.warn)&&(n.debounced.warn=[n.debounced.warn]);function i(h,{debounced:j,level:$}={debounced:!1,level:"error"}){var w;const F=$==="error"?"validate":"warn";(w=n.debounced)!==null&&w!==void 0||(n.debounced={});const R=j?n.debounced:n;R[F]?R[F]=[...R[F],h]:R[F]=[h]}function s(h){n.transform?n.transform=[...n.transform,h]:n.transform=[h]}const o=Array.isArray(n.extend)?n.extend:[n.extend];let a=[];const l=()=>a,c=h=>{a=h},{isSubmitting:u,isValidating:d,data:_,errors:y,warnings:v,touched:p,isValid:m,isDirty:g,cleanup:q,start:U,validateErrors:O,validateWarnings:W,interacted:x}=bi(e.storeFactory,n),ee=_.update,Y=_.set,te=h=>ee(j=>Qe(dr(h(j),n.transform))),ne=h=>Y(Qe(dr(h,n.transform)));_.update=te,_.set=ne;const C=di({extender:o,config:n,addValidator:i,addTransformer:s,validateErrors:O,validateWarnings:W,_getCurrentExtenders:l,stores:{data:_,errors:y,warnings:v,touched:p,isValid:m,isValidating:d,isSubmitting:u,isDirty:g,interacted:x}}),{createSubmitHandler:Q,handleSubmit:Z}=C.public;a=o.map(h=>h({stage:"SETUP",errors:y,warnings:v,touched:p,data:_,isDirty:g,isValid:m,isValidating:d,isSubmitting:u,interacted:x,config:n,addValidator:i,addTransformer:s,setFields:C.public.setFields,reset:C.public.reset,validate:C.public.validate,handleSubmit:Z,createSubmitHandler:Q}));const f=Object.assign({config:n,stores:{data:_,touched:p,errors:y,warnings:v,isSubmitting:u,isValidating:d,isValid:m,isDirty:g,interacted:x},createSubmitHandler:Q,handleSubmit:Z,helpers:Object.assign(Object.assign({},C.public),{addTransformer:s,addValidator:i}),extender:o,_getCurrentExtenders:l,_setCurrentExtenders:c},C.private),{form:S}=fi(f);return Object.assign({data:_,errors:y,warnings:v,touched:p,isValid:m,isSubmitting:u,isValidating:d,isDirty:g,interacted:x,form:S,cleanup:q,startStores:U},C.public)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Ei(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Si(n){const e=wi(n??{},{storeFactory:kn}),{cleanup:t,startStores:r}=e,i=Ei(e,["cleanup","startStores"]);return Bn(t),i}function Ti(n){return n%4===0&&n%100!==0||n%400===0}function jt(n,e){return[31,Ti(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function Mr(n,e){let t="";if(n)for(const r of e)typeof r=="string"?t+=r:t+=r.toString(n);return t}function er(n,e){const t=jt(n,e),r=[];for(let i=0;i<t;i++)r.push({year:n,month:e,number:i+1});return r}function ki(n,e){const t=n.getFullYear(),r=n.getMonth(),i=new Date(t,r,1).getDay();let s=[];const o=(i-e+7)%7;if(o>0){let u=r-1,d=t;u===-1&&(u=11,d=t-1),s=er(d,u).slice(-o)}s=s.concat(er(t,r));let a=r+1,l=t;a===12&&(a=0,l=t+1);const c=42-s.length;return s=s.concat(er(l,a).slice(0,c)),s}function Ai(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStartsOn:1}}function Oi(n={}){const e=Ai();return typeof n.weekStartsOn=="number"&&(e.weekStartsOn=n.weekStartsOn),n.months&&(e.months=n.months),n.weekdays&&(e.weekdays=n.weekdays),e}function Br(n,e,t){const r=n.slice();return r[29]=e[t],r[31]=t,r}function Hr(n,e,t){const r=n.slice();return r[32]=e[t],r}function Jr(n,e,t){const r=n.slice();return r[29]=e[t],r[36]=t,r}function qr(n,e,t){const r=n.slice();return r[37]=e[t],r}function zr(n,e,t){const r=n.slice();return r[37]=e[t],r}function Kr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function Gr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function Wr(n){let e,t=n[42]+"",r,i;return{c(){e=M("option"),r=me(t),this.h()},l(s){e=B(s,"OPTION",{});var o=N(e);r=ye(o,t),o.forEach(P),this.h()},h(){e.disabled=i=new Date(n[8],n[36],jt(n[8],n[36]),23,59,59,999)<n[1]||new Date(n[8],n[36])>n[2],e.__value=n[36],e.value=e.__value},m(s,o){ge(s,e,o),A(e,r)},p(s,o){o[0]&16&&t!==(t=s[42]+"")&&Je(r,t),o[0]&294&&i!==(i=new Date(s[8],s[36],jt(s[8],s[36]),23,59,59,999)<s[1]||new Date(s[8],s[36])>s[2])&&(e.disabled=i)},d(s){s&&P(e)}}}function Yr(n){let e,t=n[42]+"",r,i;return{c(){e=M("option"),r=me(t),this.h()},l(s){e=B(s,"OPTION",{});var o=N(e);r=ye(o,t),o.forEach(P),this.h()},h(){e.__value=n[36],e.value=e.__value,e.selected=i=n[36]===n[7]},m(s,o){ge(s,e,o),A(e,r)},p(s,o){o[0]&16&&t!==(t=s[42]+"")&&Je(r,t),o[0]&128&&i!==(i=s[36]===s[7])&&(e.selected=i)},d(s){s&&P(e)}}}function Vr(n){let e,t=n[37]+"",r,i;return{c(){e=M("option"),r=me(t),this.h()},l(s){e=B(s,"OPTION",{});var o=N(e);r=ye(o,t),o.forEach(P),this.h()},h(){e.__value=i=n[37],e.value=e.__value},m(s,o){ge(s,e,o),A(e,r)},p(s,o){o[0]&32&&t!==(t=s[37]+"")&&Je(r,t),o[0]&32&&i!==(i=s[37])&&(e.__value=i,e.value=e.__value)},d(s){s&&P(e)}}}function Xr(n){let e,t=n[37]+"",r,i,s;return{c(){e=M("option"),r=me(t),this.h()},l(o){e=B(o,"OPTION",{});var a=N(e);r=ye(a,t),a.forEach(P),this.h()},h(){e.__value=i=n[37],e.value=e.__value,e.selected=s=n[37]===n[3].getFullYear()},m(o,a){ge(o,e,a),A(e,r)},p(o,a){a[0]&32&&t!==(t=o[37]+"")&&Je(r,t),a[0]&32&&i!==(i=o[37])&&(e.__value=i,e.value=e.__value),a[0]&40&&s!==(s=o[37]===o[3].getFullYear())&&(e.selected=s)},d(o){o&&P(e)}}}function Pi(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]-7]+"",r;return{c(){e=M("div"),r=me(t),this.h()},l(i){e=B(i,"DIV",{class:!0});var s=N(e);r=ye(s,t),s.forEach(P),this.h()},h(){k(e,"class","header-cell svelte-w239uu")},m(i,s){ge(i,e,s),A(e,r)},p(i,s){s[0]&16&&t!==(t=i[4].weekdays[i[4].weekStartsOn+i[36]-7]+"")&&Je(r,t)},d(i){i&&P(e)}}}function ji(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]]+"",r;return{c(){e=M("div"),r=me(t),this.h()},l(i){e=B(i,"DIV",{class:!0});var s=N(e);r=ye(s,t),s.forEach(P),this.h()},h(){k(e,"class","header-cell svelte-w239uu")},m(i,s){ge(i,e,s),A(e,r)},p(i,s){s[0]&16&&t!==(t=i[4].weekdays[i[4].weekStartsOn+i[36]]+"")&&Je(r,t)},d(i){i&&P(e)}}}function Qr(n){let e;function t(s,o){return s[36]+s[4].weekStartsOn<7?ji:Pi}let r=t(n),i=r(n);return{c(){i.c(),e=Bt()},l(s){i.l(s),e=Bt()},m(s,o){i.m(s,o),ge(s,e,o)},p(s,o){r===(r=t(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&P(e)}}}function Zr(n){let e,t,r=n[32].number+"",i,s,o;function a(){return n[23](n[32])}return{c(){e=M("div"),t=M("span"),i=me(r),this.h()},l(l){e=B(l,"DIV",{class:!0});var c=N(e);t=B(c,"SPAN",{class:!0});var u=N(t);i=ye(u,r),u.forEach(P),c.forEach(P),this.h()},h(){k(t,"class","svelte-w239uu"),k(e,"class","cell svelte-w239uu"),$e(e,"disabled",!vr(n[32],n[1],n[2])),$e(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),$e(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),$e(e,"other-month",n[32].month!==n[7])},m(l,c){ge(l,e,c),A(e,t),A(t,i),s||(o=ke(e,"click",a),s=!0)},p(l,c){n=l,c[0]&64&&r!==(r=n[32].number+"")&&Je(i,r),c[0]&70&&$e(e,"disabled",!vr(n[32],n[1],n[2])),c[0]&65&&$e(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),c[0]&576&&$e(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),c[0]&192&&$e(e,"other-month",n[32].month!==n[7])},d(l){l&&P(e),s=!1,o()}}}function en(n){let e,t,r=n[6].slice(n[31]*7,n[31]*7+7),i=[];for(let s=0;s<r.length;s+=1)i[s]=Zr(Hr(n,r,s));return{c(){e=M("div");for(let s=0;s<i.length;s+=1)i[s].c();t=de(),this.h()},l(s){e=B(s,"DIV",{class:!0});var o=N(e);for(let a=0;a<i.length;a+=1)i[a].l(o);t=fe(o),o.forEach(P),this.h()},h(){k(e,"class","week svelte-w239uu")},m(s,o){ge(s,e,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);A(e,t)},p(s,o){if(o[0]&4807){r=s[6].slice(s[31]*7,s[31]*7+7);let a;for(a=0;a<r.length;a+=1){const l=Hr(s,r,a);i[a]?i[a].p(l,o):(i[a]=Zr(l),i[a].c(),i[a].m(e,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}},d(s){s&&P(e),nt(i,s)}}}function Di(n){let e,t,r,i,s,o,a,l,c,u,d,_,y,v,p,m,g,q,U,O,W,x,ee,Y,te,ne,C,Q,Z,f,S,h=n[4].months,j=[];for(let T=0;T<h.length;T+=1)j[T]=Wr(Gr(n,h,T));let $=n[4].months,w=[];for(let T=0;T<$.length;T+=1)w[T]=Yr(Kr(n,$,T));let F=n[5],R=[];for(let T=0;T<F.length;T+=1)R[T]=Vr(zr(n,F,T));let X=n[5],I=[];for(let T=0;T<X.length;T+=1)I[T]=Xr(qr(n,X,T));let H=Array(7),G=[];for(let T=0;T<H.length;T+=1)G[T]=Qr(Jr(n,H,T));let _e=Array(6),ie=[];for(let T=0;T<_e.length;T+=1)ie[T]=en(Br(n,_e,T));return{c(){e=M("div"),t=M("div"),r=M("div"),i=M("button"),s=ze("svg"),o=ze("path"),a=de(),l=M("div"),c=M("select");for(let T=0;T<j.length;T+=1)j[T].c();u=de(),d=M("select");for(let T=0;T<w.length;T+=1)w[T].c();_=de(),y=ze("svg"),v=ze("path"),p=de(),m=M("div"),g=M("select");for(let T=0;T<R.length;T+=1)R[T].c();q=de(),U=M("select");for(let T=0;T<I.length;T+=1)I[T].c();O=de(),W=ze("svg"),x=ze("path"),ee=de(),Y=M("button"),te=ze("svg"),ne=ze("path"),C=de(),Q=M("div");for(let T=0;T<G.length;T+=1)G[T].c();Z=de();for(let T=0;T<ie.length;T+=1)ie[T].c();this.h()},l(T){e=B(T,"DIV",{class:!0,tabindex:!0});var se=N(e);t=B(se,"DIV",{class:!0,tabindex:!0});var b=N(t);r=B(b,"DIV",{class:!0});var K=N(r);i=B(K,"BUTTON",{type:!0,class:!0,tabindex:!0});var Se=N(i);s=Ke(Se,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var D=N(s);o=Ke(D,"path",{d:!0,transform:!0}),N(o).forEach(P),D.forEach(P),Se.forEach(P),a=fe(K),l=B(K,"DIV",{class:!0});var E=N(l);c=B(E,"SELECT",{class:!0});var L=N(c);for(let ue=0;ue<j.length;ue+=1)j[ue].l(L);L.forEach(P),u=fe(E),d=B(E,"SELECT",{class:!0,tabindex:!0});var z=N(d);for(let ue=0;ue<w.length;ue+=1)w[ue].l(z);z.forEach(P),_=fe(E),y=Ke(E,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var be=N(y);v=Ke(be,"path",{d:!0,transform:!0}),N(v).forEach(P),be.forEach(P),E.forEach(P),p=fe(K),m=B(K,"DIV",{class:!0});var Ae=N(m);g=B(Ae,"SELECT",{class:!0});var Ie=N(g);for(let ue=0;ue<R.length;ue+=1)R[ue].l(Ie);Ie.forEach(P),q=fe(Ae),U=B(Ae,"SELECT",{class:!0,tabindex:!0});var ve=N(U);for(let ue=0;ue<I.length;ue+=1)I[ue].l(ve);ve.forEach(P),O=fe(Ae),W=Ke(Ae,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var pe=N(W);x=Ke(pe,"path",{d:!0,transform:!0}),N(x).forEach(P),pe.forEach(P),Ae.forEach(P),ee=fe(K),Y=B(K,"BUTTON",{type:!0,class:!0,tabindex:!0});var Pe=N(Y);te=Ke(Pe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Ue=N(te);ne=Ke(Ue,"path",{d:!0}),N(ne).forEach(P),Ue.forEach(P),Pe.forEach(P),K.forEach(P),C=fe(b),Q=B(b,"DIV",{class:!0});var Me=N(Q);for(let ue=0;ue<G.length;ue+=1)G[ue].l(Me);Me.forEach(P),Z=fe(b);for(let ue=0;ue<ie.length;ue+=1)ie[ue].l(b);b.forEach(P),se.forEach(P),this.h()},h(){k(o,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),k(o,"transform","rotate(180, 12, 12)"),k(s,"xmlns","http://www.w3.org/2000/svg"),k(s,"width","24"),k(s,"height","24"),k(s,"viewBox","0 0 24 24"),k(s,"class","svelte-w239uu"),k(i,"type","button"),k(i,"class","page-button svelte-w239uu"),k(i,"tabindex","-1"),k(c,"class","svelte-w239uu"),k(d,"class","dummy-select svelte-w239uu"),k(d,"tabindex","-1"),k(v,"d","M6 0l12 12-12 12z"),k(v,"transform","rotate(90, 12, 12)"),k(y,"xmlns","http://www.w3.org/2000/svg"),k(y,"width","24"),k(y,"height","24"),k(y,"viewBox","0 0 24 24"),k(y,"class","svelte-w239uu"),k(l,"class","dropdown month svelte-w239uu"),k(g,"class","svelte-w239uu"),k(U,"class","dummy-select svelte-w239uu"),k(U,"tabindex","-1"),k(x,"d","M6 0l12 12-12 12z"),k(x,"transform","rotate(90, 12, 12)"),k(W,"xmlns","http://www.w3.org/2000/svg"),k(W,"width","24"),k(W,"height","24"),k(W,"viewBox","0 0 24 24"),k(W,"class","svelte-w239uu"),k(m,"class","dropdown year svelte-w239uu"),k(ne,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),k(te,"xmlns","http://www.w3.org/2000/svg"),k(te,"width","24"),k(te,"height","24"),k(te,"viewBox","0 0 24 24"),k(te,"class","svelte-w239uu"),k(Y,"type","button"),k(Y,"class","page-button svelte-w239uu"),k(Y,"tabindex","-1"),k(r,"class","top svelte-w239uu"),k(Q,"class","header svelte-w239uu"),k(t,"class","tab-container svelte-w239uu"),k(t,"tabindex","-1"),k(e,"class","date-time-picker svelte-w239uu"),k(e,"tabindex","0")},m(T,se){ge(T,e,se),A(e,t),A(t,r),A(r,i),A(i,s),A(s,o),A(r,a),A(r,l),A(l,c);for(let b=0;b<j.length;b+=1)j[b]&&j[b].m(c,null);It(c,n[7]),A(l,u),A(l,d);for(let b=0;b<w.length;b+=1)w[b]&&w[b].m(d,null);A(l,_),A(l,y),A(y,v),A(r,p),A(r,m),A(m,g);for(let b=0;b<R.length;b+=1)R[b]&&R[b].m(g,null);It(g,n[8]),A(m,q),A(m,U);for(let b=0;b<I.length;b+=1)I[b]&&I[b].m(U,null);A(m,O),A(m,W),A(W,x),A(r,ee),A(r,Y),A(Y,te),A(te,ne),A(t,C),A(t,Q);for(let b=0;b<G.length;b+=1)G[b]&&G[b].m(Q,null);A(t,Z);for(let b=0;b<ie.length;b+=1)ie[b]&&ie[b].m(t,null);f||(S=[ke(i,"click",n[19]),ke(c,"keydown",n[14]),ke(c,"input",n[20]),ke(g,"input",n[21]),ke(g,"keydown",n[13]),ke(Y,"click",n[22]),ke(e,"focusout",n[18]),ke(e,"keydown",n[15])],f=!0)},p(T,se){if(se[0]&278){h=T[4].months;let b;for(b=0;b<h.length;b+=1){const K=Gr(T,h,b);j[b]?j[b].p(K,se):(j[b]=Wr(K),j[b].c(),j[b].m(c,null))}for(;b<j.length;b+=1)j[b].d(1);j.length=h.length}if(se[0]&128&&It(c,T[7]),se[0]&144){$=T[4].months;let b;for(b=0;b<$.length;b+=1){const K=Kr(T,$,b);w[b]?w[b].p(K,se):(w[b]=Yr(K),w[b].c(),w[b].m(d,null))}for(;b<w.length;b+=1)w[b].d(1);w.length=$.length}if(se[0]&32){F=T[5];let b;for(b=0;b<F.length;b+=1){const K=zr(T,F,b);R[b]?R[b].p(K,se):(R[b]=Vr(K),R[b].c(),R[b].m(g,null))}for(;b<R.length;b+=1)R[b].d(1);R.length=F.length}if(se[0]&288&&It(g,T[8]),se[0]&40){X=T[5];let b;for(b=0;b<X.length;b+=1){const K=qr(T,X,b);I[b]?I[b].p(K,se):(I[b]=Xr(K),I[b].c(),I[b].m(U,null))}for(;b<I.length;b+=1)I[b].d(1);I.length=X.length}if(se[0]&16){H=Array(7);let b;for(b=0;b<H.length;b+=1){const K=Jr(T,H,b);G[b]?G[b].p(K,se):(G[b]=Qr(K),G[b].c(),G[b].m(Q,null))}for(;b<G.length;b+=1)G[b].d(1);G.length=H.length}if(se[0]&4807){_e=Array(6);let b;for(b=0;b<_e.length;b+=1){const K=Br(T,_e,b);ie[b]?ie[b].p(K,se):(ie[b]=en(K),ie[b].c(),ie[b].m(t,null))}for(;b<ie.length;b+=1)ie[b].d(1);ie.length=_e.length}},i:Cr,o:Cr,d(T){T&&P(e),nt(j,T),nt(w,T),nt(R,T),nt(I,T),nt(G,T),nt(ie,T),f=!1,Sr(S)}}}function dt(n){return new Date(n.getTime())}function tr(n,e,t){return n>t?dt(t):n<e?dt(e):dt(n)}function tn(n,e){let t=[];for(let r=n.getFullYear();r<=e.getFullYear();r++)t.push(r);return t}function vr(n,e,t){const r=new Date(n.year,n.month,n.number),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r>=i&&r<=s}function Ri(n,e,t){let r,i,s,o;const a=wn();let{value:l=null}=e;function c(h){h.getTime()!==(l==null?void 0:l.getTime())&&(t(3,p=tr(h,y,v)),t(0,l=dt(p)))}function u(h){t(3,p=tr(h,y,v)),!q&&l&&c(p)}const d=new Date,_=new Date;let{min:y=new Date(_.getFullYear()-20,0,1)}=e,{max:v=new Date(_.getFullYear(),11,31,23,59,59,999)}=e,p=dt(l||tr(_,y,v)),m=tn(y,v),{locale:g={}}=e,{browseWithoutSelecting:q=!1}=e;function U(h){p.setFullYear(h),u(p)}function O(h){let j=p.getFullYear();h===12?(h=0,j++):h===-1&&(h=11,j--);const $=jt(j,h),w=Math.min(p.getDate(),$);u(new Date(j,h,w,p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()))}function W(h){vr(h,y,v)&&(p.setFullYear(0),p.setMonth(0),p.setDate(1),p.setFullYear(h.year),p.setMonth(h.month),p.setDate(h.number),c(p),a("select"))}function x(h){if(h.shiftKey&&h.key==="ArrowUp")U(p.getFullYear()-1);else if(h.shiftKey&&h.key==="ArrowDown")U(p.getFullYear()+1);else if(h.shiftKey&&h.key==="ArrowLeft")O(p.getMonth()-1);else if(h.shiftKey&&h.key==="ArrowRight")O(p.getMonth()+1);else return!1;return h.preventDefault(),!0}function ee(h){if(h.shiftKey||h.altKey){x(h);return}else if(h.key==="ArrowUp")U(p.getFullYear()-1);else if(h.key==="ArrowDown")U(p.getFullYear()+1);else if(h.key==="ArrowLeft")O(p.getMonth()-1);else if(h.key==="ArrowRight")O(p.getMonth()+1);else{x(h);return}h.preventDefault()}function Y(h){if(h.shiftKey||h.altKey){x(h);return}else if(h.key==="ArrowUp"||h.key==="ArrowLeft")O(p.getMonth()-1);else if(h.key==="ArrowDown"||h.key==="ArrowRight")O(p.getMonth()+1);else{x(h);return}h.preventDefault()}function te(h){var $;let j=h.shiftKey||h.altKey;if((($=h.target)==null?void 0:$.tagName)!=="SELECT"){if(j){x(h);return}else if(h.key==="ArrowUp")p.setDate(p.getDate()-7),c(p);else if(h.key==="ArrowDown")p.setDate(p.getDate()+7),c(p);else if(h.key==="ArrowLeft")p.setDate(p.getDate()-1),c(p);else if(h.key==="ArrowRight")p.setDate(p.getDate()+1),c(p);else if(h.key==="Enter")c(p),a("select");else return;h.preventDefault()}}function ne(h){Hn.call(this,n,h)}const C=()=>O(p.getMonth()-1),Q=h=>O(parseInt(h.currentTarget.value)),Z=h=>U(parseInt(h.currentTarget.value)),f=()=>O(p.getMonth()+1),S=h=>W(h);return n.$$set=h=>{"value"in h&&t(0,l=h.value),"min"in h&&t(1,y=h.min),"max"in h&&t(2,v=h.max),"locale"in h&&t(16,g=h.locale),"browseWithoutSelecting"in h&&t(17,q=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty[0]&7&&(l&&l>v?c(v):l&&l<y&&c(y)),n.$$.dirty[0]&131081&&p.getTime()!==(l==null?void 0:l.getTime())&&!q&&t(3,p=l?dt(l):p),n.$$.dirty[0]&6&&t(5,m=tn(y,v)),n.$$.dirty[0]&65536&&t(4,r=Oi(g)),n.$$.dirty[0]&8&&t(8,i=p.getFullYear()),n.$$.dirty[0]&8&&t(7,s=p.getMonth()),n.$$.dirty[0]&24&&t(6,o=ki(p,r.weekStartsOn))},[l,y,v,p,r,m,o,s,i,d,U,O,W,ee,Y,te,g,q,ne,C,Q,Z,f,S]}class Ci extends br{constructor(e){super(),wr(this,e,Ri,Di,Er,{value:0,min:1,max:2,locale:16,browseWithoutSelecting:17},null,[-1,-1])}}function rn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function Ii(n){const e=n-1;return e*e*e+1}function nn(n,{delay:e=0,duration:t=400,easing:r=Ii,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-o),[d,_]=Ir(i),[y,v]=Ir(s);return{delay:e,duration:t,easing:r,css:(p,m)=>`
			transform: ${c} translate(${(1-p)*d}${_}, ${(1-p)*y}${v});
			opacity: ${l-u*m}`}}function sn(n,e,t){let r="",i=!0;t=t||new Date(2020,0,1,0,0,0,0);let s=t.getFullYear(),o=t.getMonth(),a=t.getDate(),l=t.getHours(),c=t.getMinutes(),u=t.getSeconds();const d=t.getMilliseconds();function _(m){for(let g=0;g<m.length;g++)if(n.startsWith(m[g]))n=n.slice(1);else{i=!1,n.length===0&&(r=m.slice(g));return}}function y(m,g,q){const U=n.match(m);if(U!=null&&U[0]){n=n.slice(U[0].length);const O=parseInt(U[0]);return O>q||O<g?(i=!1,null):O}else return i=!1,null}function v(m){if(typeof m=="string")_(m);else if(m.id==="yyyy"){const g=y(/^[0-9]{4}/,0,9999);g!==null&&(s=g)}else if(m.id==="MM"){const g=y(/^[0-9]{2}/,1,12);g!==null&&(o=g-1)}else if(m.id==="dd"){const g=y(/^[0-9]{2}/,1,31);g!==null&&(a=g)}else if(m.id==="HH"){const g=y(/^[0-9]{2}/,0,23);g!==null&&(l=g)}else if(m.id==="mm"){const g=y(/^[0-9]{2}/,0,59);g!==null&&(c=g)}else if(m.id==="ss"){const g=y(/^[0-9]{2}/,0,59);g!==null&&(u=g)}}for(const m of e)if(v(m),!i)break;const p=jt(s,o);return a>p&&(i=!1),{date:i?new Date(s,o,a,l,c,u,d):null,missingPunctuation:r}}function wt(n){return("0"+n.toString()).slice(-2)}const Ui=[{id:"yyyy",toString:n=>n.getFullYear().toString()},{id:"MM",toString:n=>wt(n.getMonth()+1)},{id:"dd",toString:n=>wt(n.getDate())},{id:"HH",toString:n=>wt(n.getHours())},{id:"mm",toString:n=>wt(n.getMinutes())},{id:"ss",toString:n=>wt(n.getSeconds())}];function xi(n){for(const e of Ui)if(n.startsWith(e.id))return e}function on(n){const e=[];for(;n.length>0;){const t=xi(n);t?(e.push(t),n=n.slice(t.id.length)):typeof e[e.length-1]=="string"?(e[e.length-1]+=n[0],n=n.slice(1)):(e.push(n[0]),n=n.slice(1))}return e}function an(n){let e,t,r,i,s;function o(l){n[23](l)}let a={min:n[3],max:n[4],locale:n[8],browseWithoutSelecting:n[9]};return n[11]!==void 0&&(a.value=n[11]),t=new Ci({props:a}),En.push(()=>Sn(t,"value",o)),t.$on("focusout",n[14]),t.$on("select",n[16]),{c(){e=M("div"),Jt(t.$$.fragment),this.h()},l(l){e=B(l,"DIV",{class:!0});var c=N(e);qt(t.$$.fragment,c),c.forEach(P),this.h()},h(){k(e,"class","picker svelte-1bsxr9h"),$e(e,"visible",n[2])},m(l,c){ge(l,e,c),zt(t,e,null),s=!0},p(l,c){n=l;const u={};c&8&&(u.min=n[3]),c&16&&(u.max=n[4]),c&256&&(u.locale=n[8]),c&512&&(u.browseWithoutSelecting=n[9]),!r&&c&2048&&(r=!0,u.value=n[11],Tn(()=>r=!1)),t.$set(u),(!s||c&4)&&$e(e,"visible",n[2])},i(l){s||(Le(t.$$.fragment,l),Jn(()=>{s&&(i||(i=xr(e,nn,{duration:80,easing:rn,y:-5},!0)),i.run(1))}),s=!0)},o(l){Ge(t.$$.fragment,l),i||(i=xr(e,nn,{duration:80,easing:rn,y:-5},!1)),i.run(0),s=!1},d(l){l&&P(e),Kt(t),l&&i&&i.end()}}}function Fi(n){let e,t,r,i,s,o,a,l=n[2]&&!n[6]&&an(n);return{c(){e=M("div"),t=M("input"),r=de(),l&&l.c(),this.h()},l(c){e=B(c,"DIV",{class:!0});var u=N(e);t=B(u,"INPUT",{type:!0,placeholder:!0,class:!0}),r=fe(u),l&&l.l(u),u.forEach(P),this.h()},h(){k(t,"type","text"),t.value=n[0],k(t,"placeholder",n[5]),t.disabled=n[6],k(t,"class","svelte-1bsxr9h"),$e(t,"invalid",!n[1]),k(e,"class",i="date-time-field "+n[7]+" svelte-1bsxr9h")},m(c,u){ge(c,e,u),A(e,t),A(e,r),l&&l.m(e,null),s=!0,o||(a=[ke(t,"focus",n[20]),ke(t,"mousedown",n[21]),ke(t,"input",n[22]),ke(e,"focusout",n[14]),ke(e,"keydown",n[15])],o=!0)},p(c,[u]){(!s||u&1&&t.value!==c[0])&&(t.value=c[0]),(!s||u&32)&&k(t,"placeholder",c[5]),(!s||u&64)&&(t.disabled=c[6]),(!s||u&2)&&$e(t,"invalid",!c[1]),c[2]&&!c[6]?l?(l.p(c,u),u&68&&Le(l,1)):(l=an(c),l.c(),Le(l,1),l.m(e,null)):l&&(ur(),Ge(l,1,1,()=>{l=null}),hr()),(!s||u&128&&i!==(i="date-time-field "+c[7]+" svelte-1bsxr9h"))&&k(e,"class",i)},i(c){s||(Le(l),s=!0)},o(c){Ge(l),s=!1},d(c){c&&P(e),l&&l.d(),o=!1,Sr(a)}}}function Li(n,e,t){let r,i;const s=wn(),o=new Date,a=kn(null);Ur(n,a,h=>t(24,i=h));const l=(()=>({subscribe:a.subscribe,set:h=>{h===null?(a.set(null),t(17,c=h)):h.getTime()!==(i==null?void 0:i.getTime())&&(a.set(h),t(17,c=h))}}))();Ur(n,l,h=>t(11,r=h));let{value:c=null}=e,{min:u=new Date(o.getFullYear()-20,0,1)}=e,{max:d=new Date(o.getFullYear(),11,31,23,59,59,999)}=e,{placeholder:_="2020-12-31 23:00:00"}=e,{valid:y=!0}=e,{disabled:v=!1}=e,{class:p=""}=e,{format:m="yyyy-MM-dd HH:mm:ss"}=e,g=on(m),{locale:q={}}=e;function U(h,j){t(0,O=Mr(h,j))}let{text:O=Mr(r,g)}=e;function W(h,j){if(h.length){const $=sn(h,j,r);$.date!==null?(t(1,y=!0),l.set($.date)):t(1,y=!1)}else t(1,y=!0),c&&(t(17,c=null),l.set(null))}let{visible:x=!1}=e,{closeOnSelection:ee=!1}=e,{browseWithoutSelecting:Y=!1}=e;function te(h){(h==null?void 0:h.currentTarget)instanceof HTMLElement&&h.relatedTarget&&h.relatedTarget instanceof Node&&h.currentTarget.contains(h.relatedTarget)||t(2,x=!1)}function ne(h){h.key==="Escape"&&x?(t(2,x=!1),h.preventDefault(),h.stopPropagation()):h.key==="Enter"&&(t(2,x=!x),h.preventDefault())}function C(h){s("select",h.detail),ee&&t(2,x=!1)}const Q=()=>t(2,x=!0),Z=()=>t(2,x=!0),f=h=>{if(h instanceof InputEvent&&h.inputType==="insertText"&&typeof h.data=="string"&&h.currentTarget.value===O+h.data){let j=sn(O,g,r);if(j.missingPunctuation!==""&&!j.missingPunctuation.startsWith(h.data)){t(0,O=O+j.missingPunctuation+h.data);return}}t(0,O=h.currentTarget.value)};function S(h){r=h,l.set(r)}return n.$$set=h=>{"value"in h&&t(17,c=h.value),"min"in h&&t(3,u=h.min),"max"in h&&t(4,d=h.max),"placeholder"in h&&t(5,_=h.placeholder),"valid"in h&&t(1,y=h.valid),"disabled"in h&&t(6,v=h.disabled),"class"in h&&t(7,p=h.class),"format"in h&&t(18,m=h.format),"locale"in h&&t(8,q=h.locale),"text"in h&&t(0,O=h.text),"visible"in h&&t(2,x=h.visible),"closeOnSelection"in h&&t(19,ee=h.closeOnSelection),"browseWithoutSelecting"in h&&t(9,Y=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty&131072&&l.set(c),n.$$.dirty&262144&&t(10,g=on(m)),n.$$.dirty&3072&&U(r,g),n.$$.dirty&1025&&W(O,g)},[O,y,x,u,d,_,v,p,q,Y,g,r,a,l,te,ne,C,c,m,ee,Q,Z,f,S]}class Ni extends br{constructor(e){super(),wr(this,e,Li,Fi,Er,{value:17,min:3,max:4,placeholder:5,valid:1,disabled:6,class:7,format:18,locale:8,text:0,visible:2,closeOnSelection:19,browseWithoutSelecting:9})}}var $i=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Mi=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$i(void 0,void 0,void 0,function*(){return yield(yield Gt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Tr extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class Bi extends Tr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hi extends Tr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ji extends Tr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class zi{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Mi(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return qi(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(y=>{throw new Bi(y)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Hi(c);if(!c.ok)throw new Ji(c);let d=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return d==="application/json"?_=yield c.json():d==="application/octet-stream"?_=yield c.blob():d==="multipart/form-data"?_=yield c.formData():_=yield c.text(),{data:_,error:null}}catch(i){return{data:null,error:i}}})}}var pr={exports:{}};(function(n,e){var t=typeof self<"u"?self:Gn,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(f){return f&&DataView.prototype.isPrototypeOf(f)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(f){return f&&c.indexOf(Object.prototype.toString.call(f))>-1};function d(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function _(f){return typeof f!="string"&&(f=String(f)),f}function y(f){var S={next:function(){var h=f.shift();return{done:h===void 0,value:h}}};return a.iterable&&(S[Symbol.iterator]=function(){return S}),S}function v(f){this.map={},f instanceof v?f.forEach(function(S,h){this.append(h,S)},this):Array.isArray(f)?f.forEach(function(S){this.append(S[0],S[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(S){this.append(S,f[S])},this)}v.prototype.append=function(f,S){f=d(f),S=_(S);var h=this.map[f];this.map[f]=h?h+", "+S:S},v.prototype.delete=function(f){delete this.map[d(f)]},v.prototype.get=function(f){return f=d(f),this.has(f)?this.map[f]:null},v.prototype.has=function(f){return this.map.hasOwnProperty(d(f))},v.prototype.set=function(f,S){this.map[d(f)]=_(S)},v.prototype.forEach=function(f,S){for(var h in this.map)this.map.hasOwnProperty(h)&&f.call(S,this.map[h],h,this)},v.prototype.keys=function(){var f=[];return this.forEach(function(S,h){f.push(h)}),y(f)},v.prototype.values=function(){var f=[];return this.forEach(function(S){f.push(S)}),y(f)},v.prototype.entries=function(){var f=[];return this.forEach(function(S,h){f.push([h,S])}),y(f)},a.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function p(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function m(f){return new Promise(function(S,h){f.onload=function(){S(f.result)},f.onerror=function(){h(f.error)}})}function g(f){var S=new FileReader,h=m(S);return S.readAsArrayBuffer(f),h}function q(f){var S=new FileReader,h=m(S);return S.readAsText(f),h}function U(f){for(var S=new Uint8Array(f),h=new Array(S.length),j=0;j<S.length;j++)h[j]=String.fromCharCode(S[j]);return h.join("")}function O(f){if(f.slice)return f.slice(0);var S=new Uint8Array(f.byteLength);return S.set(new Uint8Array(f)),S.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:a.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:a.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():a.arrayBuffer&&a.blob&&l(f)?(this._bodyArrayBuffer=O(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||u(f))?this._bodyArrayBuffer=O(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var f=p(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var f=p(this);if(f)return f;if(this._bodyBlob)return q(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(te)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ee(f){var S=f.toUpperCase();return x.indexOf(S)>-1?S:f}function Y(f,S){S=S||{};var h=S.body;if(f instanceof Y){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,S.headers||(this.headers=new v(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!h&&f._bodyInit!=null&&(h=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new v(S.headers)),this.method=ee(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(h)}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function te(f){var S=new FormData;return f.trim().split("&").forEach(function(h){if(h){var j=h.split("="),$=j.shift().replace(/\+/g," "),w=j.join("=").replace(/\+/g," ");S.append(decodeURIComponent($),decodeURIComponent(w))}}),S}function ne(f){var S=new v,h=f.replace(/\r?\n[\t ]+/g," ");return h.split(/\r?\n/).forEach(function(j){var $=j.split(":"),w=$.shift().trim();if(w){var F=$.join(":").trim();S.append(w,F)}}),S}W.call(Y.prototype);function C(f,S){S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in S?S.statusText:"OK",this.headers=new v(S.headers),this.url=S.url||"",this._initBody(f)}W.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},C.error=function(){var f=new C(null,{status:0,statusText:""});return f.type="error",f};var Q=[301,302,303,307,308];C.redirect=function(f,S){if(Q.indexOf(S)===-1)throw new RangeError("Invalid status code");return new C(null,{status:S,headers:{location:f}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,h){this.message=S,this.name=h;var j=Error(S);this.stack=j.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Z(f,S){return new Promise(function(h,j){var $=new Y(f,S);if($.signal&&$.signal.aborted)return j(new o.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function F(){w.abort()}w.onload=function(){var R={status:w.status,statusText:w.statusText,headers:ne(w.getAllResponseHeaders()||"")};R.url="responseURL"in w?w.responseURL:R.headers.get("X-Request-URL");var X="response"in w?w.response:w.responseText;h(new C(X,R))},w.onerror=function(){j(new TypeError("Network request failed"))},w.ontimeout=function(){j(new TypeError("Network request failed"))},w.onabort=function(){j(new o.DOMException("Aborted","AbortError"))},w.open($.method,$.url,!0),$.credentials==="include"?w.withCredentials=!0:$.credentials==="omit"&&(w.withCredentials=!1),"responseType"in w&&a.blob&&(w.responseType="blob"),$.headers.forEach(function(R,X){w.setRequestHeader(X,R)}),$.signal&&($.signal.addEventListener("abort",F),w.onreadystatechange=function(){w.readyState===4&&$.signal.removeEventListener("abort",F)}),w.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return Z.polyfill=!0,s.fetch||(s.fetch=Z,s.Headers=v,s.Request=Y,s.Response=C),o.Headers=v,o.Request=Y,o.Response=C,o.fetch=Z,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(pr,pr.exports);var kr=pr.exports;const Ar=Kn(kr),Vt=Xn({__proto__:null,default:Ar},[kr]);class Ki{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ar:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,d=null,_=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");p&&m&&m.length>1&&(d=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,_=406,y="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const p=await s.text();try{c=JSON.parse(p),Array.isArray(c)&&s.status===404&&(u=[],c=null,_=200,y="OK")}catch{s.status===404&&p===""?(_=204,y="No Content"):c={message:p}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(c=null,_=200,y="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:d,status:_,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class Gi extends Ki{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class mt extends Gi{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class Wi{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new mt({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new mt({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new mt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new mt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new mt({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Yi="1.6.1",Vi={"X-Client-Info":`postgrest-js/${Yi}`};class Xi{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Vi),t),this.schema=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new Wi(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(s="HEAD",Object.entries(t).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(s="POST",a=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new mt({method:s,url:o,headers:l,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var rr,ln;function Qi(){if(ln)return rr;ln=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return rr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),rr}const Zi="websocket",es="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",ts=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],rs="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",ns=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],is="1.0.34",ss={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},os="https://github.com/theturtle32/WebSocket-Node",as={node:">=4.0.0"},ls={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},cs={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},us={verbose:!1},hs={test:"tape test/unit/*.js",gulp:"gulp"},ds="index",fs={lib:"./lib"},vs="lib/browser.js",ps="Apache-2.0",ms={name:Zi,description:es,keywords:ts,author:rs,contributors:ns,version:is,repository:ss,homepage:os,engines:as,dependencies:ls,devDependencies:cs,config:us,scripts:hs,main:ds,directories:fs,browser:vs,license:ps};var ys=ms.version,ct;if(typeof globalThis=="object")ct=globalThis;else try{ct=Qi()}catch{}finally{if(!ct&&typeof window<"u"&&(ct=window),!ct)throw new Error("Could not determine global this")}var Dt=ct.WebSocket||ct.MozWebSocket,gs=ys;function Rn(n,e){var t;return e?t=new Dt(n,e):t=new Dt(n),t}Dt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(Rn,n,{get:function(){return Dt[n]}})});var _s={w3cwebsocket:Dt?Rn:null,version:gs};const bs="2.7.2",ws={"X-Client-Info":`realtime-js/${bs}`},Es="1.0.0",Cn=1e4,Ss=1e3;var At;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(At||(At={}));var Fe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Fe||(Fe={}));var He;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(He||(He={}));var mr;(function(n){n.websocket="websocket"})(mr||(mr={}));var ut;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ut||(ut={}));class In{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ts{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class nr{constructor(e,t,r={},i=Cn){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var cn;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(cn||(cn={}));class Ot{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ot.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ot.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ot.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const _=u.map(m=>m.presence_ref),y=d.map(m=>m.presence_ref),v=u.filter(m=>y.indexOf(m.presence_ref)<0),p=d.filter(m=>_.indexOf(m.presence_ref)<0);v.length>0&&(a[c]=v),p.length>0&&(l[c]=p)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(y=>y.presence_ref),_=u.filter(y=>d.indexOf(y.presence_ref)<0);e[a].unshift(..._)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var le;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(le||(le={}));const un=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=ks(o,n,e,i),s),{})},ks=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?Un(s,o):yr(o)},Un=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return js(e,t)}switch(n){case le.bool:return As(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Os(e);case le.json:case le.jsonb:return Ps(e);case le.timestamp:return Ds(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return yr(e);default:return yr(e)}},yr=n=>n,As=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Os=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Ps=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},js=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Un(e,a))}return n},Ds=n=>typeof n=="string"?n.replace(" ","T"):n;var hn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},dn;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(dn||(dn={}));var fn;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(fn||(fn={}));var vn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(vn||(vn={}));class Or{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new nr(this,He.join,this.params,this.timeout),this.rejoinTimer=new In(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(He.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Ot(this)}subscribe(e,t=this.timeout){var r,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,_=(u=d==null?void 0:d.length)!==null&&u!==void 0?u:0,y=[];for(let v=0;v<_;v++){const p=d[v],{filter:{event:m,schema:g,table:q,filter:U}}=p,O=c&&c[v];if(O&&O.event===m&&O.schema===g&&O.table===q&&O.filter===U)y.push(Object.assign(Object.assign({},p),{id:O.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return hn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return hn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var i,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(s=(i=this.params)===null||i===void 0?void 0:i.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(He.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new nr(this,He.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new nr(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=He;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let _=this._onMessage(o,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var v,p,m;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((m=(p=y.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(y=>y.callback(_,r)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var v,p,m,g,q,U;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const O=y.id,W=(v=y.filter)===null||v===void 0?void 0:v.event;return O&&((p=t.ids)===null||p===void 0?void 0:p.includes(O))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const O=(q=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return O==="*"||O===((U=t==null?void 0:t.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof _=="object"&&"ids"in _){const v=_.data,{schema:p,table:m,commit_timestamp:g,type:q,errors:U}=v;_=Object.assign(Object.assign({},{schema:p,table:m,commit_timestamp:g,eventType:q,new:{},old:{},errors:U}),this._getPayloadRecords(v))}y.callback(_,r)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Or.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(He.close,{},e)}_onError(e){this._on(He.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=un(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=un(e.columns,e.old_record)),t}}var ir=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Rs=()=>{};class Cs{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=ws,this.params={},this.timeout=Cn,this.transport=_s.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Rs,this.conn=null,this.sendBuffer=[],this.serializer=new Ts,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${mr.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new In(()=>ir(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return ir(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return ir(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case At.connecting:return ut.Connecting;case At.open:return ut.Open;case At.closing:return ut.Closing;default:return ut.Closed}}isConnected(){return this.connectionState()===ut.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new Or(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e;let o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};if(this.log("push",`${t} ${r} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(He.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Es}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(He.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ss,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Pr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Te(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Is extends Pr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pn extends Pr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var xn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Fn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>xn(void 0,void 0,void 0,function*(){return yield(yield Gt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Us=()=>xn(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).Response:Response});var _t=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const sr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xs=(n,e)=>_t(void 0,void 0,void 0,function*(){const t=yield Us();n instanceof t?n.json().then(r=>{e(new Is(sr(r),n.status||500))}).catch(r=>{e(new pn(sr(r),r))}):e(new pn(sr(n),n))}),Fs=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Xt(n,e,t,r,i,s){return _t(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Fs(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>xs(l,a))})})}function gr(n,e,t,r){return _t(this,void 0,void 0,function*(){return Xt(n,"GET",e,t,r)})}function it(n,e,t,r,i){return _t(this,void 0,void 0,function*(){return Xt(n,"POST",e,r,i,t)})}function Ls(n,e,t,r,i){return _t(this,void 0,void 0,function*(){return Xt(n,"PUT",e,r,i,t)})}function Ln(n,e,t,r,i){return _t(this,void 0,void 0,function*(){return Xt(n,"DELETE",e,r,i,t)})}var Ne=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ns={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $s{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Fn(i)}uploadOrUpdate(e,t,r,i){return Ne(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},mn),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return u.ok?{data:{path:l},error:null}:{data:null,error:yield u.json()}}catch(s){if(Te(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Ne(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:mn.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u});return d.ok?{data:{path:s},error:null}:{data:null,error:yield d.json()}}catch(l){if(Te(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Ne(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield it(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new Pr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}update(e,t,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}copy(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield it(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return Ne(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield it(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Ne(this,void 0,void 0,function*(){try{const i=yield it(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}download(e,t){return Ne(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield gr(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Te(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ne(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ns),t),{prefix:e||""});return{data:yield it(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Te(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ms="2.5.1",Bs={"X-Client-Info":`storage-js/${Ms}`};var vt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Hs{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Bs),t),this.fetch=Fn(r)}listBuckets(){return vt(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Te(e))return{data:null,error:e};throw e}})}getBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield gr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return vt(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return vt(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}deleteBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Te(t))return{data:null,error:t};throw t}})}}class Js extends Hs{constructor(e,t={},r){super(e,t,r)}from(e){return new $s(this.url,this.headers,e,this.fetch)}}const qs="2.21.0",zs={"X-Client-Info":`supabase-js/${qs}`};var Ks=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Gs=n=>{let e;return n?e=n:typeof fetch>"u"?e=Ar:e=fetch,(...t)=>e(...t)},Ws=()=>typeof Headers>"u"?kr.Headers:Headers,Ys=(n,e,t)=>{const r=Gs(t),i=Ws();return(s,o)=>Ks(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};function Vs(n){return n.replace(/\/$/,"")}function Xs(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}var ft=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function Qs(n){return Math.round(Date.now()/1e3)+n}function Zs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const rt=()=>typeof document<"u",lt={tested:!1,writable:!1},or=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lt.tested)return lt.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),lt.tested=!0,lt.writable=!0}catch{lt.tested=!0,lt.writable=!1}return lt.writable};function De(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const Nn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ft(void 0,void 0,void 0,function*(){return yield(yield Gt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},eo=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Et=(n,e,t)=>ft(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),Ft=(n,e)=>ft(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),ar=(n,e)=>ft(void 0,void 0,void 0,function*(){yield n.removeItem(e)});function to(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),c!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Qt{constructor(){this.promise=new Qt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qt.promiseConstructor=Promise;function yn(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(to(r))}function ro(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function no(n,e){return new Promise((r,i)=>{ft(this,void 0,void 0,function*(){for(let s=0;s<1/0;s++)try{const o=yield n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})})}function io(n){return("0"+n.toString(16)).substr(-2)}function Lt(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,io).join("")}function so(n){return ft(this,void 0,void 0,function*(){const t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function oo(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Nt(n){return ft(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield so(n);return oo(e)})}class jr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function re(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ao extends jr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function lo(n){return re(n)&&n.name==="AuthApiError"}class $n extends jr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ct extends jr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class St extends Ct{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class $t extends Ct{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class We extends Ct{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lr extends Ct{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _r extends Ct{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var Dr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},co=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Mt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),uo=(n,e)=>Dr(void 0,void 0,void 0,function*(){const t=[502,503,504];eo(n)?t.includes(n.status)?e(new _r(Mt(n),n.status)):n.json().then(r=>{e(new ao(Mt(r),n.status||500))}).catch(r=>{e(new $n(Mt(r),r))}):e(new _r(Mt(n),0))}),ho=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function oe(n,e,t,r){var i;return Dr(this,void 0,void 0,function*(){const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield fo(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function fo(n,e,t,r,i,s){return Dr(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,ho(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>uo(l,a))})})}function tt(n){var e;let t=null;yo(n)&&(t=Object.assign({},n),t.expires_at=Qs(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ht(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function vo(n){return{data:n,error:null}}function po(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=co(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function mo(n){return n}function yo(n){return n.access_token&&n.refresh_token&&n.expires_in}var qe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},go=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class _o{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Nn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(re(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ht})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return qe(this,void 0,void 0,function*(){try{const{options:t}=e,r=go(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),yield oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:po,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(re(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ht})}catch(t){if(re(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,r,i,s,o,a,l;return qe(this,void 0,void 0,function*(){try{const c={nextPage:null,lastPage:0,total:0},u=yield oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:mo});if(u.error)throw u.error;const d=yield u.json(),_=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(v.split(";")[1].split("=")[1]);c[`${m}Page`]=p}),c.total=parseInt(_)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(re(c))return{data:{users:[]},error:c};throw c}})}getUserById(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ht})}catch(t){if(re(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ht})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ht})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return qe(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(re(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(re(t))return{data:null,error:t};throw t}})}}const bo="2.26.0",wo="http://localhost:9999",Eo="supabase.auth.token",So={"X-Client-Info":`gotrue-js/${bo}`},To=10,ko={getItem:n=>or()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{or()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{or()&&globalThis.localStorage.removeItem(n)}};function Ao(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var J=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Ao();const Oo={url:wo,storageKey:Eo,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:So,flowType:"implicit"},cr=30*1e3,Po=3;class jo{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const r=Object.assign(Object.assign({},Oo),e);if(this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||ko,this.admin=new _o({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Nn(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",i=>{this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return J(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=yield this._isPKCEFlow();if(this.detectSessionInUrl&&this._isImplicitGrantFlow()||e){const{data:t,error:r}=yield this._getSessionFromUrl(e);if(r)return yield this._removeSession(),{error:r};const{session:i,redirectType:s}=t;return yield this._saveSession(i),setTimeout(()=>{s==="recovery"?this._notifyAllSubscribers("PASSWORD_RECOVERY",i):this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return re(e)?{error:e}:{error:new $n("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}})}signUp(e){var t,r,i;return J(this,void 0,void 0,function*(){try{yield this._removeSession();let s;if("email"in e){const{email:u,password:d,options:_}=e;let y=null,v=null;if(this.flowType==="pkce"){const p=Lt();yield Et(this.storage,`${this.storageKey}-code-verifier`,p),y=yield Nt(p),v=p===y?"plain":"s256"}s=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:u,password:d,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:y,code_challenge_method:v},xform:tt})}else if("phone"in e){const{phone:u,password:d,options:_}=e;s=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(i=_==null?void 0:_.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:tt})}else throw new $t("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(re(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(e){return J(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:s,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:tt})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:tt})}else throw new $t("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i||!r?{data:{user:null,session:null},error:i}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,r,i,s;return J(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(e){return J(this,void 0,void 0,function*(){const t=yield Ft(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:tt});return yield ar(this.storage,`${this.storageKey}-code-verifier`),i||!r?{data:{user:null,session:null},error:i}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})})}signInWithIdToken(e){return J(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:r,token:i,nonce:s}=e,o=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,nonce:s,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:tt}),{data:a,error:l}=o;return l||!a?{data:{user:null,session:null},error:l}:(a.session&&(yield this._saveSession(a.session),this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,r,i,s,o;return J(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const _=Lt();yield Et(this.storage,`${this.storageKey}-code-verifier`,_),c=yield Nt(_),u=_===c?"plain":"s256"}const{error:d}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{error:c}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null},error:c}}throw new $t("You must provide either an email or phone number.")}catch(a){if(re(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){var t,r;return J(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:i,error:s}=yield oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:tt});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,a=i.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){var t,r,i;return J(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:vo})}catch(s){if(re(s))return{data:null,error:s};throw s}})}resend(e){return J(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null},error:o}}throw new $t("You must provide either an email or phone number and a type")}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return J(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const s=yield Ft(this.storage,this.storageKey);s!==null&&(this._isValidSession(s)?e=s:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:r,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}})}getUser(e){var t,r;return J(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:s}=yield this.getSession();if(s)throw s;e=(r=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0}return yield oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ht})}catch(i){if(re(i))return{data:{user:null},error:i};throw i}})}updateUser(e,t={}){return J(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)throw i;if(!r.session)throw new St;const s=r.session,{data:o,error:a}=yield oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:s.access_token,xform:ht});if(a)throw a;return s.user=o.user,yield this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(r){if(re(r))return{data:{user:null},error:r};throw r}})}_decodeJWT(e){return yn(e)}setSession(e){return J(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new St;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=yn(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=yield this.getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(re(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return J(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:o}=yield this.getSession();if(o)throw o;e=(t=s.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new St;const{session:r,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(e){return J(this,void 0,void 0,function*(){try{if(!rt())throw new We("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new We("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new lr("Not a valid PKCE flow url.");if(e){const m=De("code");if(!m)throw new lr("No code detected.");const{data:g,error:q}=yield this.exchangeCodeForSession(m);if(q)throw q;if(!g.session)throw new lr("No session detected.");let U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:g.session,redirectType:null},error:null}}const t=De("error_description");if(t){const m=De("error_code");if(!m)throw new We("No error_code detected.");const g=De("error");throw g?new We(t,{error:g,code:m}):new We("No error detected.")}const r=De("provider_token"),i=De("provider_refresh_token"),s=De("access_token");if(!s)throw new We("No access_token detected.");const o=De("expires_in");if(!o)throw new We("No expires_in detected.");const a=De("refresh_token");if(!a)throw new We("No refresh_token detected.");const l=De("token_type");if(!l)throw new We("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{data:d,error:_}=yield this.getUser(s);if(_)throw _;const y=d.user,v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(o),expires_at:u,refresh_token:a,token_type:l,user:y},p=De("type");return window.location.hash="",{data:{session:v,redirectType:p},error:null}}catch(t){if(re(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return rt()&&(!!De("access_token")||!!De("error_description"))}_isPKCEFlow(){return J(this,void 0,void 0,function*(){const e=yield Ft(this.storage,`${this.storageKey}-code-verifier`);return rt()&&!!De("code")&&!!e})}signOut(){var e;return J(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const i=(e=t.session)===null||e===void 0?void 0:e.access_token;if(i){const{error:s}=yield this.admin.signOut(i);if(s&&!(lo(s)&&(s.status===404||s.status===401)))return{error:s}}return yield this._removeSession(),yield ar(this.storage,`${this.storageKey}-code-verifier`),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=Zs(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),this.emitInitialSession(t),{data:{subscription:r}}}emitInitialSession(e){var t,r;return J(this,void 0,void 0,function*(){try{const{data:{session:i},error:s}=yield this.getSession();if(s)throw s;(t=this.stateChangeEmitters.get(e))===null||t===void 0||t.callback("INITIAL_SESSION",i)}catch(i){(r=this.stateChangeEmitters.get(e))===null||r===void 0||r.callback("INITIAL_SESSION",null),console.error(i)}})}resetPasswordForEmail(e,t={}){return J(this,void 0,void 0,function*(){let r=null,i=null;if(this.flowType==="pkce"){const s=Lt();yield Et(this.storage,`${this.storageKey}-code-verifier`,s),r=yield Nt(s),i=s===r?"plain":"s256"}try{return yield oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(re(s))return{data:null,error:s};throw s}})}_refreshAccessToken(e){return J(this,void 0,void 0,function*(){try{const t=Date.now();return yield no(r=>J(this,void 0,void 0,function*(){return yield ro(r*200),yield oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tt})}),(r,i,s)=>s&&s.error&&s.error instanceof _r&&Date.now()+(r+1)*200-t<cr)}catch(t){if(re(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return J(this,void 0,void 0,function*(){const r=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return rt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){var e;return J(this,void 0,void 0,function*(){try{const t=yield Ft(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+To)if(this.autoRefreshToken&&t.refresh_token){const{error:i}=yield this._callRefreshToken(t.refresh_token);i&&(console.log(i.message),yield this._removeSession())}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return J(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Qt,!e)throw new St;const{data:i,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new St;yield this._saveSession(i.session),this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(re(i)){const s={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach(i=>i.callback(e,t))}_saveSession(e){return J(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Et(this.storage,this.storageKey,e)}_removeSession(){return J(this,void 0,void 0,function*(){this.persistSession?yield ar(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return J(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const e=setInterval(()=>this._autoRefreshTokenTick(),cr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return J(this,void 0,void 0,function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return J(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return J(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return J(this,void 0,void 0,function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((t.expires_at*1e3-e)/cr)<Po&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}})}_handleVisibilityChange(){return J(this,void 0,void 0,function*(){if(!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>J(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return J(this,void 0,void 0,function*(){document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return J(this,void 0,void 0,function*(){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=Lt();yield Et(this.storage,`${this.storageKey}-code-verifier`,i);const s=yield Nt(i),o=i===s?"plain":"s256",a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`})}_unenroll(e){var t;return J(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(re(r))return{data:null,error:r};throw r}})}_enroll(e){var t,r;return J(this,void 0,void 0,function*(){try{const{data:i,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:o,error:a}=yield oe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=i==null?void 0:i.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(i){if(re(i))return{data:null,error:i};throw i}})}_verify(e){var t;return J(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:s,error:o}=yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})}catch(r){if(re(r))return{data:null,error:r};throw r}})}_challenge(e){var t;return J(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(re(r))return{data:null,error:r};throw r}})}_challengeAndVerify(e){return J(this,void 0,void 0,function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return J(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return J(this,void 0,void 0,function*(){const{data:{session:r},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}})}}class Do extends jo{constructor(e){super(e)}}var Ro=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Co={headers:zs},Io={schema:"public"},Uo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xo={};class Fo{constructor(e,t,r){var i,s,o,a,l,c,u,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const _=Vs(e);if(this.realtimeUrl=`${_}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${_}/auth/v1`,this.storageUrl=`${_}/storage/v1`,_.match(/(supabase\.co)|(supabase\.in)/)){const g=_.split(".");this.functionsUrl=`${g[0]}.functions.${g[1]}.${g[2]}`}else this.functionsUrl=`${_}/functions/v1`;const v=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:Io,realtime:xo,auth:Object.assign(Object.assign({},Uo),{storageKey:v}),global:Co},m=Xs(r??{},p);this.storageKey=(s=(i=m.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=m.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=m.auth)!==null&&l!==void 0?l:{},this.headers,(c=m.global)===null||c===void 0?void 0:c.fetch),this.fetch=Ys(t,this._getAccessToken.bind(this),(u=m.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new Xi(`${_}/rest/v1`,{headers:this.headers,schema:(d=m.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new zi(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Js(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Ro(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Do({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,fetch:l})}_initRealtimeClient(e){return new Cs(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lo=(n,e,t)=>new Fo(n,e,t),No=Lo("https://weaughxswjpwirdjraab.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndlYXVnaHhzd2pwd2lyZGpyYWFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODM5NDc4NTcsImV4cCI6MTk5OTUyMzg1N30.hB8oikmuFAR1AyhmydMqRTKc-gw3QK8aLbOZzpTl2Wk");function gn(n,e,t){const r=n.slice();return r[9]=e[t].tara,r[10]=e[t].taras_homage,r[2]=e[t].created_at,r[11]=e[t].hang_phuc,r[12]=e[t].tam,r[14]=t,r}function $o(n){let e,t=(n[9]?n[9]*108:0)+"",r,i,s=(n[11]?n[11]:0)+"",o,a,l=(n[10]?n[10]:0)+"",c,u,d,_,y=(n[12]?n[12]:0)+"",v,p;return{c(){e=M("p"),r=me(t),i=me(" Bin Green Tara ("),o=me(s),a=me(` Pht
					Kit Gi Hng Phc) - Tn thn 21 Tara: `),c=me(l),u=me(`
					Ln `),d=M("br"),_=me(`
					Qun tng TAM: `),v=me(y),p=me(` Pht

					
				`),this.h()},l(m){e=B(m,"P",{class:!0});var g=N(e);r=ye(g,t),i=ye(g," Bin Green Tara ("),o=ye(g,s),a=ye(g,` Pht
					Kit Gi Hng Phc) - Tn thn 21 Tara: `),c=ye(g,l),u=ye(g,`
					Ln `),d=B(g,"BR",{}),_=ye(g,`
					Qun tng TAM: `),v=ye(g,y),p=ye(g,` Pht

					
				`),g.forEach(P),this.h()},h(){k(e,"class","text-base text-right")},m(m,g){ge(m,e,g),A(e,r),A(e,i),A(e,o),A(e,a),A(e,c),A(e,u),A(e,d),A(e,_),A(e,v),A(e,p)},p(m,g){g&2&&t!==(t=(m[9]?m[9]*108:0)+"")&&Je(r,t),g&2&&s!==(s=(m[11]?m[11]:0)+"")&&Je(o,s),g&2&&l!==(l=(m[10]?m[10]:0)+"")&&Je(c,l),g&2&&y!==(y=(m[12]?m[12]:0)+"")&&Je(v,y)},d(m){m&&P(e)}}}function _n(n){let e,t;return e=new Yn({props:{page:Ho,created_at:n[2],dates_length:n[4],order:n[14],$$slots:{default:[$o]},$$scope:{ctx:n}}}),{c(){Jt(e.$$.fragment)},l(r){qt(e.$$.fragment,r)},m(r,i){zt(e,r,i),t=!0},p(r,i){const s={};i&2&&(s.created_at=r[2]),i&32770&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){t||(Le(e.$$.fragment,r),t=!0)},o(r){Ge(e.$$.fragment,r),t=!1},d(r){Kt(e,r)}}}function bn(n){let e,t,r,i,s,o,a,l,c,u,d,_,y,v,p,m,g,q,U,O,W,x,ee,Y,te,ne,C,Q,Z,f,S,h,j,$,w,F;function R(I){n[8](I)}let X={format:"dd/MM/yyyy",visible:!0,closeOnSelection:!1,placeholder:"dd/MM/yyyy",required:!0,class:"py-2 px-4 mt-2 rounded-md"};return n[2]!==void 0&&(X.value=n[2]),ne=new Ni({props:X}),En.push(()=>Sn(ne,"value",R)),{c(){e=M("div"),t=de(),r=M("form"),i=M("div"),s=M("h4"),o=me("Green Tara (Chui)"),a=de(),l=M("input"),c=de(),u=M("div"),d=M("h4"),_=me("Tn thn 21 c Tara (Bin)"),y=de(),v=M("input"),p=de(),m=M("div"),g=M("h4"),q=me("Thi gian ngi Kit Gi Hng Phc (Pht)"),U=de(),O=M("input"),W=de(),x=M("div"),ee=M("h4"),Y=me("Ngy"),te=de(),Jt(ne.$$.fragment),Q=de(),Z=M("button"),f=M("span"),S=de(),h=M("span"),j=me("Submit"),this.h()},l(I){e=B(I,"DIV",{class:!0,backdrop:!0}),N(e).forEach(P),t=fe(I),r=B(I,"FORM",{class:!0,grid:!0});var H=N(r);i=B(H,"DIV",{class:!0});var G=N(i);s=B(G,"H4",{});var _e=N(s);o=ye(_e,"Green Tara (Chui)"),_e.forEach(P),a=fe(G),l=B(G,"INPUT",{type:!0,name:!0,class:!0}),G.forEach(P),c=fe(H),u=B(H,"DIV",{class:!0});var ie=N(u);d=B(ie,"H4",{});var T=N(d);_=ye(T,"Tn thn 21 c Tara (Bin)"),T.forEach(P),y=fe(ie),v=B(ie,"INPUT",{type:!0,name:!0,class:!0}),ie.forEach(P),p=fe(H),m=B(H,"DIV",{class:!0});var se=N(m);g=B(se,"H4",{});var b=N(g);q=ye(b,"Thi gian ngi Kit Gi Hng Phc (Pht)"),b.forEach(P),U=fe(se),O=B(se,"INPUT",{type:!0,name:!0,class:!0}),se.forEach(P),W=fe(H),x=B(H,"DIV",{class:!0});var K=N(x);ee=B(K,"H4",{});var Se=N(ee);Y=ye(Se,"Ngy"),Se.forEach(P),te=fe(K),qt(ne.$$.fragment,K),K.forEach(P),Q=fe(H),Z=B(H,"BUTTON",{type:!0,class:!0});var D=N(Z);f=B(D,"SPAN",{class:!0}),N(f).forEach(P),S=fe(D),h=B(D,"SPAN",{class:!0});var E=N(h);j=ye(E,"Submit"),E.forEach(P),D.forEach(P),H.forEach(P),this.h()},h(){k(e,"class","absolute top-0 left-0 bottom-0 right-0 cursor-pointer"),k(e,"backdrop","blur-md brightness-75"),k(l,"type","number"),k(l,"name","tara"),k(l,"class","py-2 px-4 mt-2 rounded-md"),k(i,"class","col-start-1 row-start-1"),k(v,"type","number"),k(v,"name","taras_homage"),k(v,"class","py-2 px-4 mt-2 rounded-md"),k(u,"class","col-start-1 row-start-2"),k(O,"type","number"),k(O,"name","hang_phuc"),k(O,"class","py-2 px-4 mt-2 rounded-md"),k(m,"class","col-start-1 row-start-3"),k(x,"class","date-wrapper svelte-zil1x0"),k(f,"class","absolute inset-0 border-0 group-hover:border-[25px] ease-linear duration-100 transition-all border-white rounded-full"),k(h,"class","relative w-full text-left text-base text-white transition-colors duration-200 ease-in-out group-hover:text-green-600 text-lg"),k(Z,"type","submit"),k(Z,"class","relative inline-flex items-center justify-start inline-block px-8 py-4 overflow-hidden font-medium transition-all bg-green-600 rounded-full hover:bg-white group cursor-pointer col-start-1 row-start-4 justify-self-start self-center"),k(r,"class","bg-dark-500 px-10 py-16 rounded gap-4 text-white grid absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"),k(r,"grid","cols-[1fr_1fr] rows-4 ")},m(I,H){ge(I,e,H),ge(I,t,H),ge(I,r,H),A(r,i),A(i,s),A(s,o),A(i,a),A(i,l),A(r,c),A(r,u),A(u,d),A(d,_),A(u,y),A(u,v),A(r,p),A(r,m),A(m,g),A(g,q),A(m,U),A(m,O),A(r,W),A(r,x),A(x,ee),A(ee,Y),A(x,te),zt(ne,x,null),A(r,Q),A(r,Z),A(Z,f),A(Z,S),A(Z,h),A(h,j),$=!0,w||(F=[ke(e,"click",n[7]),zn(n[3].call(null,r))],w=!0)},p(I,H){const G={};!C&&H&4&&(C=!0,G.value=I[2],Tn(()=>C=!1)),ne.$set(G)},i(I){$||(Le(ne.$$.fragment,I),$=!0)},o(I){Ge(ne.$$.fragment,I),$=!1},d(I){I&&P(e),I&&P(t),I&&P(r),Kt(ne),w=!1,Sr(F)}}}function Mo(n){let e,t,r,i,s,o,a,l,c,u=n[1],d=[];for(let v=0;v<u.length;v+=1)d[v]=_n(gn(n,u,v));const _=v=>Ge(d[v],1,1,()=>{d[v]=null});let y=n[0]&&bn(n);return{c(){for(let v=0;v<d.length;v+=1)d[v].c();e=de(),t=M("button"),r=ze("svg"),i=ze("path"),s=de(),y&&y.c(),o=Bt(),this.h()},l(v){for(let g=0;g<d.length;g+=1)d[g].l(v);e=fe(v),t=B(v,"BUTTON",{class:!0});var p=N(t);r=Ke(p,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var m=N(r);i=Ke(m,"path",{fill:!0,d:!0}),N(i).forEach(P),m.forEach(P),p.forEach(P),s=fe(v),y&&y.l(v),o=Bt(),this.h()},h(){k(i,"fill","currentColor"),k(i,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"),k(r,"xmlns","http://www.w3.org/2000/svg"),k(r,"width","32"),k(r,"height","32"),k(r,"viewBox","0 0 24 24"),k(t,"class","absolute bottom-2 right-2 rounded-full cursor-pointer bg-green-600 text-white p-2 w-14 h-14 flex justify-center items-center")},m(v,p){for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(v,p);ge(v,e,p),ge(v,t,p),A(t,r),A(r,i),ge(v,s,p),y&&y.m(v,p),ge(v,o,p),a=!0,l||(c=ke(t,"click",n[6]),l=!0)},p(v,p){if(p&18){u=v[1];let m;for(m=0;m<u.length;m+=1){const g=gn(v,u,m);d[m]?(d[m].p(g,p),Le(d[m],1)):(d[m]=_n(g),d[m].c(),Le(d[m],1),d[m].m(e.parentNode,e))}for(ur(),m=u.length;m<d.length;m+=1)_(m);hr()}v[0]?y?(y.p(v,p),p&1&&Le(y,1)):(y=bn(v),y.c(),Le(y,1),y.m(o.parentNode,o)):y&&(ur(),Ge(y,1,1,()=>{y=null}),hr())},i(v){if(!a){for(let p=0;p<u.length;p+=1)Le(d[p]);Le(y),a=!0}},o(v){d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)Ge(d[p]);Ge(y),a=!1},d(v){nt(d,v),v&&P(e),v&&P(t),v&&P(s),y&&y.d(v),v&&P(o),l=!1,c()}}}function Bo(n){let e,t,r;return t=new Wn({props:{pictureName:"0.green_tara.png",$$slots:{default:[Mo]},$$scope:{ctx:n}}}),{c(){e=M("main"),Jt(t.$$.fragment),this.h()},l(i){e=B(i,"MAIN",{style:!0,class:!0});var s=N(e);qt(t.$$.fragment,s),s.forEach(P),this.h()},h(){qn(e,"height","100vh"),k(e,"class","h-screen overflow-y-hidden")},m(i,s){ge(i,e,s),zt(t,e,null),r=!0},p(i,[s]){const o={};s&32775&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(i){r||(Le(t.$$.fragment,i),r=!0)},o(i){Ge(t.$$.fragment,i),r=!1},d(i){i&&P(e),Kt(t)}}}let Ho=0;function Jo(n,e,t){let r=!1,i=new Date;const{form:s}=Si({onSubmit:async(_,{reset:y})=>{const v=Vn(i).format("DD/MM/YYYY");await No.from("tara").insert([{tara:_.tara,taras_homage:_.taras_homage,hang_phuc:_.hang_phuc,created_at:v}]),t(1,a=[...a,{tara:_.tara,taras_homage:_.taras_homage,hang_phuc:_.hang_phuc,created_at:v}]),console.log(_),y(),t(0,r=!1)}});let{data:o}=e,{dates:a}=o;a.sort((_,y)=>_.id-y.id),console.log(a);let l=a.length;const c=()=>t(0,r=!0),u=()=>t(0,r=!1);function d(_){i=_,t(2,i)}return n.$$set=_=>{"data"in _&&t(5,o=_.data)},n.$$.update=()=>{n.$$.dirty&32&&t(1,{dates:a}=o,a)},[r,a,i,s,l,o,c,u,d]}class Yo extends br{constructor(e){super(),wr(this,e,Jo,Bo,Er,{data:5})}}export{Yo as component};
