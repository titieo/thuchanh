import{w as wn}from"./index.72d5835e.js";import{O as Bn,S as _t,i as bt,s as wt,k as te,P as Be,a as pe,l as re,m as V,Q as He,h as L,c as ye,n as k,b as ge,G as $,R as Lt,T as Ee,H as Jt,N as ot,U as _r,V as Sn,q as Ke,r as Ge,u as rt,e as Mr,W as Hn,X as Le,Y as Yn,Z as xr,g as ht,v as Jn,d as gt,f as zn,I as Lr,w as Wn,L as qn,y as Kn,z as Gn,A as Vn,M as Zn,_ as En,$ as zt,B as Xn,C as br,K as Ur,p as ur,D as wr,E as Sr,F as Er,a0 as Qn}from"./index.b56f0af9.js";import{_ as qt}from"./preload-helper.41c905a7.js";function ei(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Or(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ti(n,...e){const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Je(n){let e;return ti(n,t=>e=t)(),e}class ri extends Error{constructor(e,t){super(e),this.name="FelteSubmitError",this.response=t}}function ni(n,e){return Object.keys(n).some(r=>e(n[r]))}function Kt(n,e){return Object.keys(n||{}).reduce((r,i)=>Object.assign(Object.assign({},r),{[i]:e(n[i])}),{})}function ne(n){return Object.prototype.toString.call(n)==="[object Object]"}function je(n){return Object.keys(n||{}).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:ne(n[t])?je(n[t]):Array.isArray(n[t])?[...n[t]]:n[t]}),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ii(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function si(n){return function(e){if(ne(e)){const t=Pe(e,n);return ii(t,["key"])}return n}}function Pe(n,e){return Kt(n,t=>ne(t)?Pe(t,e):Array.isArray(t)?t.map(si(e)):e)}function tt(...n){const e=n.pop(),t=n.shift();if(typeof t=="string")return t;const r=je(t);if(n.length===0)return r;for(const i of n){if(!i)continue;if(typeof i=="string")return i;let s=e(r,i);if(typeof s<"u")return s;const o=Array.from(new Set(Object.keys(r).concat(Object.keys(i))));for(const a of o)if(s=e(r[a],i[a]),typeof s<"u")r[a]=s;else if(ne(i[a])&&ne(r[a]))r[a]=tt(r[a],i[a],e);else if(Array.isArray(i[a]))r[a]=i[a].map((l,c)=>{if(!ne(l))return l;const u=Array.isArray(r[a])?r[a][c]:r[a];return tt(u,l,e)});else if(ne(i[a])){const l=Pe(je(i[a]),void 0);r[a]=tt(l,i[a],e)}else typeof i[a]<"u"&&(r[a]=i[a])}return r}function oi(n,e){if(!(ne(n)&&ne(e))){if(Array.isArray(e)){if(e.some(ne))return;const t=Array.isArray(n)?n:[];return e.map((r,i)=>{var s;return(s=t[i])!==null&&s!==void 0?s:r})}if(typeof n<"u")return n}}function Fr(...n){return tt(...n,oi)}function Tn(...n){return tt(...n,()=>{})}function We(n,e,t){const r=s=>String.prototype.split.call(e,s).filter(Boolean).reduce((o,a)=>o!=null?o[a]:o,n),i=r(/[,[\]]+?/)||r(/[,[\].]+?/);return i===void 0||i===n?t:i}function Mt(n,e,t){n&&(n=je(n)),ne(n)||(n={});const r=Array.isArray(e)?e:e.match(/[^.[\]]+/g)||[],i=r[r.length-1];if(!i)return n;let s=n;for(let o=0;o<r.length-1;o++){const a=r[o];if(!s[a]||!ne(s[a])&&!Array.isArray(s[a])){const l=r[o+1];isNaN(Number(l))?s[a]={}:s[a]=[]}s=s[a]}return s[i]=t(s[i]),n}function ce(n,e,t){return Mt(n,e,()=>t)}function At(n,e){if(!n||Object(n)!==n)return;typeof n<"u"&&(n=je(n));const t=Array.isArray(e)?e:e.toString().match(/[^.[\]]+/g)||[],r=t.length===1?n:We(n,t.slice(0,-1).join("."));return Array.isArray(r)?r.splice(Number(t[t.length-1]),1):r==null||delete r[t[t.length-1]],n}function Ct(n,e){return ni(n,t=>ne(t)?Ct(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e(t):t.some(r=>ne(r)?Ct(r,e):e(r)):e(t))}function pt(n){return(n==null?void 0:n.nodeName)==="INPUT"}function ai(n){return(n==null?void 0:n.nodeName)==="TEXTAREA"}function yt(n){return(n==null?void 0:n.nodeName)==="SELECT"}function Gt(n){return(n==null?void 0:n.nodeName)==="FIELDSET"}function we(n){return pt(n)||ai(n)||yt(n)}function $r(n){return n.nodeType===Node.ELEMENT_NODE}function be(n,e){return e??(we(n)?n.name:"")}function Qt(n){let e=n;for(;e&&e.nodeName!=="FORM";){if(e.hasAttribute("data-felte-ignore"))return!0;e=e.parentElement}return!1}function li(n,e){if(!(ne(n)||ne(e))){if(n===null||n==="")return e;if(e===null||e===""||!e)return n;if(!(!n||!e)){if(Array.isArray(n)){if(!Array.isArray(e))return[...n,e];const t=[],r=Math.max(e.length,n.length);for(let i=0;i<r;i++){let s=n[i],o=e[i];!ne(s)&&!ne(o)?(Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]),t.push(...s,...o)):t.push(vt([s??{},o??{}]))}return t.filter(Boolean)}return Array.isArray(e)||(e=[e]),[n,...e].reduce((t,r)=>t.concat(r),[]).filter(Boolean)}}}function vt(n){return tt(...n,li)}function ci(n,e){return e?(Array.isArray(e)?e:[e]).map(r=>r(n)):[]}function hr(n,e){return e?Array.isArray(e)?e.reduce((t,r)=>r(t),n):e(n):n}function On(n=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Wt(n,e,{onInit:t,onEnd:r}={}){let i;return(...s)=>{i||t==null||t(),i&&clearTimeout(i),i=setTimeout(()=>{n.apply(this,s),i=void 0,r==null||r()},e)}}function dr(n){if(we(n))return[n];if(n.childElementCount===0)return[];const e=new Set;for(const t of n.children){if(we(t)&&e.add(t),Gt(t))for(const r of t.elements)we(r)&&e.add(r);t.childElementCount>0&&dr(t).forEach(r=>e.add(r))}return Array.from(e)}function kn(n){for(const e of n.elements)!we(e)&&!Gt(e)||n.hasAttribute("data-felte-keep-on-remove")&&!e.hasAttribute("data-felte-keep-on-remove")&&(e.dataset.felteKeepOnRemove=n.dataset.felteKeepOnRemove)}function An(n){return n.type.match(/^(number|range)$/)?n.value?+n.value:void 0:n.value}function Nr(n){var e;let t={},r={};for(const i of n.elements){if(Gt(i)&&kn(i),!we(i)||!i.name)continue;const s=be(i);if(pt(i)){if(i.type==="checkbox"){if(typeof We(t,s)>"u"){if(Array.from(n.querySelectorAll(`[name="${i.name}"]`)).filter(l=>we(l)?s===be(l):!1).length===1){t=ce(t,s,i.checked),r=ce(r,s,!1);continue}t=ce(t,s,i.checked?[i.value]:[]),r=ce(r,s,!1);continue}Array.isArray(We(t,s))&&i.checked&&(t=Mt(t,s,a=>[...a,i.value]));continue}if(i.type==="radio"){if(We(t,s))continue;t=ce(t,s,i.checked?i.value:void 0),r=ce(r,s,!1);continue}if(i.type==="file"){t=ce(t,s,i.multiple?Array.from(i.files||[]):(e=i.files)===null||e===void 0?void 0:e[0]),r=ce(r,s,!1);continue}}else if(yt(i)){if(!i.multiple)t=ce(t,s,i.value);else{const l=Array.from(i.options).filter(c=>c.selected).map(c=>c.value);t=ce(t,s,l)}r=ce(r,s,!1);continue}const o=An(i);t=ce(t,s,o),r=ce(r,s,!1)}return{defaultData:t,defaultTouched:r}}function ui(n,e){var t;if(!we(n))return;const r=e;if(pt(n)){if(n.type==="checkbox"){const i=r;if(typeof i>"u"||typeof i=="boolean"){n.checked=!!i;return}Array.isArray(i)&&(i.includes(n.value)?n.checked=!0:n.checked=!1);return}if(n.type==="radio"){const i=r;n.value===i?n.checked=!0:n.checked=!1;return}if(n.type==="file"){n.files=null,n.value="";return}}else if(yt(n)){if(n.multiple){if(Array.isArray(r)){n.value=String((t=r[0])!==null&&t!==void 0?t:"");const s=r.map(o=>String(o));for(const o of n.options)s.includes(o.value)?o.selected=!0:o.selected=!1}}else{n.value=String(r??"");for(const s of n.options)s.value===String(r)?s.selected=!0:s.selected=!1}return}n.value=String(r??"")}function Ut(n,e){for(const t of n.elements){if(Gt(t)&&kn(t),!we(t)||!t.name)continue;const r=be(t);ui(t,We(e,r))}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Dn(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ze(n,e){return Kt(n,t=>ne(t)?ze(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e:t.map(r=>{const i=ze(r,e);return Dn(i,["key"])}):e)}function qe(n){return n?Kt(n,e=>ne(e)?qe(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!ne(t))return t;const r=qe(t);return r.key||(r.key=On()),r}):e):{}}function Dt(n){return n?Kt(n,e=>ne(e)?qe(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!ne(t))return t;const r=qe(t);return Dn(r,["key"])}):e):{}}function hi(){class n extends CustomEvent{constructor(i){super("feltesuccess",{detail:i})}}class e extends CustomEvent{constructor(i){super("felteerror",{detail:i,cancelable:!0})}setErrors(i){this.preventDefault(),this.errors=i}}class t extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(i){this.onSubmit=i}handleError(i){this.onError=i}handleSuccess(i){this.onSuccess=i}}return{createErrorEvent:r=>new e(r),createSubmitEvent:()=>new t,createSuccessEvent:r=>new n(r)}}function di(n){if(n)return async function(){let t=new FormData(n);const r=new URL(n.action),i=n.method.toLowerCase()==="get"?"get":r.searchParams.get("_method")||n.method;let s=n.enctype;n.querySelector('input[type="file"]')&&(s="multipart/form-data"),(i==="get"||s==="application/x-www-form-urlencoded")&&(t=new URLSearchParams(t));let o;i==="get"?(t.forEach((l,c)=>{r.searchParams.append(c,l)}),o={method:i,headers:{Accept:"application/json"}}):o={method:i,body:t,headers:Object.assign(Object.assign({},s!=="multipart/form-data"&&{"Content-Type":s}),{Accept:"application/json"})};const a=await window.fetch(r.toString(),o);if(a.ok)return a;throw new ri("An error occurred while submitting the form",a)}}function Ft(n,e,t,r){return Mt(n,e,i=>(typeof i<"u"&&!Array.isArray(i)||(i||(i=[]),typeof r>"u"?i.push(t):i.splice(r,0,t)),i))}function fi(n,e,t,r){return Mt(n,e,i=>(!i||!Array.isArray(i)||([i[t],i[r]]=[i[r],i[t]]),i))}function vi(n,e,t,r){return Mt(n,e,i=>(!i||!Array.isArray(i)||i.splice(r,0,i.splice(t,1)[0]),i))}function Br(n){return typeof n=="function"}function Ze(n){return(t,r)=>{if(typeof t=="string"){const i=t;n(s=>{const o=Br(r)?r(We(s,i)):r;return ce(s,i,o)})}else n(i=>Br(t)?t(i):t)}}function mi({stores:n,config:e,validateErrors:t,validateWarnings:r,_getCurrentExtenders:i}){var s;let o,a=qe((s=e.initialValues)!==null&&s!==void 0?s:{});const{data:l,touched:c,errors:u,warnings:f,isDirty:E,isSubmitting:b,interacted:S}=n,v=Ze(l.update),y=Ze(c.update),g=Ze(u.update),C=Ze(f.update);function M(p){v(j=>{const D=p(j);return o&&Ut(o,D),D})}const P=(p,j,D)=>{Ze(M)(p,j),typeof p=="string"&&D&&y(p,!0)};function z(p,j,D){const N=ne(j)?ze(j,!1):!1,B=ne(N)?Pe(N,[]):[];j=ne(j)?Object.assign(Object.assign({},j),{key:On()}):j,u.update(ee=>Ft(ee,p,B,D)),f.update(ee=>Ft(ee,p,B,D)),c.update(ee=>Ft(ee,p,N,D)),l.update(ee=>{const Z=Ft(ee,p,j,D);return setTimeout(()=>o&&Ut(o,Z)),Z})}function U(p){u.update(p),f.update(p),c.update(p),l.update(j=>{const D=p(j);return setTimeout(()=>o&&Ut(o,D)),D})}function Q(p){U(j=>At(j,p))}function J(p,j,D){U(N=>fi(N,p,j,D))}function Y(p,j,D){U(N=>vi(N,p,j,D))}function F(p){const j=We(a,p),D=ne(j)?ze(j,!1):!1,N=ne(D)?Pe(D,[]):[];l.update(B=>{const ee=ce(B,p,j);return o&&Ut(o,ee),ee}),c.update(B=>ce(B,p,D)),u.update(B=>ce(B,p,N)),f.update(B=>ce(B,p,N))}const I=Ze(b.update),q=Ze(E.update),R=Ze(S.update);async function d(){const p=Je(l);c.set(ze(p,!0)),S.set(null);const j=await t(p);return await r(p),j}function m(){P(je(a)),y(p=>Pe(p,!1)),S.set(null),E.set(!1)}function h(p){return async function(D){var N,B,ee,Z,he,ie,O;const{createErrorEvent:W,createSubmitEvent:w,createSuccessEvent:K}=hi(),fe=w();o==null||o.dispatchEvent(fe);const x=(B=(N=fe.onError)!==null&&N!==void 0?N:p==null?void 0:p.onError)!==null&&B!==void 0?B:e.onError,T=(Z=(ee=fe.onSuccess)!==null&&ee!==void 0?ee:p==null?void 0:p.onSuccess)!==null&&Z!==void 0?Z:e.onSuccess,H=(O=(ie=(he=fe.onSubmit)!==null&&he!==void 0?he:p==null?void 0:p.onSubmit)!==null&&ie!==void 0?ie:e.onSubmit)!==null&&O!==void 0?O:di(o);if(!H||(D==null||D.preventDefault(),fe.defaultPrevented))return;b.set(!0),S.set(null);const X=Dt(Je(l)),_e=await t(X,p==null?void 0:p.validate),Te=await r(X,p==null?void 0:p.warn);if(Te&&f.set(Tn(Pe(X,[]),Te)),c.set(ze(X,!0)),_e&&(c.set(ze(_e,!0)),Ct(_e,me=>Array.isArray(me)?me.length>=1:!!me))){await new Promise(me=>setTimeout(me)),i().forEach(me=>{var ke;return(ke=me.onSubmitError)===null||ke===void 0?void 0:ke.call(me,{data:X,errors:_e})}),b.set(!1);return}const Ce={setFields:P,setData:v,setTouched:y,setErrors:g,setWarnings:C,unsetField:Q,addField:z,resetField:F,reset:m,setInitialValues:_.setInitialValues,moveField:Y,swapFields:J,form:o,controls:o&&Array.from(o.elements).filter(we),config:Object.assign(Object.assign({},e),p)};try{const ve=await H(X,Ce);o==null||o.dispatchEvent(K(Object.assign({response:ve},Ce))),await(T==null?void 0:T(ve,Ce))}catch(ve){const me=W(Object.assign({error:ve},Ce));if(o==null||o.dispatchEvent(me),!x&&!me.defaultPrevented)throw ve;if(!x&&!me.errors)return;const ke=me.errors||await(x==null?void 0:x(ve,Ce));ke&&(c.set(ze(ke,!0)),u.set(ke),await new Promise(Re=>setTimeout(Re)),i().forEach(Re=>{var Ue;return(Ue=Re.onSubmitError)===null||Ue===void 0?void 0:Ue.call(Re,{data:X,errors:Je(u)})}))}finally{b.set(!1)}}}const _={setData:v,setFields:P,setTouched:y,setErrors:g,setWarnings:C,setIsSubmitting:I,setIsDirty:q,setInteracted:R,validate:d,reset:m,unsetField:Q,resetField:F,addField:z,swapFields:J,moveField:Y,createSubmitHandler:h,handleSubmit:h(),setInitialValues:p=>{a=qe(p)}};return{public:_,private:{_setFormNode(p){o=p},_getInitialValues:()=>a}}}function pi({helpers:n,stores:e,config:t,extender:r,createSubmitHandler:i,handleSubmit:s,_setFormNode:o,_getInitialValues:a,_setCurrentExtenders:l,_getCurrentExtenders:c}){const{setFields:u,setTouched:f,reset:E,setInitialValues:b}=n,{addValidator:S,addTransformer:v,validate:y}=n,{data:g,errors:C,warnings:M,touched:P,isSubmitting:z,isDirty:U,interacted:Q,isValid:J,isValidating:Y}=e;function F(I){I.requestSubmit||(I.requestSubmit=s);function q(x){return function(T){return T({form:I,stage:x,controls:Array.from(I.elements).filter(we),data:g,errors:C,warnings:M,touched:P,isValid:J,isValidating:Y,isSubmitting:z,isDirty:U,interacted:Q,config:t,addValidator:S,addTransformer:v,setFields:u,validate:y,reset:E,createSubmitHandler:i,handleSubmit:s})}}l(r.map(q("MOUNT"))),I.noValidate=!!t.validate;const{defaultData:R,defaultTouched:d}=Nr(I);o(I),b(Tn(je(R),a())),u(a()),P.set(d);function m(x){const T=be(x),H=Array.from(I.querySelectorAll(`[name="${x.name}"]`)).filter(X=>we(X)?T===be(X):!1);if(H.length!==0)return H.length===1?g.update(X=>ce(X,be(x),x.checked)):g.update(X=>ce(X,be(x),H.filter(pt).filter(_e=>_e.checked).map(_e=>_e.value)))}function h(x){const T=I.querySelectorAll(`[name="${x.name}"]`),H=Array.from(T).find(X=>pt(X)&&X.checked);g.update(X=>ce(X,be(x),H==null?void 0:H.value))}function _(x){var T;const H=Array.from((T=x.files)!==null&&T!==void 0?T:[]);g.update(X=>ce(X,be(x),x.multiple?H:H[0]))}function A(x){if(!x.multiple)g.update(T=>ce(T,be(x),x.value));else{const T=Array.from(x.options).filter(H=>H.selected).map(H=>H.value);g.update(H=>ce(H,be(x),T))}}function p(x){const T=x.target;if(!T||!we(T)||yt(T)||Qt(T)||["checkbox","radio","file"].includes(T.type)||!T.name)return;U.set(!0);const H=An(T);Q.set(T.name),g.update(X=>ce(X,be(T),H))}function j(x){const T=x.target;if(!(!T||!we(T)||Qt(T))&&T.name)if(f(be(T),!0),Q.set(T.name),(yt(T)||["checkbox","radio","file","hidden"].includes(T.type))&&U.set(!0),T.type==="hidden"&&g.update(H=>ce(H,be(T),T.value)),yt(T))A(T);else if(pt(T))T.type==="checkbox"?m(T):T.type==="radio"?h(T):T.type==="file"&&_(T);else return}function D(x){const T=x.target;!T||!we(T)||Qt(T)||T.name&&(f(be(T),!0),Q.set(T.name))}function N(x){x.preventDefault(),E()}const B={childList:!0,subtree:!0};function ee(x){let T=Je(g),H=Je(P),X=Je(C),_e=Je(M);for(const Te of x.reverse()){if(Te.hasAttribute("data-felte-keep-on-remove")&&Te.dataset.felteKeepOnRemove!=="false")continue;const Ce=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let ve=be(Te);const me=Je(P);if(Ce.test(ve)){const Re=ve.split(".").slice(0,-1).join("."),Ue=We(me,Re);ne(Ue)&&Object.keys(Ue).length<=1&&(ve=Re)}T=At(T,ve),H=At(H,ve),X=At(X,ve),_e=At(_e,ve)}g.set(T),P.set(H),C.set(X),M.set(_e)}const Z=Wt(()=>{c().forEach(H=>{var X;return(X=H.destroy)===null||X===void 0?void 0:X.call(H)}),l(r.map(q("UPDATE")));const{defaultData:x,defaultTouched:T}=Nr(I);g.update(H=>Fr(H,x)),P.update(H=>Fr(H,T)),n.setFields(Je(g))},0);let he=[];const ie=Wt(()=>{c().forEach(x=>{var T;return(T=x.destroy)===null||T===void 0?void 0:T.call(x)}),l(r.map(q("UPDATE"))),ee(he),he=[]},0);function O(x){Array.from(x.addedNodes).some(H=>$r(H)?we(H)?!0:dr(H).length>0:!1)&&Z()}function W(x){for(const T of x.removedNodes){if(!$r(T))continue;const H=dr(T);H.length!==0&&(he.push(...H),ie())}}function w(x){for(const T of x)T.type==="childList"&&(T.addedNodes.length>0&&O(T),T.removedNodes.length>0&&W(T))}const K=new MutationObserver(w);K.observe(I,B),I.addEventListener("input",p),I.addEventListener("change",j),I.addEventListener("focusout",D),I.addEventListener("submit",s),I.addEventListener("reset",N);const fe=C.subscribe(x=>{for(const T of I.elements){if(!we(T)||!T.name)continue;const H=We(x,be(T)),X=Array.isArray(H)?H.join(`
`):typeof H=="string"?H:void 0;X!==T.dataset.felteValidationMessage&&(X?(T.dataset.felteValidationMessage=X,T.setAttribute("aria-invalid","true")):(delete T.dataset.felteValidationMessage,T.removeAttribute("aria-invalid")))}});return{destroy(){K.disconnect(),I.removeEventListener("input",p),I.removeEventListener("change",j),I.removeEventListener("focusout",D),I.removeEventListener("submit",s),I.removeEventListener("reset",N),fe(),c().forEach(x=>{var T;return(T=x.destroy)===null||T===void 0?void 0:T.call(x)})}}}return{form:F}}function yi(n){const e={aborted:!1,priority:n};return{signal:e,abort(){e.aborted=!0}}}function gi(n,e){if(ne(n))return!e||ne(e)&&Object.keys(e).length===0?Pe(n,null):void 0;if(Array.isArray(n)){if(n.some(ne))return;const t=Array.isArray(e)?e:[];return n.map((r,i)=>{const s=t[i];return Array.isArray(s)&&s.length===0?null:r&&s||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?n?e:null:n&&e?[e]:null}function _i(n,e){if(ne(n))return!e||ne(e)&&Object.keys(e).length===0?Pe(n,null):void 0;if(Array.isArray(n)){if(n.some(ne))return;const t=Array.isArray(e)?e:[];return n.map((r,i)=>{const s=t[i];return Array.isArray(s)&&s.length===0?null:s||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?e:e?[e]:null}function bi([n,e]){return tt(e,n,gi)}function wi([n,e]){return tt(e,n,_i)}function Si(n){return function(t,r,i){const s=Array.isArray(t)?t:[t],o=new Array(s.length),a=n(i),l=a.set,c=a.subscribe;let u;function f(){u=s.map((b,S)=>b.subscribe(v=>{o[S]=v,l(r(o))}))}function E(){u==null||u.forEach(b=>b())}return a.subscribe=function(S){const v=c(S);return()=>{v()}},[a,f,E]}}function Ei(n,e){var t,r,i,s,o,a,l,c,u;const f=Si(n),E=e.initialValues=e.initialValues?qe(hr(je(e.initialValues),e.transform)):{},b=ze(Dt(E),!1),S=n(b),v=n(0),[y,g,C]=f([S,v],([de,ae])=>Ct(de,Ie=>!!Ie)&&ae>=1,!1);delete y.set,delete y.update;function M(de){let ae;return async function(Ie,Fe,Ae,nt=!1){if(!Ae||!Ie)return;let Ve=Fe&&Object.keys(Fe).length>0?Fe:Pe(Ie,[]);const it=yi(nt);if((!(ae!=null&&ae.signal.priority)||nt)&&(ae==null||ae.abort(),ae=it),ae.signal.priority&&!nt)return;v.update(Et=>Et+1);const Ir=ci(Ie,Ae);return Ir.forEach(async Et=>{const Nn=await Et;it.signal.aborted||(Ve=vt([Ve,Nn]),de.set(Ve))}),await Promise.all(Ir),ae=void 0,v.update(Et=>Et-1),Ve}}let P=Pe(b,[]);const z=n(E),U=Pe(b,[]),Q=n(U),J=n(je(U)),[Y,F,I]=f([Q,J],vt,je(U)),q=Pe(b,[]),R=n(q),d=n(je(q)),[m,h,_]=f([R,d],vt,je(q)),[A,p,j]=f([Y,S],bi,je(U)),[D,N,B]=f([m,S],wi,je(q));let ee=!1;const[Z,he,ie]=f(Y,([de])=>{var ae;return ee?!Ct(de,Oe=>Array.isArray(Oe)?Oe.length>=1:!!Oe):(ee=!0,!e.validate&&!(!((ae=e.debounced)===null||ae===void 0)&&ae.validate))},!e.validate&&!(!((t=e.debounced)===null||t===void 0)&&t.validate));delete Z.set,delete Z.update;const O=n(!1),W=n(!1),w=n(null),K=M(Q),fe=M(R),x=M(J),T=M(d),H=Wt(x,(o=(i=(r=e.debounced)===null||r===void 0?void 0:r.validateTimeout)!==null&&i!==void 0?i:(s=e.debounced)===null||s===void 0?void 0:s.timeout)!==null&&o!==void 0?o:300,{onInit:()=>{v.update(de=>de+1)},onEnd:()=>{v.update(de=>de-1)}}),X=Wt(T,(u=(l=(a=e.debounced)===null||a===void 0?void 0:a.warnTimeout)!==null&&l!==void 0?l:(c=e.debounced)===null||c===void 0?void 0:c.timeout)!==null&&u!==void 0?u:300);async function _e(de,ae){var Oe;const Ie=Dt(de),Fe=K(Ie,P,ae??e.validate,!0);if(ae)return Fe;const Ae=x(Ie,P,(Oe=e.debounced)===null||Oe===void 0?void 0:Oe.validate,!0);return vt(await Promise.all([Fe,Ae]))}async function Te(de,ae){var Oe;const Ie=Dt(de),Fe=fe(Ie,P,ae??e.warn,!0);if(ae)return Fe;const Ae=T(Ie,P,(Oe=e.debounced)===null||Oe===void 0?void 0:Oe.warn,!0);return vt(await Promise.all([Fe,Ae]))}let Ce=U,ve=q;function me(){const de=z.subscribe(Ae=>{var nt,Ve;const it=Dt(Ae);K(it,P,e.validate),fe(it,P,e.warn),H(it,P,(nt=e.debounced)===null||nt===void 0?void 0:nt.validate),X(it,P,(Ve=e.debounced)===null||Ve===void 0?void 0:Ve.warn)}),ae=S.subscribe(Ae=>{P=Pe(Ae,[])}),Oe=Y.subscribe(Ae=>{Ce=Ae}),Ie=m.subscribe(Ae=>{ve=Ae});F(),he(),h(),p(),N(),g();function Fe(){de(),j(),I(),_(),B(),ie(),C(),ae(),Oe(),Ie()}return Fe}function ke(de){Q.set(de(Ce)),J.set({})}function Re(de){R.set(de(ve)),d.set({})}function Ue(de){ke(()=>de)}function ue(de){Re(()=>de)}return A.set=Ue,A.update=ke,D.set=ue,D.update=Re,{data:z,errors:A,warnings:D,touched:S,isValid:Z,isSubmitting:O,isDirty:W,isValidating:y,interacted:w,validateErrors:_e,validateWarnings:Te,cleanup:e.preventStoreStart?()=>{}:me(),start:me}}function Ti(n,e){var t,r;(t=n.extend)!==null&&t!==void 0||(n.extend=[]),(r=n.debounced)!==null&&r!==void 0||(n.debounced={}),n.validate&&!Array.isArray(n.validate)&&(n.validate=[n.validate]),n.debounced.validate&&!Array.isArray(n.debounced.validate)&&(n.debounced.validate=[n.debounced.validate]),n.transform&&!Array.isArray(n.transform)&&(n.transform=[n.transform]),n.warn&&!Array.isArray(n.warn)&&(n.warn=[n.warn]),n.debounced.warn&&!Array.isArray(n.debounced.warn)&&(n.debounced.warn=[n.debounced.warn]);function i(h,{debounced:_,level:A}={debounced:!1,level:"error"}){var p;const j=A==="error"?"validate":"warn";(p=n.debounced)!==null&&p!==void 0||(n.debounced={});const D=_?n.debounced:n;D[j]?D[j]=[...D[j],h]:D[j]=[h]}function s(h){n.transform?n.transform=[...n.transform,h]:n.transform=[h]}const o=Array.isArray(n.extend)?n.extend:[n.extend];let a=[];const l=()=>a,c=h=>{a=h},{isSubmitting:u,isValidating:f,data:E,errors:b,warnings:S,touched:v,isValid:y,isDirty:g,cleanup:C,start:M,validateErrors:P,validateWarnings:z,interacted:U}=Ei(e.storeFactory,n),Q=E.update,J=E.set,Y=h=>Q(_=>qe(hr(h(_),n.transform))),F=h=>J(qe(hr(h,n.transform)));E.update=Y,E.set=F;const I=mi({extender:o,config:n,addValidator:i,addTransformer:s,validateErrors:P,validateWarnings:z,_getCurrentExtenders:l,stores:{data:E,errors:b,warnings:S,touched:v,isValid:y,isValidating:f,isSubmitting:u,isDirty:g,interacted:U}}),{createSubmitHandler:q,handleSubmit:R}=I.public;a=o.map(h=>h({stage:"SETUP",errors:b,warnings:S,touched:v,data:E,isDirty:g,isValid:y,isValidating:f,isSubmitting:u,interacted:U,config:n,addValidator:i,addTransformer:s,setFields:I.public.setFields,reset:I.public.reset,validate:I.public.validate,handleSubmit:R,createSubmitHandler:q}));const d=Object.assign({config:n,stores:{data:E,touched:v,errors:b,warnings:S,isSubmitting:u,isValidating:f,isValid:y,isDirty:g,interacted:U},createSubmitHandler:q,handleSubmit:R,helpers:Object.assign(Object.assign({},I.public),{addTransformer:s,addValidator:i}),extender:o,_getCurrentExtenders:l,_setCurrentExtenders:c},I.private),{form:m}=pi(d);return Object.assign({data:E,errors:b,warnings:S,touched:v,isValid:y,isSubmitting:u,isValidating:f,isDirty:g,interacted:U,form:m,cleanup:C,startStores:M},I.public)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Oi(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ea(n){const e=Ti(n??{},{storeFactory:wn}),{cleanup:t,startStores:r}=e,i=Oi(e,["cleanup","startStores"]);return Bn(t),i}function ki(n){return n%4===0&&n%100!==0||n%400===0}function Rt(n,e){return[31,ki(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function Hr(n,e){let t="";if(n)for(const r of e)typeof r=="string"?t+=r:t+=r.toString(n);return t}function er(n,e){const t=Rt(n,e),r=[];for(let i=0;i<t;i++)r.push({year:n,month:e,number:i+1});return r}function Ai(n,e){const t=n.getFullYear(),r=n.getMonth(),i=new Date(t,r,1).getDay();let s=[];const o=(i-e+7)%7;if(o>0){let u=r-1,f=t;u===-1&&(u=11,f=t-1),s=er(f,u).slice(-o)}s=s.concat(er(t,r));let a=r+1,l=t;a===12&&(a=0,l=t+1);const c=42-s.length;return s=s.concat(er(l,a).slice(0,c)),s}function Di(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStartsOn:1}}function ji(n={}){const e=Di();return typeof n.weekStartsOn=="number"&&(e.weekStartsOn=n.weekStartsOn),n.months&&(e.months=n.months),n.weekdays&&(e.weekdays=n.weekdays),e}function Yr(n,e,t){const r=n.slice();return r[29]=e[t],r[31]=t,r}function Jr(n,e,t){const r=n.slice();return r[32]=e[t],r}function zr(n,e,t){const r=n.slice();return r[29]=e[t],r[36]=t,r}function Wr(n,e,t){const r=n.slice();return r[37]=e[t],r}function qr(n,e,t){const r=n.slice();return r[37]=e[t],r}function Kr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function Gr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function Vr(n){let e,t=n[42]+"",r,i;return{c(){e=te("option"),r=Ke(t),this.h()},l(s){e=re(s,"OPTION",{});var o=V(e);r=Ge(o,t),o.forEach(L),this.h()},h(){e.disabled=i=new Date(n[8],n[36],Rt(n[8],n[36]),23,59,59,999)<n[1]||new Date(n[8],n[36])>n[2],e.__value=n[36],e.value=e.__value},m(s,o){ge(s,e,o),$(e,r)},p(s,o){o[0]&16&&t!==(t=s[42]+"")&&rt(r,t),o[0]&294&&i!==(i=new Date(s[8],s[36],Rt(s[8],s[36]),23,59,59,999)<s[1]||new Date(s[8],s[36])>s[2])&&(e.disabled=i)},d(s){s&&L(e)}}}function Zr(n){let e,t=n[42]+"",r,i;return{c(){e=te("option"),r=Ke(t),this.h()},l(s){e=re(s,"OPTION",{});var o=V(e);r=Ge(o,t),o.forEach(L),this.h()},h(){e.__value=n[36],e.value=e.__value,e.selected=i=n[36]===n[7]},m(s,o){ge(s,e,o),$(e,r)},p(s,o){o[0]&16&&t!==(t=s[42]+"")&&rt(r,t),o[0]&128&&i!==(i=s[36]===s[7])&&(e.selected=i)},d(s){s&&L(e)}}}function Xr(n){let e,t=n[37]+"",r,i;return{c(){e=te("option"),r=Ke(t),this.h()},l(s){e=re(s,"OPTION",{});var o=V(e);r=Ge(o,t),o.forEach(L),this.h()},h(){e.__value=i=n[37],e.value=e.__value},m(s,o){ge(s,e,o),$(e,r)},p(s,o){o[0]&32&&t!==(t=s[37]+"")&&rt(r,t),o[0]&32&&i!==(i=s[37])&&(e.__value=i,e.value=e.__value)},d(s){s&&L(e)}}}function Qr(n){let e,t=n[37]+"",r,i,s;return{c(){e=te("option"),r=Ke(t),this.h()},l(o){e=re(o,"OPTION",{});var a=V(e);r=Ge(a,t),a.forEach(L),this.h()},h(){e.__value=i=n[37],e.value=e.__value,e.selected=s=n[37]===n[3].getFullYear()},m(o,a){ge(o,e,a),$(e,r)},p(o,a){a[0]&32&&t!==(t=o[37]+"")&&rt(r,t),a[0]&32&&i!==(i=o[37])&&(e.__value=i,e.value=e.__value),a[0]&40&&s!==(s=o[37]===o[3].getFullYear())&&(e.selected=s)},d(o){o&&L(e)}}}function Pi(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]-7]+"",r;return{c(){e=te("div"),r=Ke(t),this.h()},l(i){e=re(i,"DIV",{class:!0});var s=V(e);r=Ge(s,t),s.forEach(L),this.h()},h(){k(e,"class","header-cell svelte-w239uu")},m(i,s){ge(i,e,s),$(e,r)},p(i,s){s[0]&16&&t!==(t=i[4].weekdays[i[4].weekStartsOn+i[36]-7]+"")&&rt(r,t)},d(i){i&&L(e)}}}function Ci(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]]+"",r;return{c(){e=te("div"),r=Ke(t),this.h()},l(i){e=re(i,"DIV",{class:!0});var s=V(e);r=Ge(s,t),s.forEach(L),this.h()},h(){k(e,"class","header-cell svelte-w239uu")},m(i,s){ge(i,e,s),$(e,r)},p(i,s){s[0]&16&&t!==(t=i[4].weekdays[i[4].weekStartsOn+i[36]]+"")&&rt(r,t)},d(i){i&&L(e)}}}function en(n){let e;function t(s,o){return s[36]+s[4].weekStartsOn<7?Ci:Pi}let r=t(n),i=r(n);return{c(){i.c(),e=Mr()},l(s){i.l(s),e=Mr()},m(s,o){i.m(s,o),ge(s,e,o)},p(s,o){r===(r=t(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&L(e)}}}function tn(n){let e,t,r=n[32].number+"",i,s,o;function a(){return n[23](n[32])}return{c(){e=te("div"),t=te("span"),i=Ke(r),this.h()},l(l){e=re(l,"DIV",{class:!0});var c=V(e);t=re(c,"SPAN",{class:!0});var u=V(t);i=Ge(u,r),u.forEach(L),c.forEach(L),this.h()},h(){k(t,"class","svelte-w239uu"),k(e,"class","cell svelte-w239uu"),Le(e,"disabled",!fr(n[32],n[1],n[2])),Le(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),Le(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),Le(e,"other-month",n[32].month!==n[7])},m(l,c){ge(l,e,c),$(e,t),$(t,i),s||(o=Ee(e,"click",a),s=!0)},p(l,c){n=l,c[0]&64&&r!==(r=n[32].number+"")&&rt(i,r),c[0]&70&&Le(e,"disabled",!fr(n[32],n[1],n[2])),c[0]&65&&Le(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),c[0]&576&&Le(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),c[0]&192&&Le(e,"other-month",n[32].month!==n[7])},d(l){l&&L(e),s=!1,o()}}}function rn(n){let e,t,r=n[6].slice(n[31]*7,n[31]*7+7),i=[];for(let s=0;s<r.length;s+=1)i[s]=tn(Jr(n,r,s));return{c(){e=te("div");for(let s=0;s<i.length;s+=1)i[s].c();t=pe(),this.h()},l(s){e=re(s,"DIV",{class:!0});var o=V(e);for(let a=0;a<i.length;a+=1)i[a].l(o);t=ye(o),o.forEach(L),this.h()},h(){k(e,"class","week svelte-w239uu")},m(s,o){ge(s,e,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);$(e,t)},p(s,o){if(o[0]&4807){r=s[6].slice(s[31]*7,s[31]*7+7);let a;for(a=0;a<r.length;a+=1){const l=Jr(s,r,a);i[a]?i[a].p(l,o):(i[a]=tn(l),i[a].c(),i[a].m(e,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=r.length}},d(s){s&&L(e),ot(i,s)}}}function Ri(n){let e,t,r,i,s,o,a,l,c,u,f,E,b,S,v,y,g,C,M,P,z,U,Q,J,Y,F,I,q,R,d,m,h=n[4].months,_=[];for(let O=0;O<h.length;O+=1)_[O]=Vr(Gr(n,h,O));let A=n[4].months,p=[];for(let O=0;O<A.length;O+=1)p[O]=Zr(Kr(n,A,O));let j=n[5],D=[];for(let O=0;O<j.length;O+=1)D[O]=Xr(qr(n,j,O));let N=n[5],B=[];for(let O=0;O<N.length;O+=1)B[O]=Qr(Wr(n,N,O));let ee=Array(7),Z=[];for(let O=0;O<ee.length;O+=1)Z[O]=en(zr(n,ee,O));let he=Array(6),ie=[];for(let O=0;O<he.length;O+=1)ie[O]=rn(Yr(n,he,O));return{c(){e=te("div"),t=te("div"),r=te("div"),i=te("button"),s=Be("svg"),o=Be("path"),a=pe(),l=te("div"),c=te("select");for(let O=0;O<_.length;O+=1)_[O].c();u=pe(),f=te("select");for(let O=0;O<p.length;O+=1)p[O].c();E=pe(),b=Be("svg"),S=Be("path"),v=pe(),y=te("div"),g=te("select");for(let O=0;O<D.length;O+=1)D[O].c();C=pe(),M=te("select");for(let O=0;O<B.length;O+=1)B[O].c();P=pe(),z=Be("svg"),U=Be("path"),Q=pe(),J=te("button"),Y=Be("svg"),F=Be("path"),I=pe(),q=te("div");for(let O=0;O<Z.length;O+=1)Z[O].c();R=pe();for(let O=0;O<ie.length;O+=1)ie[O].c();this.h()},l(O){e=re(O,"DIV",{class:!0,tabindex:!0});var W=V(e);t=re(W,"DIV",{class:!0,tabindex:!0});var w=V(t);r=re(w,"DIV",{class:!0});var K=V(r);i=re(K,"BUTTON",{type:!0,class:!0,tabindex:!0});var fe=V(i);s=He(fe,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var x=V(s);o=He(x,"path",{d:!0,transform:!0}),V(o).forEach(L),x.forEach(L),fe.forEach(L),a=ye(K),l=re(K,"DIV",{class:!0});var T=V(l);c=re(T,"SELECT",{class:!0});var H=V(c);for(let ue=0;ue<_.length;ue+=1)_[ue].l(H);H.forEach(L),u=ye(T),f=re(T,"SELECT",{class:!0,tabindex:!0});var X=V(f);for(let ue=0;ue<p.length;ue+=1)p[ue].l(X);X.forEach(L),E=ye(T),b=He(T,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var _e=V(b);S=He(_e,"path",{d:!0,transform:!0}),V(S).forEach(L),_e.forEach(L),T.forEach(L),v=ye(K),y=re(K,"DIV",{class:!0});var Te=V(y);g=re(Te,"SELECT",{class:!0});var Ce=V(g);for(let ue=0;ue<D.length;ue+=1)D[ue].l(Ce);Ce.forEach(L),C=ye(Te),M=re(Te,"SELECT",{class:!0,tabindex:!0});var ve=V(M);for(let ue=0;ue<B.length;ue+=1)B[ue].l(ve);ve.forEach(L),P=ye(Te),z=He(Te,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var me=V(z);U=He(me,"path",{d:!0,transform:!0}),V(U).forEach(L),me.forEach(L),Te.forEach(L),Q=ye(K),J=re(K,"BUTTON",{type:!0,class:!0,tabindex:!0});var ke=V(J);Y=He(ke,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Re=V(Y);F=He(Re,"path",{d:!0}),V(F).forEach(L),Re.forEach(L),ke.forEach(L),K.forEach(L),I=ye(w),q=re(w,"DIV",{class:!0});var Ue=V(q);for(let ue=0;ue<Z.length;ue+=1)Z[ue].l(Ue);Ue.forEach(L),R=ye(w);for(let ue=0;ue<ie.length;ue+=1)ie[ue].l(w);w.forEach(L),W.forEach(L),this.h()},h(){k(o,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),k(o,"transform","rotate(180, 12, 12)"),k(s,"xmlns","http://www.w3.org/2000/svg"),k(s,"width","24"),k(s,"height","24"),k(s,"viewBox","0 0 24 24"),k(s,"class","svelte-w239uu"),k(i,"type","button"),k(i,"class","page-button svelte-w239uu"),k(i,"tabindex","-1"),k(c,"class","svelte-w239uu"),k(f,"class","dummy-select svelte-w239uu"),k(f,"tabindex","-1"),k(S,"d","M6 0l12 12-12 12z"),k(S,"transform","rotate(90, 12, 12)"),k(b,"xmlns","http://www.w3.org/2000/svg"),k(b,"width","24"),k(b,"height","24"),k(b,"viewBox","0 0 24 24"),k(b,"class","svelte-w239uu"),k(l,"class","dropdown month svelte-w239uu"),k(g,"class","svelte-w239uu"),k(M,"class","dummy-select svelte-w239uu"),k(M,"tabindex","-1"),k(U,"d","M6 0l12 12-12 12z"),k(U,"transform","rotate(90, 12, 12)"),k(z,"xmlns","http://www.w3.org/2000/svg"),k(z,"width","24"),k(z,"height","24"),k(z,"viewBox","0 0 24 24"),k(z,"class","svelte-w239uu"),k(y,"class","dropdown year svelte-w239uu"),k(F,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),k(Y,"xmlns","http://www.w3.org/2000/svg"),k(Y,"width","24"),k(Y,"height","24"),k(Y,"viewBox","0 0 24 24"),k(Y,"class","svelte-w239uu"),k(J,"type","button"),k(J,"class","page-button svelte-w239uu"),k(J,"tabindex","-1"),k(r,"class","top svelte-w239uu"),k(q,"class","header svelte-w239uu"),k(t,"class","tab-container svelte-w239uu"),k(t,"tabindex","-1"),k(e,"class","date-time-picker svelte-w239uu"),k(e,"tabindex","0")},m(O,W){ge(O,e,W),$(e,t),$(t,r),$(r,i),$(i,s),$(s,o),$(r,a),$(r,l),$(l,c);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(c,null);Lt(c,n[7]),$(l,u),$(l,f);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(f,null);$(l,E),$(l,b),$(b,S),$(r,v),$(r,y),$(y,g);for(let w=0;w<D.length;w+=1)D[w]&&D[w].m(g,null);Lt(g,n[8]),$(y,C),$(y,M);for(let w=0;w<B.length;w+=1)B[w]&&B[w].m(M,null);$(y,P),$(y,z),$(z,U),$(r,Q),$(r,J),$(J,Y),$(Y,F),$(t,I),$(t,q);for(let w=0;w<Z.length;w+=1)Z[w]&&Z[w].m(q,null);$(t,R);for(let w=0;w<ie.length;w+=1)ie[w]&&ie[w].m(t,null);d||(m=[Ee(i,"click",n[19]),Ee(c,"keydown",n[14]),Ee(c,"input",n[20]),Ee(g,"input",n[21]),Ee(g,"keydown",n[13]),Ee(J,"click",n[22]),Ee(e,"focusout",n[18]),Ee(e,"keydown",n[15])],d=!0)},p(O,W){if(W[0]&278){h=O[4].months;let w;for(w=0;w<h.length;w+=1){const K=Gr(O,h,w);_[w]?_[w].p(K,W):(_[w]=Vr(K),_[w].c(),_[w].m(c,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=h.length}if(W[0]&128&&Lt(c,O[7]),W[0]&144){A=O[4].months;let w;for(w=0;w<A.length;w+=1){const K=Kr(O,A,w);p[w]?p[w].p(K,W):(p[w]=Zr(K),p[w].c(),p[w].m(f,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=A.length}if(W[0]&32){j=O[5];let w;for(w=0;w<j.length;w+=1){const K=qr(O,j,w);D[w]?D[w].p(K,W):(D[w]=Xr(K),D[w].c(),D[w].m(g,null))}for(;w<D.length;w+=1)D[w].d(1);D.length=j.length}if(W[0]&288&&Lt(g,O[8]),W[0]&40){N=O[5];let w;for(w=0;w<N.length;w+=1){const K=Wr(O,N,w);B[w]?B[w].p(K,W):(B[w]=Qr(K),B[w].c(),B[w].m(M,null))}for(;w<B.length;w+=1)B[w].d(1);B.length=N.length}if(W[0]&16){ee=Array(7);let w;for(w=0;w<ee.length;w+=1){const K=zr(O,ee,w);Z[w]?Z[w].p(K,W):(Z[w]=en(K),Z[w].c(),Z[w].m(q,null))}for(;w<Z.length;w+=1)Z[w].d(1);Z.length=ee.length}if(W[0]&4807){he=Array(6);let w;for(w=0;w<he.length;w+=1){const K=Yr(O,he,w);ie[w]?ie[w].p(K,W):(ie[w]=rn(K),ie[w].c(),ie[w].m(t,null))}for(;w<ie.length;w+=1)ie[w].d(1);ie.length=he.length}},i:Jt,o:Jt,d(O){O&&L(e),ot(_,O),ot(p,O),ot(D,O),ot(B,O),ot(Z,O),ot(ie,O),d=!1,_r(m)}}}function ut(n){return new Date(n.getTime())}function tr(n,e,t){return n>t?ut(t):n<e?ut(e):ut(n)}function nn(n,e){let t=[];for(let r=n.getFullYear();r<=e.getFullYear();r++)t.push(r);return t}function fr(n,e,t){const r=new Date(n.year,n.month,n.number),i=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r>=i&&r<=s}function Ii(n,e,t){let r,i,s,o;const a=Sn();let{value:l=null}=e;function c(h){h.getTime()!==(l==null?void 0:l.getTime())&&(t(3,v=tr(h,b,S)),t(0,l=ut(v)))}function u(h){t(3,v=tr(h,b,S)),!C&&l&&c(v)}const f=new Date,E=new Date;let{min:b=new Date(E.getFullYear()-20,0,1)}=e,{max:S=new Date(E.getFullYear(),11,31,23,59,59,999)}=e,v=ut(l||tr(E,b,S)),y=nn(b,S),{locale:g={}}=e,{browseWithoutSelecting:C=!1}=e;function M(h){v.setFullYear(h),u(v)}function P(h){let _=v.getFullYear();h===12?(h=0,_++):h===-1&&(h=11,_--);const A=Rt(_,h),p=Math.min(v.getDate(),A);u(new Date(_,h,p,v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()))}function z(h){fr(h,b,S)&&(v.setFullYear(0),v.setMonth(0),v.setDate(1),v.setFullYear(h.year),v.setMonth(h.month),v.setDate(h.number),c(v),a("select"))}function U(h){if(h.shiftKey&&h.key==="ArrowUp")M(v.getFullYear()-1);else if(h.shiftKey&&h.key==="ArrowDown")M(v.getFullYear()+1);else if(h.shiftKey&&h.key==="ArrowLeft")P(v.getMonth()-1);else if(h.shiftKey&&h.key==="ArrowRight")P(v.getMonth()+1);else return!1;return h.preventDefault(),!0}function Q(h){if(h.shiftKey||h.altKey){U(h);return}else if(h.key==="ArrowUp")M(v.getFullYear()-1);else if(h.key==="ArrowDown")M(v.getFullYear()+1);else if(h.key==="ArrowLeft")P(v.getMonth()-1);else if(h.key==="ArrowRight")P(v.getMonth()+1);else{U(h);return}h.preventDefault()}function J(h){if(h.shiftKey||h.altKey){U(h);return}else if(h.key==="ArrowUp"||h.key==="ArrowLeft")P(v.getMonth()-1);else if(h.key==="ArrowDown"||h.key==="ArrowRight")P(v.getMonth()+1);else{U(h);return}h.preventDefault()}function Y(h){var A;let _=h.shiftKey||h.altKey;if(((A=h.target)==null?void 0:A.tagName)!=="SELECT"){if(_){U(h);return}else if(h.key==="ArrowUp")v.setDate(v.getDate()-7),c(v);else if(h.key==="ArrowDown")v.setDate(v.getDate()+7),c(v);else if(h.key==="ArrowLeft")v.setDate(v.getDate()-1),c(v);else if(h.key==="ArrowRight")v.setDate(v.getDate()+1),c(v);else if(h.key==="Enter")c(v),a("select");else return;h.preventDefault()}}function F(h){Hn.call(this,n,h)}const I=()=>P(v.getMonth()-1),q=h=>P(parseInt(h.currentTarget.value)),R=h=>M(parseInt(h.currentTarget.value)),d=()=>P(v.getMonth()+1),m=h=>z(h);return n.$$set=h=>{"value"in h&&t(0,l=h.value),"min"in h&&t(1,b=h.min),"max"in h&&t(2,S=h.max),"locale"in h&&t(16,g=h.locale),"browseWithoutSelecting"in h&&t(17,C=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty[0]&7&&(l&&l>S?c(S):l&&l<b&&c(b)),n.$$.dirty[0]&131081&&v.getTime()!==(l==null?void 0:l.getTime())&&!C&&t(3,v=l?ut(l):v),n.$$.dirty[0]&6&&t(5,y=nn(b,S)),n.$$.dirty[0]&65536&&t(4,r=ji(g)),n.$$.dirty[0]&8&&t(8,i=v.getFullYear()),n.$$.dirty[0]&8&&t(7,s=v.getMonth()),n.$$.dirty[0]&24&&t(6,o=Ai(v,r.weekStartsOn))},[l,b,S,v,r,y,o,s,i,f,M,P,z,Q,J,Y,g,C,F,I,q,R,d,m]}class Mi extends _t{constructor(e){super(),bt(this,e,Ii,Ri,wt,{value:0,min:1,max:2,locale:16,browseWithoutSelecting:17},null,[-1,-1])}}function sn(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}function xi(n){const e=n-1;return e*e*e+1}function on(n,{delay:e=0,duration:t=400,easing:r=Yn}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*i}`}}function an(n,{delay:e=0,duration:t=400,easing:r=xi,x:i=0,y:s=0,opacity:o=0}={}){const a=getComputedStyle(n),l=+a.opacity,c=a.transform==="none"?"":a.transform,u=l*(1-o),[f,E]=xr(i),[b,S]=xr(s);return{delay:e,duration:t,easing:r,css:(v,y)=>`
			transform: ${c} translate(${(1-v)*f}${E}, ${(1-v)*b}${S});
			opacity: ${l-u*y}`}}function ln(n,e,t){let r="",i=!0;t=t||new Date(2020,0,1,0,0,0,0);let s=t.getFullYear(),o=t.getMonth(),a=t.getDate(),l=t.getHours(),c=t.getMinutes(),u=t.getSeconds();const f=t.getMilliseconds();function E(y){for(let g=0;g<y.length;g++)if(n.startsWith(y[g]))n=n.slice(1);else{i=!1,n.length===0&&(r=y.slice(g));return}}function b(y,g,C){const M=n.match(y);if(M!=null&&M[0]){n=n.slice(M[0].length);const P=parseInt(M[0]);return P>C||P<g?(i=!1,null):P}else return i=!1,null}function S(y){if(typeof y=="string")E(y);else if(y.id==="yyyy"){const g=b(/^[0-9]{4}/,0,9999);g!==null&&(s=g)}else if(y.id==="MM"){const g=b(/^[0-9]{2}/,1,12);g!==null&&(o=g-1)}else if(y.id==="dd"){const g=b(/^[0-9]{2}/,1,31);g!==null&&(a=g)}else if(y.id==="HH"){const g=b(/^[0-9]{2}/,0,23);g!==null&&(l=g)}else if(y.id==="mm"){const g=b(/^[0-9]{2}/,0,59);g!==null&&(c=g)}else if(y.id==="ss"){const g=b(/^[0-9]{2}/,0,59);g!==null&&(u=g)}}for(const y of e)if(S(y),!i)break;const v=Rt(s,o);return a>v&&(i=!1),{date:i?new Date(s,o,a,l,c,u,f):null,missingPunctuation:r}}function Tt(n){return("0"+n.toString()).slice(-2)}const Li=[{id:"yyyy",toString:n=>n.getFullYear().toString()},{id:"MM",toString:n=>Tt(n.getMonth()+1)},{id:"dd",toString:n=>Tt(n.getDate())},{id:"HH",toString:n=>Tt(n.getHours())},{id:"mm",toString:n=>Tt(n.getMinutes())},{id:"ss",toString:n=>Tt(n.getSeconds())}];function Ui(n){for(const e of Li)if(n.startsWith(e.id))return e}function cn(n){const e=[];for(;n.length>0;){const t=Ui(n);t?(e.push(t),n=n.slice(t.id.length)):typeof e[e.length-1]=="string"?(e[e.length-1]+=n[0],n=n.slice(1)):(e.push(n[0]),n=n.slice(1))}return e}function un(n){let e,t,r,i,s;function o(l){n[23](l)}let a={min:n[3],max:n[4],locale:n[8],browseWithoutSelecting:n[9]};return n[11]!==void 0&&(a.value=n[11]),t=new Mi({props:a}),Wn.push(()=>qn(t,"value",o)),t.$on("focusout",n[14]),t.$on("select",n[16]),{c(){e=te("div"),Kn(t.$$.fragment),this.h()},l(l){e=re(l,"DIV",{class:!0});var c=V(e);Gn(t.$$.fragment,c),c.forEach(L),this.h()},h(){k(e,"class","picker svelte-1bsxr9h"),Le(e,"visible",n[2])},m(l,c){ge(l,e,c),Vn(t,e,null),s=!0},p(l,c){n=l;const u={};c&8&&(u.min=n[3]),c&16&&(u.max=n[4]),c&256&&(u.locale=n[8]),c&512&&(u.browseWithoutSelecting=n[9]),!r&&c&2048&&(r=!0,u.value=n[11],Zn(()=>r=!1)),t.$set(u),(!s||c&4)&&Le(e,"visible",n[2])},i(l){s||(ht(t.$$.fragment,l),En(()=>{s&&(i||(i=zt(e,an,{duration:80,easing:sn,y:-5},!0)),i.run(1))}),s=!0)},o(l){gt(t.$$.fragment,l),i||(i=zt(e,an,{duration:80,easing:sn,y:-5},!1)),i.run(0),s=!1},d(l){l&&L(e),Xn(t),l&&i&&i.end()}}}function Fi(n){let e,t,r,i,s,o,a,l=n[2]&&!n[6]&&un(n);return{c(){e=te("div"),t=te("input"),r=pe(),l&&l.c(),this.h()},l(c){e=re(c,"DIV",{class:!0});var u=V(e);t=re(u,"INPUT",{type:!0,placeholder:!0,class:!0}),r=ye(u),l&&l.l(u),u.forEach(L),this.h()},h(){k(t,"type","text"),t.value=n[0],k(t,"placeholder",n[5]),t.disabled=n[6],k(t,"class","svelte-1bsxr9h"),Le(t,"invalid",!n[1]),k(e,"class",i="date-time-field "+n[7]+" svelte-1bsxr9h")},m(c,u){ge(c,e,u),$(e,t),$(e,r),l&&l.m(e,null),s=!0,o||(a=[Ee(t,"focus",n[20]),Ee(t,"mousedown",n[21]),Ee(t,"input",n[22]),Ee(e,"focusout",n[14]),Ee(e,"keydown",n[15])],o=!0)},p(c,[u]){(!s||u&1&&t.value!==c[0])&&(t.value=c[0]),(!s||u&32)&&k(t,"placeholder",c[5]),(!s||u&64)&&(t.disabled=c[6]),(!s||u&2)&&Le(t,"invalid",!c[1]),c[2]&&!c[6]?l?(l.p(c,u),u&68&&ht(l,1)):(l=un(c),l.c(),ht(l,1),l.m(e,null)):l&&(Jn(),gt(l,1,1,()=>{l=null}),zn()),(!s||u&128&&i!==(i="date-time-field "+c[7]+" svelte-1bsxr9h"))&&k(e,"class",i)},i(c){s||(ht(l),s=!0)},o(c){gt(l),s=!1},d(c){c&&L(e),l&&l.d(),o=!1,_r(a)}}}function $i(n,e,t){let r,i;const s=Sn(),o=new Date,a=wn(null);Lr(n,a,h=>t(24,i=h));const l=(()=>({subscribe:a.subscribe,set:h=>{h===null?(a.set(null),t(17,c=h)):h.getTime()!==(i==null?void 0:i.getTime())&&(a.set(h),t(17,c=h))}}))();Lr(n,l,h=>t(11,r=h));let{value:c=null}=e,{min:u=new Date(o.getFullYear()-20,0,1)}=e,{max:f=new Date(o.getFullYear(),11,31,23,59,59,999)}=e,{placeholder:E="2020-12-31 23:00:00"}=e,{valid:b=!0}=e,{disabled:S=!1}=e,{class:v=""}=e,{format:y="yyyy-MM-dd HH:mm:ss"}=e,g=cn(y),{locale:C={}}=e;function M(h,_){t(0,P=Hr(h,_))}let{text:P=Hr(r,g)}=e;function z(h,_){if(h.length){const A=ln(h,_,r);A.date!==null?(t(1,b=!0),l.set(A.date)):t(1,b=!1)}else t(1,b=!0),c&&(t(17,c=null),l.set(null))}let{visible:U=!1}=e,{closeOnSelection:Q=!1}=e,{browseWithoutSelecting:J=!1}=e;function Y(h){(h==null?void 0:h.currentTarget)instanceof HTMLElement&&h.relatedTarget&&h.relatedTarget instanceof Node&&h.currentTarget.contains(h.relatedTarget)||t(2,U=!1)}function F(h){h.key==="Escape"&&U?(t(2,U=!1),h.preventDefault(),h.stopPropagation()):h.key==="Enter"&&(t(2,U=!U),h.preventDefault())}function I(h){s("select",h.detail),Q&&t(2,U=!1)}const q=()=>t(2,U=!0),R=()=>t(2,U=!0),d=h=>{if(h instanceof InputEvent&&h.inputType==="insertText"&&typeof h.data=="string"&&h.currentTarget.value===P+h.data){let _=ln(P,g,r);if(_.missingPunctuation!==""&&!_.missingPunctuation.startsWith(h.data)){t(0,P=P+_.missingPunctuation+h.data);return}}t(0,P=h.currentTarget.value)};function m(h){r=h,l.set(r)}return n.$$set=h=>{"value"in h&&t(17,c=h.value),"min"in h&&t(3,u=h.min),"max"in h&&t(4,f=h.max),"placeholder"in h&&t(5,E=h.placeholder),"valid"in h&&t(1,b=h.valid),"disabled"in h&&t(6,S=h.disabled),"class"in h&&t(7,v=h.class),"format"in h&&t(18,y=h.format),"locale"in h&&t(8,C=h.locale),"text"in h&&t(0,P=h.text),"visible"in h&&t(2,U=h.visible),"closeOnSelection"in h&&t(19,Q=h.closeOnSelection),"browseWithoutSelecting"in h&&t(9,J=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty&131072&&l.set(c),n.$$.dirty&262144&&t(10,g=cn(y)),n.$$.dirty&3072&&M(r,g),n.$$.dirty&1025&&z(P,g)},[P,b,U,u,f,E,S,v,C,J,g,r,a,l,Y,F,I,c,y,Q,q,R,d,m]}class ta extends _t{constructor(e){super(),bt(this,e,$i,Fi,wt,{value:17,min:3,max:4,placeholder:5,valid:1,disabled:6,class:7,format:18,locale:8,text:0,visible:2,closeOnSelection:19,browseWithoutSelecting:9})}}var jn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Tr,function(){var t=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",f="month",E="quarter",b="year",S="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var d=["th","st","nd","rd"],m=R%100;return"["+R+(d[(m-20)%10]||d[m]||d[0])+"]"}},M=function(R,d,m){var h=String(R);return!h||h.length>=d?R:""+Array(d+1-h.length).join(m)+R},P={s:M,z:function(R){var d=-R.utcOffset(),m=Math.abs(d),h=Math.floor(m/60),_=m%60;return(d<=0?"+":"-")+M(h,2,"0")+":"+M(_,2,"0")},m:function R(d,m){if(d.date()<m.date())return-R(m,d);var h=12*(m.year()-d.year())+(m.month()-d.month()),_=d.clone().add(h,f),A=m-_<0,p=d.clone().add(h+(A?-1:1),f);return+(-(h+(m-_)/(A?_-p:p-_))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:f,y:b,w:u,d:c,D:S,h:l,m:a,s:o,ms:s,Q:E}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},z="en",U={};U[z]=C;var Q=function(R){return R instanceof I},J=function R(d,m,h){var _;if(!d)return z;if(typeof d=="string"){var A=d.toLowerCase();U[A]&&(_=A),m&&(U[A]=m,_=A);var p=d.split("-");if(!_&&p.length>1)return R(p[0])}else{var j=d.name;U[j]=d,_=j}return!h&&_&&(z=_),_||!h&&z},Y=function(R,d){if(Q(R))return R.clone();var m=typeof d=="object"?d:{};return m.date=R,m.args=arguments,new I(m)},F=P;F.l=J,F.i=Q,F.w=function(R,d){return Y(R,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var I=function(){function R(m){this.$L=J(m.locale,null,!0),this.parse(m)}var d=R.prototype;return d.parse=function(m){this.$d=function(h){var _=h.date,A=h.utc;if(_===null)return new Date(NaN);if(F.u(_))return new Date;if(_ instanceof Date)return new Date(_);if(typeof _=="string"&&!/Z$/i.test(_)){var p=_.match(y);if(p){var j=p[2]-1||0,D=(p[7]||"0").substring(0,3);return A?new Date(Date.UTC(p[1],j,p[3]||1,p[4]||0,p[5]||0,p[6]||0,D)):new Date(p[1],j,p[3]||1,p[4]||0,p[5]||0,p[6]||0,D)}}return new Date(_)}(m),this.$x=m.x||{},this.init()},d.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},d.$utils=function(){return F},d.isValid=function(){return this.$d.toString()!==v},d.isSame=function(m,h){var _=Y(m);return this.startOf(h)<=_&&_<=this.endOf(h)},d.isAfter=function(m,h){return Y(m)<this.startOf(h)},d.isBefore=function(m,h){return this.endOf(h)<Y(m)},d.$g=function(m,h,_){return F.u(m)?this[h]:this.set(_,m)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(m,h){var _=this,A=!!F.u(h)||h,p=F.p(m),j=function(O,W){var w=F.w(_.$u?Date.UTC(_.$y,W,O):new Date(_.$y,W,O),_);return A?w:w.endOf(c)},D=function(O,W){return F.w(_.toDate()[O].apply(_.toDate("s"),(A?[0,0,0,0]:[23,59,59,999]).slice(W)),_)},N=this.$W,B=this.$M,ee=this.$D,Z="set"+(this.$u?"UTC":"");switch(p){case b:return A?j(1,0):j(31,11);case f:return A?j(1,B):j(0,B+1);case u:var he=this.$locale().weekStart||0,ie=(N<he?N+7:N)-he;return j(A?ee-ie:ee+(6-ie),B);case c:case S:return D(Z+"Hours",0);case l:return D(Z+"Minutes",1);case a:return D(Z+"Seconds",2);case o:return D(Z+"Milliseconds",3);default:return this.clone()}},d.endOf=function(m){return this.startOf(m,!1)},d.$set=function(m,h){var _,A=F.p(m),p="set"+(this.$u?"UTC":""),j=(_={},_[c]=p+"Date",_[S]=p+"Date",_[f]=p+"Month",_[b]=p+"FullYear",_[l]=p+"Hours",_[a]=p+"Minutes",_[o]=p+"Seconds",_[s]=p+"Milliseconds",_)[A],D=A===c?this.$D+(h-this.$W):h;if(A===f||A===b){var N=this.clone().set(S,1);N.$d[j](D),N.init(),this.$d=N.set(S,Math.min(this.$D,N.daysInMonth())).$d}else j&&this.$d[j](D);return this.init(),this},d.set=function(m,h){return this.clone().$set(m,h)},d.get=function(m){return this[F.p(m)]()},d.add=function(m,h){var _,A=this;m=Number(m);var p=F.p(h),j=function(B){var ee=Y(A);return F.w(ee.date(ee.date()+Math.round(B*m)),A)};if(p===f)return this.set(f,this.$M+m);if(p===b)return this.set(b,this.$y+m);if(p===c)return j(1);if(p===u)return j(7);var D=(_={},_[a]=r,_[l]=i,_[o]=t,_)[p]||1,N=this.$d.getTime()+m*D;return F.w(N,this)},d.subtract=function(m,h){return this.add(-1*m,h)},d.format=function(m){var h=this,_=this.$locale();if(!this.isValid())return _.invalidDate||v;var A=m||"YYYY-MM-DDTHH:mm:ssZ",p=F.z(this),j=this.$H,D=this.$m,N=this.$M,B=_.weekdays,ee=_.months,Z=function(W,w,K,fe){return W&&(W[w]||W(h,A))||K[w].slice(0,fe)},he=function(W){return F.s(j%12||12,W,"0")},ie=_.meridiem||function(W,w,K){var fe=W<12?"AM":"PM";return K?fe.toLowerCase():fe},O={YY:String(this.$y).slice(-2),YYYY:this.$y,M:N+1,MM:F.s(N+1,2,"0"),MMM:Z(_.monthsShort,N,ee,3),MMMM:Z(ee,N),D:this.$D,DD:F.s(this.$D,2,"0"),d:String(this.$W),dd:Z(_.weekdaysMin,this.$W,B,2),ddd:Z(_.weekdaysShort,this.$W,B,3),dddd:B[this.$W],H:String(j),HH:F.s(j,2,"0"),h:he(1),hh:he(2),a:ie(j,D,!0),A:ie(j,D,!1),m:String(D),mm:F.s(D,2,"0"),s:String(this.$s),ss:F.s(this.$s,2,"0"),SSS:F.s(this.$ms,3,"0"),Z:p};return A.replace(g,function(W,w){return w||O[W]||p.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(m,h,_){var A,p=F.p(h),j=Y(m),D=(j.utcOffset()-this.utcOffset())*r,N=this-j,B=F.m(this,j);return B=(A={},A[b]=B/12,A[f]=B,A[E]=B/3,A[u]=(N-D)/6048e5,A[c]=(N-D)/864e5,A[l]=N/i,A[a]=N/r,A[o]=N/t,A)[p]||N,_?B:F.a(B)},d.daysInMonth=function(){return this.endOf(f).$D},d.$locale=function(){return U[this.$L]},d.locale=function(m,h){if(!m)return this.$L;var _=this.clone(),A=J(m,h,!0);return A&&(_.$L=A),_},d.clone=function(){return F.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},R}(),q=I.prototype;return Y.prototype=q,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",f],["$y",b],["$D",S]].forEach(function(R){q[R[1]]=function(d){return this.$g(d,R[0],R[1])}}),Y.extend=function(R,d){return R.$i||(R(d,I,Y),R.$i=!0),Y},Y.locale=J,Y.isDayjs=Q,Y.unix=function(R){return Y(1e3*R)},Y.en=U[z],Y.Ls=U,Y.p={},Y})})(jn);var Ni=jn.exports;const Bi=Or(Ni);function Hi(n){let e,t,r,i,s,o,a,l,c,u,f;const E=n[3].default,b=br(E,n,n[2],null);return{c(){e=te("div"),t=te("picture"),r=te("source"),i=pe(),s=te("source"),o=pe(),a=te("img"),u=pe(),b&&b.c(),this.h()},l(S){e=re(S,"DIV",{class:!0,grid:!0});var v=V(e);t=re(v,"PICTURE",{class:!0});var y=V(t);r=re(y,"SOURCE",{media:!0,srcset:!0}),i=ye(y),s=re(y,"SOURCE",{media:!0,srcset:!0}),o=ye(y),a=re(y,"IMG",{src:!0,alt:!0,style:!0,class:!0}),y.forEach(L),u=ye(v),b&&b.l(v),v.forEach(L),this.h()},h(){k(r,"media","(min-width:650px)"),k(r,"srcset",n[0]),k(s,"media","(min-width:465px)"),k(s,"srcset",n[0]),Ur(a.src,l=n[0])||k(a,"src",l),k(a,"alt","Flowers"),ur(a,"width","auto"),k(a,"class","h-screen"),k(t,"class",c=n[1]?"order-1 justify-self-end max-w-max row-start-1 row-end-2":"max-w-max row-start-1 row-end-2"),k(e,"class","grid gap-4 h-screen w-screen"),k(e,"grid","cols-[max-content_1fr] rows-[40vh_60vh]")},m(S,v){ge(S,e,v),$(e,t),$(t,r),$(t,i),$(t,s),$(t,o),$(t,a),$(e,u),b&&b.m(e,null),f=!0},p(S,[v]){(!f||v&1)&&k(r,"srcset",S[0]),(!f||v&1)&&k(s,"srcset",S[0]),(!f||v&1&&!Ur(a.src,l=S[0]))&&k(a,"src",l),(!f||v&2&&c!==(c=S[1]?"order-1 justify-self-end max-w-max row-start-1 row-end-2":"max-w-max row-start-1 row-end-2"))&&k(t,"class",c),b&&b.p&&(!f||v&4)&&wr(b,E,S,S[2],f?Er(E,S[2],v,null):Sr(S[2]),null)},i(S){f||(ht(b,S),f=!0)},o(S){gt(b,S),f=!1},d(S){S&&L(e),b&&b.d(S)}}}function Yi(n,e,t){let{$$slots:r={},$$scope:i}=e,{pictureName:s,reverse:o}=e;return n.$$set=a=>{"pictureName"in a&&t(0,s=a.pictureName),"reverse"in a&&t(1,o=a.reverse),"$$scope"in a&&t(2,i=a.$$scope)},[s,o,i,r]}class ra extends _t{constructor(e){super(),bt(this,e,Yi,Hi,wt,{pictureName:0,reverse:1})}}var Pn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Tr,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(v){return(v=+v)+(v>68?1900:2e3)},c=function(v){return function(y){this[v]=+y}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var g=y.match(/([+-]|\d\d)/g),C=60*g[1]+(+g[2]||0);return C===0?0:g[0]==="+"?-C:C}(v)}],f=function(v){var y=a[v];return y&&(y.indexOf?y:y.s.concat(y.f))},E=function(v,y){var g,C=a.meridiem;if(C){for(var M=1;M<=24;M+=1)if(v.indexOf(C(M,0,y))>-1){g=M>12;break}}else g=v===(y?"pm":"PM");return g},b={A:[o,function(v){this.afternoon=E(v,!1)}],a:[o,function(v){this.afternoon=E(v,!0)}],S:[/\d/,function(v){this.milliseconds=100*+v}],SS:[i,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[i,c("day")],Do:[o,function(v){var y=a.ordinal,g=v.match(/\d+/);if(this.day=g[0],y)for(var C=1;C<=31;C+=1)y(C).replace(/\[|\]/g,"")===v&&(this.day=C)}],M:[s,c("month")],MM:[i,c("month")],MMM:[o,function(v){var y=f("months"),g=(f("monthsShort")||y.map(function(C){return C.slice(0,3)})).indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[o,function(v){var y=f("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[i,function(v){this.year=l(v)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function S(v){var y,g;y=v,g=a&&a.formats;for(var C=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Y,F,I){var q=I&&I.toUpperCase();return F||g[I]||t[I]||g[q].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,d,m){return d||m.slice(1)})})).match(r),M=C.length,P=0;P<M;P+=1){var z=C[P],U=b[z],Q=U&&U[0],J=U&&U[1];C[P]=J?{regex:Q,parser:J}:z.replace(/^\[|\]$/g,"")}return function(Y){for(var F={},I=0,q=0;I<M;I+=1){var R=C[I];if(typeof R=="string")q+=R.length;else{var d=R.regex,m=R.parser,h=Y.slice(q),_=d.exec(h)[0];m.call(F,_),Y=Y.replace(_,"")}}return function(A){var p=A.afternoon;if(p!==void 0){var j=A.hours;p?j<12&&(A.hours+=12):j===12&&(A.hours=0),delete A.afternoon}}(F),F}}return function(v,y,g){g.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(l=v.parseTwoDigitYear);var C=y.prototype,M=C.parse;C.parse=function(P){var z=P.date,U=P.utc,Q=P.args;this.$u=U;var J=Q[1];if(typeof J=="string"){var Y=Q[2]===!0,F=Q[3]===!0,I=Y||F,q=Q[2];F&&(q=Q[2]),a=this.$locale(),!Y&&q&&(a=g.Ls[q]),this.$d=function(h,_,A){try{if(["x","X"].indexOf(_)>-1)return new Date((_==="X"?1e3:1)*h);var p=S(_)(h),j=p.year,D=p.month,N=p.day,B=p.hours,ee=p.minutes,Z=p.seconds,he=p.milliseconds,ie=p.zone,O=new Date,W=N||(j||D?1:O.getDate()),w=j||O.getFullYear(),K=0;j&&!D||(K=D>0?D-1:O.getMonth());var fe=B||0,x=ee||0,T=Z||0,H=he||0;return ie?new Date(Date.UTC(w,K,W,fe,x,T,H+60*ie.offset*1e3)):A?new Date(Date.UTC(w,K,W,fe,x,T,H)):new Date(w,K,W,fe,x,T,H)}catch{return new Date("")}}(z,J,U),this.init(),q&&q!==!0&&(this.$L=this.locale(q).$L),I&&z!=this.format(J)&&(this.$d=new Date("")),a={}}else if(J instanceof Array)for(var R=J.length,d=1;d<=R;d+=1){Q[1]=J[d-1];var m=g.apply(this,Q);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}d===R&&(this.$d=new Date(""))}else M.call(this,P)}}})})(Pn);var Ji=Pn.exports;const zi=Or(Ji);function Wi(n){let e,t,r,i,s;const o=n[4].default,a=br(o,n,n[3],null);return{c(){e=te("div"),t=te("h3"),r=Ke(n[0]),i=pe(),a&&a.c(),this.h()},l(l){e=re(l,"DIV",{class:!0,style:!0});var c=V(e);t=re(c,"H3",{class:!0});var u=V(t);r=Ge(u,n[0]),u.forEach(L),i=ye(c),a&&a.l(c),c.forEach(L),this.h()},h(){k(t,"class","text-lg"),k(e,"class","card max-h-[20rem] mr-16 group flex gap-4 items-center justify-between svelte-u0mhei"),ur(e,"order",n[1]-n[2])},m(l,c){ge(l,e,c),$(e,t),$(t,r),$(e,i),a&&a.m(e,null),s=!0},p(l,[c]){(!s||c&1)&&rt(r,l[0]),a&&a.p&&(!s||c&8)&&wr(a,o,l,l[3],s?Er(o,l[3],c,null):Sr(l[3]),null),(!s||c&6)&&ur(e,"order",l[1]-l[2])},i(l){s||(ht(a,l),s=!0)},o(l){gt(a,l),s=!1},d(l){l&&L(e),a&&a.d(l)}}}function qi(n,e,t){let{$$slots:r={},$$scope:i}=e;Bi.extend(zi);let{created_at:s,dates_length:o,order:a}=e;return n.$$set=l=>{"created_at"in l&&t(0,s=l.created_at),"dates_length"in l&&t(1,o=l.dates_length),"order"in l&&t(2,a=l.order),"$$scope"in l&&t(3,i=l.$$scope)},[s,o,a,i,r]}class na extends _t{constructor(e){super(),bt(this,e,qi,Wi,wt,{created_at:0,dates_length:1,order:2})}}var Ki=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Gi=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ki(void 0,void 0,void 0,function*(){return yield(yield qt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class kr extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class Vi extends kr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zi extends kr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Xi extends kr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qi=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class es{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Gi(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Qi(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(b=>{throw new Vi(b)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Zi(c);if(!c.ok)throw new Xi(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),E;return f==="application/json"?E=yield c.json():f==="application/octet-stream"?E=yield c.blob():f==="multipart/form-data"?E=yield c.formData():E=yield c.text(),{data:E,error:null}}catch(i){return{data:null,error:i}}})}}var vr={exports:{}};(function(n,e){var t=typeof self<"u"?self:Tr,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(d){return d&&c.indexOf(Object.prototype.toString.call(d))>-1};function f(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function E(d){return typeof d!="string"&&(d=String(d)),d}function b(d){var m={next:function(){var h=d.shift();return{done:h===void 0,value:h}}};return a.iterable&&(m[Symbol.iterator]=function(){return m}),m}function S(d){this.map={},d instanceof S?d.forEach(function(m,h){this.append(h,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}S.prototype.append=function(d,m){d=f(d),m=E(m);var h=this.map[d];this.map[d]=h?h+", "+m:m},S.prototype.delete=function(d){delete this.map[f(d)]},S.prototype.get=function(d){return d=f(d),this.has(d)?this.map[d]:null},S.prototype.has=function(d){return this.map.hasOwnProperty(f(d))},S.prototype.set=function(d,m){this.map[f(d)]=E(m)},S.prototype.forEach=function(d,m){for(var h in this.map)this.map.hasOwnProperty(h)&&d.call(m,this.map[h],h,this)},S.prototype.keys=function(){var d=[];return this.forEach(function(m,h){d.push(h)}),b(d)},S.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),b(d)},S.prototype.entries=function(){var d=[];return this.forEach(function(m,h){d.push([h,m])}),b(d)},a.iterable&&(S.prototype[Symbol.iterator]=S.prototype.entries);function v(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function y(d){return new Promise(function(m,h){d.onload=function(){m(d.result)},d.onerror=function(){h(d.error)}})}function g(d){var m=new FileReader,h=y(m);return m.readAsArrayBuffer(d),h}function C(d){var m=new FileReader,h=y(m);return m.readAsText(d),h}function M(d){for(var m=new Uint8Array(d),h=new Array(m.length),_=0;_<m.length;_++)h[_]=String.fromCharCode(m[_]);return h.join("")}function P(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&l(d)?(this._bodyArrayBuffer=P(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||u(d))?this._bodyArrayBuffer=P(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=v(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var d=v(this);if(d)return d;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(M(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}var U=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Q(d){var m=d.toUpperCase();return U.indexOf(m)>-1?m:d}function J(d,m){m=m||{};var h=m.body;if(d instanceof J){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new S(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!h&&d._bodyInit!=null&&(h=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new S(m.headers)),this.method=Q(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(h)}J.prototype.clone=function(){return new J(this,{body:this._bodyInit})};function Y(d){var m=new FormData;return d.trim().split("&").forEach(function(h){if(h){var _=h.split("="),A=_.shift().replace(/\+/g," "),p=_.join("=").replace(/\+/g," ");m.append(decodeURIComponent(A),decodeURIComponent(p))}}),m}function F(d){var m=new S,h=d.replace(/\r?\n[\t ]+/g," ");return h.split(/\r?\n/).forEach(function(_){var A=_.split(":"),p=A.shift().trim();if(p){var j=A.join(":").trim();m.append(p,j)}}),m}z.call(J.prototype);function I(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new S(m.headers),this.url=m.url||"",this._initBody(d)}z.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},I.error=function(){var d=new I(null,{status:0,statusText:""});return d.type="error",d};var q=[301,302,303,307,308];I.redirect=function(d,m){if(q.indexOf(m)===-1)throw new RangeError("Invalid status code");return new I(null,{status:m,headers:{location:d}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,h){this.message=m,this.name=h;var _=Error(m);this.stack=_.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function R(d,m){return new Promise(function(h,_){var A=new J(d,m);if(A.signal&&A.signal.aborted)return _(new o.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function j(){p.abort()}p.onload=function(){var D={status:p.status,statusText:p.statusText,headers:F(p.getAllResponseHeaders()||"")};D.url="responseURL"in p?p.responseURL:D.headers.get("X-Request-URL");var N="response"in p?p.response:p.responseText;h(new I(N,D))},p.onerror=function(){_(new TypeError("Network request failed"))},p.ontimeout=function(){_(new TypeError("Network request failed"))},p.onabort=function(){_(new o.DOMException("Aborted","AbortError"))},p.open(A.method,A.url,!0),A.credentials==="include"?p.withCredentials=!0:A.credentials==="omit"&&(p.withCredentials=!1),"responseType"in p&&a.blob&&(p.responseType="blob"),A.headers.forEach(function(D,N){p.setRequestHeader(N,D)}),A.signal&&(A.signal.addEventListener("abort",j),p.onreadystatechange=function(){p.readyState===4&&A.signal.removeEventListener("abort",j)}),p.send(typeof A._bodyInit>"u"?null:A._bodyInit)})}return R.polyfill=!0,s.fetch||(s.fetch=R,s.Headers=S,s.Request=J,s.Response=I),o.Headers=S,o.Request=J,o.Response=I,o.fetch=R,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(vr,vr.exports);var Ar=vr.exports;const Dr=Or(Ar),Vt=ei({__proto__:null,default:Dr},[Ar]);class ts{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Dr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,f=null,E=s.status,b=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,E=406,b="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,E=200,b="OK")}catch{s.status===404&&v===""?(E=204,b="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(c=null,E=200,b="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:f,status:E,statusText:b}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}}class rs extends ts{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const i=typeof r>"u"?"offset":`${r}.offset`,s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class mt extends rs{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class ns{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new mt({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new mt({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new mt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new mt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new mt({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const is="1.6.1",ss={"X-Client-Info":`postgrest-js/${is}`};class os{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},ss),t),this.schema=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new ns(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(s="HEAD",Object.entries(t).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(s="POST",a=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new mt({method:s,url:o,headers:l,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var rr,hn;function as(){if(hn)return rr;hn=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return rr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),rr}const ls="websocket",cs="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",us=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],hs="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",ds=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],fs="1.0.34",vs={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},ms="https://github.com/theturtle32/WebSocket-Node",ps={node:">=4.0.0"},ys={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},gs={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},_s={verbose:!1},bs={test:"tape test/unit/*.js",gulp:"gulp"},ws="index",Ss={lib:"./lib"},Es="lib/browser.js",Ts="Apache-2.0",Os={name:ls,description:cs,keywords:us,author:hs,contributors:ds,version:fs,repository:vs,homepage:ms,engines:ps,dependencies:ys,devDependencies:gs,config:_s,scripts:bs,main:ws,directories:Ss,browser:Es,license:Ts};var ks=Os.version,at;if(typeof globalThis=="object")at=globalThis;else try{at=as()}catch{}finally{if(!at&&typeof window<"u"&&(at=window),!at)throw new Error("Could not determine global this")}var It=at.WebSocket||at.MozWebSocket,As=ks;function Cn(n,e){var t;return e?t=new It(n,e):t=new It(n),t}It&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(Cn,n,{get:function(){return It[n]}})});var Ds={w3cwebsocket:It?Cn:null,version:As};const js="2.7.2",Ps={"X-Client-Info":`realtime-js/${js}`},Cs="1.0.0",Rn=1e4,Rs=1e3;var jt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(jt||(jt={}));var Me;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Me||(Me={}));var $e;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})($e||($e={}));var mr;(function(n){n.websocket="websocket"})(mr||(mr={}));var lt;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(lt||(lt={}));class In{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Is{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class nr{constructor(e,t,r={},i=Rn){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dn;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(dn||(dn={}));class Pt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Pt.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Pt.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Pt.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=s[c];if(f){const E=u.map(y=>y.presence_ref),b=f.map(y=>y.presence_ref),S=u.filter(y=>b.indexOf(y.presence_ref)<0),v=f.filter(y=>E.indexOf(y.presence_ref)<0);S.length>0&&(a[c]=S),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(b=>b.presence_ref),E=u.filter(b=>f.indexOf(b.presence_ref)<0);e[a].unshift(...E)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var le;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(le||(le={}));const fn=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Ms(o,n,e,i),s),{})},Ms=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?Mn(s,o):pr(o)},Mn=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Fs(e,t)}switch(n){case le.bool:return xs(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Ls(e);case le.json:case le.jsonb:return Us(e);case le.timestamp:return $s(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return pr(e);default:return pr(e)}},pr=n=>n,xs=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ls=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Us=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Fs=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Mn(e,a))}return n},$s=n=>typeof n=="string"?n.replace(" ","T"):n;var vn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},mn;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(mn||(mn={}));var pn;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(pn||(pn={}));var yn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(yn||(yn={}));class jr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new nr(this,$e.join,this.params,this.timeout),this.rejoinTimer=new In(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Me.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this._on($e.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Pt(this)}subscribe(e,t=this.timeout){var r,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,E=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,b=[];for(let S=0;S<E;S++){const v=f[S],{filter:{event:y,schema:g,table:C,filter:M}}=v,P=c&&c[S];if(P&&P.event===y&&P.schema===g&&P.table===C&&P.filter===M)b.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return vn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return vn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var i,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(s=(i=this.params)===null||i===void 0?void 0:i.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Me.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($e.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new nr(this,$e.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new nr(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=$e;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let E=this._onMessage(o,t,r);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var S,v,y;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((y=(v=b.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(b=>b.callback(E,r)):(s=this.bindings[o])===null||s===void 0||s.filter(b=>{var S,v,y,g,C,M;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const P=b.id,z=(S=b.filter)===null||S===void 0?void 0:S.event;return P&&((v=t.ids)===null||v===void 0?void 0:v.includes(P))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const P=(C=(g=b==null?void 0:b.filter)===null||g===void 0?void 0:g.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return P==="*"||P===((M=t==null?void 0:t.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof E=="object"&&"ids"in E){const S=E.data,{schema:v,table:y,commit_timestamp:g,type:C,errors:M}=S;E=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:g,eventType:C,new:{},old:{},errors:M}),this._getPayloadRecords(S))}b.callback(E,r)})}_isClosed(){return this.state===Me.closed}_isJoined(){return this.state===Me.joined}_isJoining(){return this.state===Me.joining}_isLeaving(){return this.state===Me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&jr.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($e.close,{},e)}_onError(e){this._on($e.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=fn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=fn(e.columns,e.old_record)),t}}var ir=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ns=()=>{};class Bs{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Ps,this.params={},this.timeout=Rn,this.transport=Ds.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ns,this.conn=null,this.sendBuffer=[],this.serializer=new Is,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${mr.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new In(()=>ir(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return ir(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return ir(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case jt.connecting:return lt.Connecting;case jt.open:return lt.Open;case jt.closing:return lt.Closing;default:return lt.Closed}}isConnected(){return this.connectionState()===lt.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new jr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e;let o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};if(this.log("push",`${t} ${r} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push($e.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cs}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger($e.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Rs,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Pr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Se(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Hs extends Pr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gn extends Pr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var xn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ln=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>xn(void 0,void 0,void 0,function*(){return yield(yield qt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Ys=()=>xn(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).Response:Response});var St=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const sr=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Js=(n,e)=>St(void 0,void 0,void 0,function*(){const t=yield Ys();n instanceof t?n.json().then(r=>{e(new Hs(sr(r),n.status||500))}).catch(r=>{e(new gn(sr(r),r))}):e(new gn(sr(n),n))}),zs=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Zt(n,e,t,r,i,s){return St(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,zs(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Js(l,a))})})}function yr(n,e,t,r){return St(this,void 0,void 0,function*(){return Zt(n,"GET",e,t,r)})}function et(n,e,t,r,i){return St(this,void 0,void 0,function*(){return Zt(n,"POST",e,r,i,t)})}function Ws(n,e,t,r,i){return St(this,void 0,void 0,function*(){return Zt(n,"PUT",e,r,i,t)})}function Un(n,e,t,r,i){return St(this,void 0,void 0,function*(){return Zt(n,"DELETE",e,r,i,t)})}var xe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const qs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_n={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ks{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ln(i)}uploadOrUpdate(e,t,r,i){return xe(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},_n),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return u.ok?{data:{path:l},error:null}:{data:null,error:yield u.json()}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}upload(e,t,r){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return xe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:_n.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u});return f.ok?{data:{path:s},error:null}:{data:null,error:yield f.json()}}catch(l){if(Se(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return xe(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield et(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new Pr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:s},error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}update(e,t,r){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return xe(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}copy(e,t){return xe(this,void 0,void 0,function*(){try{return{data:{path:(yield et(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return xe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield et(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return xe(this,void 0,void 0,function*(){try{const i=yield et(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}})}download(e,t){return xe(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield yr(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Se(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return xe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}list(e,t,r){return xe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},qs),t),{prefix:e||""});return{data:yield et(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Se(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Gs="2.5.1",Vs={"X-Client-Info":`storage-js/${Gs}`};var ft=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Zs{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Vs),t),this.fetch=Ln(r)}listBuckets(){return ft(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Se(e))return{data:null,error:e};throw e}})}getBucket(e){return ft(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ft(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ft(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ft(this,void 0,void 0,function*(){try{return{data:yield et(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ft(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}}class Xs extends Zs{constructor(e,t={},r){super(e,t,r)}from(e){return new Ks(this.url,this.headers,e,this.fetch)}}const Qs="2.22.0",eo={"X-Client-Info":`supabase-js/${Qs}`};var to=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const ro=n=>{let e;return n?e=n:typeof fetch>"u"?e=Dr:e=fetch,(...t)=>e(...t)},no=()=>typeof Headers>"u"?Ar.Headers:Headers,io=(n,e,t)=>{const r=ro(t),i=no();return(s,o)=>to(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};function so(n){return n.replace(/\/$/,"")}function oo(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}var dt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function ao(n){return Math.round(Date.now()/1e3)+n}function lo(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Qe=()=>typeof document<"u",st={tested:!1,writable:!1},or=()=>{if(!Qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(st.tested)return st.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),st.tested=!0,st.writable=!0}catch{st.tested=!0,st.writable=!1}return st.writable};function De(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const Fn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>dt(void 0,void 0,void 0,function*(){return yield(yield qt(()=>Promise.resolve().then(()=>Vt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},co=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ot=(n,e,t)=>dt(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),$t=(n,e)=>dt(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),ar=(n,e)=>dt(void 0,void 0,void 0,function*(){yield n.removeItem(e)});function uo(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),c!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class Xt{constructor(){this.promise=new Xt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Xt.promiseConstructor=Promise;function bn(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(uo(r))}function ho(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function fo(n,e){return new Promise((r,i)=>{dt(this,void 0,void 0,function*(){for(let s=0;s<1/0;s++)try{const o=yield n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})})}function vo(n){return("0"+n.toString(16)).substr(-2)}function Nt(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,vo).join("")}function mo(n){return dt(this,void 0,void 0,function*(){const t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function po(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Bt(n){return dt(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield mo(n);return po(e)})}class Cr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function se(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class yo extends Cr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function go(n){return se(n)&&n.name==="AuthApiError"}class $n extends Cr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xt extends Cr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class kt extends xt{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Ht extends xt{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Ye extends xt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lr extends xt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gr extends xt{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var Rr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},_o=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Yt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),bo=(n,e)=>Rr(void 0,void 0,void 0,function*(){const t=[502,503,504];co(n)?t.includes(n.status)?e(new gr(Yt(n),n.status)):n.json().then(r=>{e(new yo(Yt(r),n.status||500))}).catch(r=>{e(new $n(Yt(r),r))}):e(new gr(Yt(n),0))}),wo=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function oe(n,e,t,r){var i;return Rr(this,void 0,void 0,function*(){const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield So(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function So(n,e,t,r,i,s){return Rr(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,wo(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>bo(l,a))})})}function Xe(n){var e;let t=null;ko(n)&&(t=Object.assign({},n),t.expires_at=ao(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ct(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Eo(n){return{data:n,error:null}}function To(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=_o(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Oo(n){return n}function ko(n){return n.access_token&&n.refresh_token&&n.expires_in}var Ne=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},Ao=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Do{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Fn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return Ne(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return Ne(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ct})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return Ne(this,void 0,void 0,function*(){try{const{options:t}=e,r=Ao(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),yield oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:To,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(se(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return Ne(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ct})}catch(t){if(se(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,r,i,s,o,a,l;return Ne(this,void 0,void 0,function*(){try{const c={nextPage:null,lastPage:0,total:0},u=yield oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Oo});if(u.error)throw u.error;const f=yield u.json(),E=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return b.length>0&&(b.forEach(S=>{const v=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(S.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(E)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(se(c))return{data:{users:[]},error:c};throw c}})}getUserById(e){return Ne(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ct})}catch(t){if(se(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return Ne(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ct})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return Ne(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ct})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return Ne(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(se(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}}const jo="2.27.0",Po="http://localhost:9999",Co="supabase.auth.token",Ro={"X-Client-Info":`gotrue-js/${jo}`},Io=10,Mo={getItem:n=>or()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{or()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{or()&&globalThis.localStorage.removeItem(n)}};function xo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var G=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};xo();const Lo={url:Po,storageKey:Co,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ro,flowType:"implicit"},cr=30*1e3,Uo=3;class Fo{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const r=Object.assign(Object.assign({},Lo),e);if(this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||Mo,this.admin=new Do({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Fn(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},Qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",i=>{this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return G(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=yield this._isPKCEFlow();if(this.detectSessionInUrl&&this._isImplicitGrantFlow()||e){const{data:t,error:r}=yield this._getSessionFromUrl(e);if(r)return yield this._removeSession(),{error:r};const{session:i,redirectType:s}=t;return yield this._saveSession(i),setTimeout(()=>{s==="recovery"?this._notifyAllSubscribers("PASSWORD_RECOVERY",i):this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return se(e)?{error:e}:{error:new $n("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}})}signUp(e){var t,r,i;return G(this,void 0,void 0,function*(){try{yield this._removeSession();let s;if("email"in e){const{email:u,password:f,options:E}=e;let b=null,S=null;if(this.flowType==="pkce"){const v=Nt();yield Ot(this.storage,`${this.storageKey}-code-verifier`,v),b=yield Bt(v),S=v===b?"plain":"s256"}s=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:u,password:f,data:(t=E==null?void 0:E.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:b,code_challenge_method:S},xform:Xe})}else if("phone"in e){const{phone:u,password:f,options:E}=e;s=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},channel:(i=E==null?void 0:E.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:Xe})}else throw new Ht("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(se(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(e){return G(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:s,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xe})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xe})}else throw new Ht("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i||!r?{data:{user:null,session:null},error:i}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}catch(t){if(se(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,r,i,s;return G(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(e){return G(this,void 0,void 0,function*(){const t=yield $t(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Xe});return yield ar(this.storage,`${this.storageKey}-code-verifier`),i||!r?{data:{user:null,session:null},error:i}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})})}signInWithIdToken(e){return G(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:r,token:i,nonce:s}=e,o=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,nonce:s,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Xe}),{data:a,error:l}=o;return l||!a?{data:{user:null,session:null},error:l}:(a.session&&(yield this._saveSession(a.session),this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l})}catch(t){if(se(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,r,i,s,o;return G(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const E=Nt();yield Ot(this.storage,`${this.storageKey}-code-verifier`,E),c=yield Bt(E),u=E===c?"plain":"s256"}const{error:f}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{error:c}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null},error:c}}throw new Ht("You must provide either an email or phone number.")}catch(a){if(se(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){var t,r;return G(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:i,error:s}=yield oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Xe});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,a=i.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(se(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){var t,r,i;return G(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Eo})}catch(s){if(se(s))return{data:null,error:s};throw s}})}resend(e){return G(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null},error:o}}throw new Ht("You must provide either an email or phone number and a type")}catch(t){if(se(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return G(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const s=yield $t(this.storage,this.storageKey);s!==null&&(this._isValidSession(s)?e=s:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:r,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}})}getUser(e){var t,r;return G(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:s}=yield this.getSession();if(s)throw s;e=(r=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0}return yield oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ct})}catch(i){if(se(i))return{data:{user:null},error:i};throw i}})}updateUser(e,t={}){return G(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)throw i;if(!r.session)throw new kt;const s=r.session,{data:o,error:a}=yield oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:s.access_token,xform:ct});if(a)throw a;return s.user=o.user,yield this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(r){if(se(r))return{data:{user:null},error:r};throw r}})}_decodeJWT(e){return bn(e)}setSession(e){return G(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new kt;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=bn(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=yield this.getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(se(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return G(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:o}=yield this.getSession();if(o)throw o;e=(t=s.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new kt;const{session:r,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(e){return G(this,void 0,void 0,function*(){try{if(!Qe())throw new Ye("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ye("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new lr("Not a valid PKCE flow url.");if(e){const y=De("code");if(!y)throw new lr("No code detected.");const{data:g,error:C}=yield this.exchangeCodeForSession(y);if(C)throw C;if(!g.session)throw new lr("No session detected.");let M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:g.session,redirectType:null},error:null}}const t=De("error_description");if(t){const y=De("error_code");if(!y)throw new Ye("No error_code detected.");const g=De("error");throw g?new Ye(t,{error:g,code:y}):new Ye("No error detected.")}const r=De("provider_token"),i=De("provider_refresh_token"),s=De("access_token");if(!s)throw new Ye("No access_token detected.");const o=De("expires_in");if(!o)throw new Ye("No expires_in detected.");const a=De("refresh_token");if(!a)throw new Ye("No refresh_token detected.");const l=De("token_type");if(!l)throw new Ye("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{data:f,error:E}=yield this.getUser(s);if(E)throw E;const b=f.user,S={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(o),expires_at:u,refresh_token:a,token_type:l,user:b},v=De("type");return window.location.hash="",{data:{session:S,redirectType:v},error:null}}catch(t){if(se(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return Qe()&&(!!De("access_token")||!!De("error_description"))}_isPKCEFlow(){return G(this,void 0,void 0,function*(){const e=yield $t(this.storage,`${this.storageKey}-code-verifier`);return Qe()&&!!De("code")&&!!e})}signOut(){var e;return G(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const i=(e=t.session)===null||e===void 0?void 0:e.access_token;if(i){const{error:s}=yield this.admin.signOut(i);if(s&&!(go(s)&&(s.status===404||s.status===401)))return{error:s}}return yield this._removeSession(),yield ar(this.storage,`${this.storageKey}-code-verifier`),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=lo(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),this.emitInitialSession(t),{data:{subscription:r}}}emitInitialSession(e){var t,r;return G(this,void 0,void 0,function*(){try{const{data:{session:i},error:s}=yield this.getSession();if(s)throw s;(t=this.stateChangeEmitters.get(e))===null||t===void 0||t.callback("INITIAL_SESSION",i)}catch(i){(r=this.stateChangeEmitters.get(e))===null||r===void 0||r.callback("INITIAL_SESSION",null),console.error(i)}})}resetPasswordForEmail(e,t={}){return G(this,void 0,void 0,function*(){let r=null,i=null;if(this.flowType==="pkce"){const s=Nt();yield Ot(this.storage,`${this.storageKey}-code-verifier`,s),r=yield Bt(s),i=s===r?"plain":"s256"}try{return yield oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(se(s))return{data:null,error:s};throw s}})}_refreshAccessToken(e){return G(this,void 0,void 0,function*(){try{const t=Date.now();return yield fo(r=>G(this,void 0,void 0,function*(){return yield ho(r*200),yield oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xe})}),(r,i,s)=>s&&s.error&&s.error instanceof gr&&Date.now()+(r+1)*200-t<cr)}catch(t){if(se(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return G(this,void 0,void 0,function*(){const r=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return Qe()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){var e;return G(this,void 0,void 0,function*(){try{const t=yield $t(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+Io){if(this.autoRefreshToken&&t.refresh_token){const{error:i}=yield this._callRefreshToken(t.refresh_token);i&&(console.log(i.message),yield this._removeSession())}}else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return G(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Xt,!e)throw new kt;const{data:i,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new kt;yield this._saveSession(i.session),this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(se(i)){const s={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach(i=>i.callback(e,t))}_saveSession(e){return G(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Ot(this.storage,this.storageKey,e)}_removeSession(){return G(this,void 0,void 0,function*(){this.persistSession?yield ar(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return G(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const e=setInterval(()=>this._autoRefreshTokenTick(),cr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return G(this,void 0,void 0,function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return G(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return G(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return G(this,void 0,void 0,function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((t.expires_at*1e3-e)/cr)<Uo&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}})}_handleVisibilityChange(){return G(this,void 0,void 0,function*(){if(!Qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>G(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return G(this,void 0,void 0,function*(){document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return G(this,void 0,void 0,function*(){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=Nt();yield Ot(this.storage,`${this.storageKey}-code-verifier`,i);const s=yield Bt(i),o=i===s?"plain":"s256",a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`})}_unenroll(e){var t;return G(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(se(r))return{data:null,error:r};throw r}})}_enroll(e){var t,r;return G(this,void 0,void 0,function*(){try{const{data:i,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:o,error:a}=yield oe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=i==null?void 0:i.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(i){if(se(i))return{data:null,error:i};throw i}})}_verify(e){var t;return G(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:s,error:o}=yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})}catch(r){if(se(r))return{data:null,error:r};throw r}})}_challenge(e){var t;return G(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(se(r))return{data:null,error:r};throw r}})}_challengeAndVerify(e){return G(this,void 0,void 0,function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return G(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return G(this,void 0,void 0,function*(){const{data:{session:r},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}})}}class $o extends Fo{constructor(e){super(e)}}var No=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Bo={headers:eo},Ho={schema:"public"},Yo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jo={};class zo{constructor(e,t,r){var i,s,o,a,l,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const E=so(e);if(this.realtimeUrl=`${E}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${E}/auth/v1`,this.storageUrl=`${E}/storage/v1`,E.match(/(supabase\.co)|(supabase\.in)/)){const g=E.split(".");this.functionsUrl=`${g[0]}.functions.${g[1]}.${g[2]}`}else this.functionsUrl=`${E}/functions/v1`;const S=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:Ho,realtime:Jo,auth:Object.assign(Object.assign({},Yo),{storageKey:S}),global:Bo},y=oo(r??{},v);this.storageKey=(s=(i=y.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=y.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=y.auth)!==null&&l!==void 0?l:{},this.headers,(c=y.global)===null||c===void 0?void 0:c.fetch),this.fetch=io(t,this._getAccessToken.bind(this),(u=y.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new os(`${E}/rest/v1`,{headers:this.headers,schema:(f=y.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new es(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xs(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return No(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $o({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,fetch:l})}_initRealtimeClient(e){return new Bs(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wo=(n,e,t)=>new zo(n,e,t),ia=Wo("https://weaughxswjpwirdjraab.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndlYXVnaHhzd2pwd2lyZGpyYWFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODM5NDc4NTcsImV4cCI6MTk5OTUyMzg1N30.hB8oikmuFAR1AyhmydMqRTKc-gw3QK8aLbOZzpTl2Wk");function qo(n){let e,t,r,i,s,o;return{c(){e=te("button"),t=Be("svg"),r=Be("path"),this.h()},l(a){e=re(a,"BUTTON",{class:!0});var l=V(e);t=He(l,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var c=V(t);r=He(c,"path",{fill:!0,d:!0}),V(r).forEach(L),c.forEach(L),l.forEach(L),this.h()},h(){k(r,"fill","currentColor"),k(r,"d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2Z"),k(t,"xmlns","http://www.w3.org/2000/svg"),k(t,"width","32"),k(t,"height","32"),k(t,"viewBox","0 0 24 24"),k(e,"class",i="absolute bottom-2 right-2 rounded-full cursor-pointer text-white p-2 w-14 h-14 flex justify-center items-center "+n[1])},m(a,l){ge(a,e,l),$(e,t),$(t,r),s||(o=Ee(e,"click",n[2]),s=!0)},p(a,[l]){l&2&&i!==(i="absolute bottom-2 right-2 rounded-full cursor-pointer text-white p-2 w-14 h-14 flex justify-center items-center "+a[1])&&k(e,"class",i)},i:Jt,o:Jt,d(a){a&&L(e),s=!1,o()}}}function Ko(n,e,t){let{visible:r,additionalClasses:i}=e;const s=()=>t(0,r=!0);return n.$$set=o=>{"visible"in o&&t(0,r=o.visible),"additionalClasses"in o&&t(1,i=o.additionalClasses)},[r,i,s]}class sa extends _t{constructor(e){super(),bt(this,e,Ko,qo,wt,{visible:0,additionalClasses:1})}}function Go(n){let e,t,r,i,s,o,a,l,c,u,f,E,b,S;const v=n[5].default,y=br(v,n,n[4],null);return{c(){e=te("div"),t=pe(),r=te("form"),y&&y.c(),i=pe(),s=te("button"),o=te("span"),a=pe(),l=te("span"),c=Ke("Submit"),this.h()},l(g){e=re(g,"DIV",{class:!0,backdrop:!0}),V(e).forEach(L),t=ye(g),r=re(g,"FORM",{class:!0,grid:!0});var C=V(r);y&&y.l(C),i=ye(C),s=re(C,"BUTTON",{type:!0,class:!0});var M=V(s);o=re(M,"SPAN",{class:!0}),V(o).forEach(L),a=ye(M),l=re(M,"SPAN",{class:!0});var P=V(l);c=Ge(P,"Submit"),P.forEach(L),M.forEach(L),C.forEach(L),this.h()},h(){k(e,"class","absolute top-0 left-0 bottom-0 right-0 cursor-pointer"),k(e,"backdrop","blur-md brightness-75"),k(o,"class","absolute inset-0 border-0 group-hover:border-[25px] ease-linear duration-100 transition-all border-white rounded-full"),k(l,"class","relative w-full text-left text-base text-white transition-colors duration-200 ease-in-out group-hover:text-green-600 text-lg"),k(s,"type","submit"),k(s,"class",u="relative inline-flex items-center justify-start inline-block px-8 py-4 overflow-hidden font-medium transition-all bg-"+n[1]+" rounded-full hover:bg-white group cursor-pointer col-start-1 row-start-5 justify-self-start self-center"),k(r,"class","bg-dark-500 px-10 py-16 rounded gap-4 text-white grid absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"),k(r,"grid","cols-[1fr_1fr] rows-4")},m(g,C){ge(g,e,C),ge(g,t,C),ge(g,r,C),y&&y.m(r,null),$(r,i),$(r,s),$(s,o),$(s,a),$(s,l),$(l,c),E=!0,b||(S=[Ee(e,"click",n[6]),Qn(n[2].call(null,r))],b=!0)},p(g,[C]){y&&y.p&&(!E||C&16)&&wr(y,v,g,g[4],E?Er(v,g[4],C,null):Sr(g[4]),null),(!E||C&2&&u!==(u="relative inline-flex items-center justify-start inline-block px-8 py-4 overflow-hidden font-medium transition-all bg-"+g[1]+" rounded-full hover:bg-white group cursor-pointer col-start-1 row-start-5 justify-self-start self-center"))&&k(s,"class",u)},i(g){E||(ht(y,g),En(()=>{E&&(f||(f=zt(r,on,{duration:500},!0)),f.run(1))}),E=!0)},o(g){gt(y,g),f||(f=zt(r,on,{duration:500},!1)),f.run(0),E=!1},d(g){g&&L(e),g&&L(t),g&&L(r),y&&y.d(g),g&&f&&f.end(),b=!1,_r(S)}}}function Vo(n,e,t){let{$$slots:r={},$$scope:i}=e,{visible:s,buttonColor:o,form:a,gridClasses:l}=e;const c=()=>t(0,s=!1);return n.$$set=u=>{"visible"in u&&t(0,s=u.visible),"buttonColor"in u&&t(1,o=u.buttonColor),"form"in u&&t(2,a=u.form),"gridClasses"in u&&t(3,l=u.gridClasses),"$$scope"in u&&t(4,i=u.$$scope)},[s,o,a,l,i,r,c]}class oa extends _t{constructor(e){super(),bt(this,e,Vo,Go,wt,{visible:0,buttonColor:1,form:2,gridClasses:3})}}export{ta as D,sa as O,ra as S,oa as a,na as b,ea as c,Bi as d,ia as s};
