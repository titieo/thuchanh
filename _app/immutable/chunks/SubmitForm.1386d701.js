import{w as Tn,r as Fr}from"./index.ccd46d02.js";import{a5 as zn,S as bt,i as wt,s as Et,k as W,R as Ce,a as ue,l as K,m as H,T as Re,h as x,c as he,n as k,b as ge,D as P,a6 as Ut,a7 as we,K as hr,X as lt,a8 as Er,a9 as On,q as Oe,r as Ae,u as st,e as Nr,aa as Wn,a2 as $e,g as Je,v as An,d as nt,f as Dn,L as dr,w as Kn,V as Gn,y as Vn,z as Zn,A as Xn,W as Qn,I as Sr,J as _t,B as es,E as kr,U as $r,p as fr,F as Tr,G as Or,H as Ar,ab as ts}from"./index.6eda8e66.js";import{c as Br,a as zt,f as Hr}from"./index.87b3c420.js";import{_ as Kt}from"./preload-helper.41c905a7.js";import{b as Ft}from"./paths.fadf1ce9.js";function rs(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ns(n,...e){const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function We(n){let e;return ns(n,t=>e=t)(),e}class ss extends Error{constructor(e,t){super(e),this.name="FelteSubmitError",this.response=t}}function is(n,e){return Object.keys(n).some(r=>e(n[r]))}function Gt(n,e){return Object.keys(n||{}).reduce((r,s)=>Object.assign(Object.assign({},r),{[s]:e(n[s])}),{})}function ne(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ie(n){return Object.keys(n||{}).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:ne(n[t])?Ie(n[t]):Array.isArray(n[t])?[...n[t]]:n[t]}),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function os(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function as(n){return function(e){if(ne(e)){const t=xe(e,n);return os(t,["key"])}return n}}function xe(n,e){return Gt(n,t=>ne(t)?xe(t,e):Array.isArray(t)?t.map(as(e)):e)}function rt(...n){const e=n.pop(),t=n.shift();if(typeof t=="string")return t;const r=Ie(t);if(n.length===0)return r;for(const s of n){if(!s)continue;if(typeof s=="string")return s;let i=e(r,s);if(typeof i<"u")return i;const o=Array.from(new Set(Object.keys(r).concat(Object.keys(s))));for(const a of o)if(i=e(r[a],s[a]),typeof i<"u")r[a]=i;else if(ne(s[a])&&ne(r[a]))r[a]=rt(r[a],s[a],e);else if(Array.isArray(s[a]))r[a]=s[a].map((l,c)=>{if(!ne(l))return l;const u=Array.isArray(r[a])?r[a][c]:r[a];return rt(u,l,e)});else if(ne(s[a])){const l=xe(Ie(s[a]),void 0);r[a]=rt(l,s[a],e)}else typeof s[a]<"u"&&(r[a]=s[a])}return r}function ls(n,e){if(!(ne(n)&&ne(e))){if(Array.isArray(e)){if(e.some(ne))return;const t=Array.isArray(n)?n:[];return e.map((r,s)=>{var i;return(i=t[s])!==null&&i!==void 0?i:r})}if(typeof n<"u")return n}}function Yr(...n){return rt(...n,ls)}function jn(...n){return rt(...n,()=>{})}function Ge(n,e,t){const r=i=>String.prototype.split.call(e,i).filter(Boolean).reduce((o,a)=>o!=null?o[a]:o,n),s=r(/[,[\]]+?/)||r(/[,[\].]+?/);return s===void 0||s===n?t:s}function Mt(n,e,t){n&&(n=Ie(n)),ne(n)||(n={});const r=Array.isArray(e)?e:e.match(/[^.[\]]+/g)||[],s=r[r.length-1];if(!s)return n;let i=n;for(let o=0;o<r.length-1;o++){const a=r[o];if(!i[a]||!ne(i[a])&&!Array.isArray(i[a])){const l=r[o+1];isNaN(Number(l))?i[a]={}:i[a]=[]}i=i[a]}return i[s]=t(i[s]),n}function ce(n,e,t){return Mt(n,e,()=>t)}function Dt(n,e){if(!n||Object(n)!==n)return;typeof n<"u"&&(n=Ie(n));const t=Array.isArray(e)?e:e.toString().match(/[^.[\]]+/g)||[],r=t.length===1?n:Ge(n,t.slice(0,-1).join("."));return Array.isArray(r)?r.splice(Number(t[t.length-1]),1):r==null||delete r[t[t.length-1]],n}function Rt(n,e){return is(n,t=>ne(t)?Rt(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e(t):t.some(r=>ne(r)?Rt(r,e):e(r)):e(t))}function yt(n){return(n==null?void 0:n.nodeName)==="INPUT"}function cs(n){return(n==null?void 0:n.nodeName)==="TEXTAREA"}function gt(n){return(n==null?void 0:n.nodeName)==="SELECT"}function Vt(n){return(n==null?void 0:n.nodeName)==="FIELDSET"}function Ee(n){return yt(n)||cs(n)||gt(n)}function qr(n){return n.nodeType===Node.ELEMENT_NODE}function be(n,e){return e??(Ee(n)?n.name:"")}function er(n){let e=n;for(;e&&e.nodeName!=="FORM";){if(e.hasAttribute("data-felte-ignore"))return!0;e=e.parentElement}return!1}function us(n,e){if(!(ne(n)||ne(e))){if(n===null||n==="")return e;if(e===null||e===""||!e)return n;if(!(!n||!e)){if(Array.isArray(n)){if(!Array.isArray(e))return[...n,e];const t=[],r=Math.max(e.length,n.length);for(let s=0;s<r;s++){let i=n[s],o=e[s];!ne(i)&&!ne(o)?(Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]),t.push(...i,...o)):t.push(mt([i??{},o??{}]))}return t.filter(Boolean)}return Array.isArray(e)||(e=[e]),[n,...e].reduce((t,r)=>t.concat(r),[]).filter(Boolean)}}}function mt(n){return rt(...n,us)}function hs(n,e){return e?(Array.isArray(e)?e:[e]).map(r=>r(n)):[]}function vr(n,e){return e?Array.isArray(e)?e.reduce((t,r)=>r(t),n):e(n):n}function Pn(n=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Wt(n,e,{onInit:t,onEnd:r}={}){let s;return(...i)=>{s||t==null||t(),s&&clearTimeout(s),s=setTimeout(()=>{n.apply(this,i),s=void 0,r==null||r()},e)}}function mr(n){if(Ee(n))return[n];if(n.childElementCount===0)return[];const e=new Set;for(const t of n.children){if(Ee(t)&&e.add(t),Vt(t))for(const r of t.elements)Ee(r)&&e.add(r);t.childElementCount>0&&mr(t).forEach(r=>e.add(r))}return Array.from(e)}function Cn(n){for(const e of n.elements)!Ee(e)&&!Vt(e)||n.hasAttribute("data-felte-keep-on-remove")&&!e.hasAttribute("data-felte-keep-on-remove")&&(e.dataset.felteKeepOnRemove=n.dataset.felteKeepOnRemove)}function Rn(n){return n.type.match(/^(number|range)$/)?n.value?+n.value:void 0:n.value}function Jr(n){var e;let t={},r={};for(const s of n.elements){if(Vt(s)&&Cn(s),!Ee(s)||!s.name)continue;const i=be(s);if(yt(s)){if(s.type==="checkbox"){if(typeof Ge(t,i)>"u"){if(Array.from(n.querySelectorAll(`[name="${s.name}"]`)).filter(l=>Ee(l)?i===be(l):!1).length===1){t=ce(t,i,s.checked),r=ce(r,i,!1);continue}t=ce(t,i,s.checked?[s.value]:[]),r=ce(r,i,!1);continue}Array.isArray(Ge(t,i))&&s.checked&&(t=Mt(t,i,a=>[...a,s.value]));continue}if(s.type==="radio"){if(Ge(t,i))continue;t=ce(t,i,s.checked?s.value:void 0),r=ce(r,i,!1);continue}if(s.type==="file"){t=ce(t,i,s.multiple?Array.from(s.files||[]):(e=s.files)===null||e===void 0?void 0:e[0]),r=ce(r,i,!1);continue}}else if(gt(s)){if(!s.multiple)t=ce(t,i,s.value);else{const l=Array.from(s.options).filter(c=>c.selected).map(c=>c.value);t=ce(t,i,l)}r=ce(r,i,!1);continue}const o=Rn(s);t=ce(t,i,o),r=ce(r,i,!1)}return{defaultData:t,defaultTouched:r}}function ds(n,e){var t;if(!Ee(n))return;const r=e;if(yt(n)){if(n.type==="checkbox"){const s=r;if(typeof s>"u"||typeof s=="boolean"){n.checked=!!s;return}Array.isArray(s)&&(s.includes(n.value)?n.checked=!0:n.checked=!1);return}if(n.type==="radio"){const s=r;n.value===s?n.checked=!0:n.checked=!1;return}if(n.type==="file"){n.files=null,n.value="";return}}else if(gt(n)){if(n.multiple){if(Array.isArray(r)){n.value=String((t=r[0])!==null&&t!==void 0?t:"");const i=r.map(o=>String(o));for(const o of n.options)i.includes(o.value)?o.selected=!0:o.selected=!1}}else{n.value=String(r??"");for(const i of n.options)i.value===String(r)?i.selected=!0:i.selected=!1}return}n.value=String(r??"")}function Nt(n,e){for(const t of n.elements){if(Vt(t)&&Cn(t),!Ee(t)||!t.name)continue;const r=be(t);ds(t,Ge(e,r))}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function In(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Ke(n,e){return Gt(n,t=>ne(t)?Ke(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e:t.map(r=>{const s=Ke(r,e);return In(s,["key"])}):e)}function Ve(n){return n?Gt(n,e=>ne(e)?Ve(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!ne(t))return t;const r=Ve(t);return r.key||(r.key=Pn()),r}):e):{}}function jt(n){return n?Gt(n,e=>ne(e)?Ve(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!ne(t))return t;const r=Ve(t);return In(r,["key"])}):e):{}}function fs(){class n extends CustomEvent{constructor(s){super("feltesuccess",{detail:s})}}class e extends CustomEvent{constructor(s){super("felteerror",{detail:s,cancelable:!0})}setErrors(s){this.preventDefault(),this.errors=s}}class t extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(s){this.onSubmit=s}handleError(s){this.onError=s}handleSuccess(s){this.onSuccess=s}}return{createErrorEvent:r=>new e(r),createSubmitEvent:()=>new t,createSuccessEvent:r=>new n(r)}}function vs(n){if(n)return async function(){let t=new FormData(n);const r=new URL(n.action),s=n.method.toLowerCase()==="get"?"get":r.searchParams.get("_method")||n.method;let i=n.enctype;n.querySelector('input[type="file"]')&&(i="multipart/form-data"),(s==="get"||i==="application/x-www-form-urlencoded")&&(t=new URLSearchParams(t));let o;s==="get"?(t.forEach((l,c)=>{r.searchParams.append(c,l)}),o={method:s,headers:{Accept:"application/json"}}):o={method:s,body:t,headers:Object.assign(Object.assign({},i!=="multipart/form-data"&&{"Content-Type":i}),{Accept:"application/json"})};const a=await window.fetch(r.toString(),o);if(a.ok)return a;throw new ss("An error occurred while submitting the form",a)}}function $t(n,e,t,r){return Mt(n,e,s=>(typeof s<"u"&&!Array.isArray(s)||(s||(s=[]),typeof r>"u"?s.push(t):s.splice(r,0,t)),s))}function ms(n,e,t,r){return Mt(n,e,s=>(!s||!Array.isArray(s)||([s[t],s[r]]=[s[r],s[t]]),s))}function ps(n,e,t,r){return Mt(n,e,s=>(!s||!Array.isArray(s)||s.splice(r,0,s.splice(t,1)[0]),s))}function zr(n){return typeof n=="function"}function Xe(n){return(t,r)=>{if(typeof t=="string"){const s=t;n(i=>{const o=zr(r)?r(Ge(i,s)):r;return ce(i,s,o)})}else n(s=>zr(t)?t(s):t)}}function ys({stores:n,config:e,validateErrors:t,validateWarnings:r,_getCurrentExtenders:s}){var i;let o,a=Ve((i=e.initialValues)!==null&&i!==void 0?i:{});const{data:l,touched:c,errors:u,warnings:f,isDirty:S,isSubmitting:_,interacted:w}=n,v=Xe(l.update),y=Xe(c.update),g=Xe(u.update),L=Xe(f.update);function U(p){v(C=>{const j=p(C);return o&&Nt(o,j),j})}const T=(p,C,j)=>{Xe(U)(p,C),typeof p=="string"&&j&&y(p,!0)};function N(p,C,j){const q=ne(C)?Ke(C,!1):!1,J=ne(q)?xe(q,[]):[];C=ne(C)?Object.assign(Object.assign({},C),{key:Pn()}):C,u.update(re=>$t(re,p,J,j)),f.update(re=>$t(re,p,J,j)),c.update(re=>$t(re,p,q,j)),l.update(re=>{const ee=$t(re,p,C,j);return setTimeout(()=>o&&Nt(o,ee)),ee})}function R(p){u.update(p),f.update(p),c.update(p),l.update(C=>{const j=p(C);return setTimeout(()=>o&&Nt(o,j)),j})}function G(p){R(C=>Dt(C,p))}function Y(p,C,j){R(q=>ms(q,p,C,j))}function B(p,C,j){R(q=>ps(q,p,C,j))}function F(p){const C=Ge(a,p),j=ne(C)?Ke(C,!1):!1,q=ne(j)?xe(j,[]):[];l.update(J=>{const re=ce(J,p,C);return o&&Nt(o,re),re}),c.update(J=>ce(J,p,j)),u.update(J=>ce(J,p,q)),f.update(J=>ce(J,p,q))}const I=Xe(_.update),V=Xe(S.update),M=Xe(w.update);async function d(){const p=We(l);c.set(Ke(p,!0)),w.set(null);const C=await t(p);return await r(p),C}function m(){T(Ie(a)),y(p=>xe(p,!1)),w.set(null),S.set(!1)}function h(p){return async function(j){var q,J,re,ee,fe,se,A;const{createErrorEvent:Z,createSubmitEvent:E,createSuccessEvent:X}=fs(),me=E();o==null||o.dispatchEvent(me);const $=(J=(q=me.onError)!==null&&q!==void 0?q:p==null?void 0:p.onError)!==null&&J!==void 0?J:e.onError,O=(ee=(re=me.onSuccess)!==null&&re!==void 0?re:p==null?void 0:p.onSuccess)!==null&&ee!==void 0?ee:e.onSuccess,z=(A=(se=(fe=me.onSubmit)!==null&&fe!==void 0?fe:p==null?void 0:p.onSubmit)!==null&&se!==void 0?se:e.onSubmit)!==null&&A!==void 0?A:vs(o);if(!z||(j==null||j.preventDefault(),me.defaultPrevented))return;_.set(!0),w.set(null);const te=jt(We(l)),_e=await t(te,p==null?void 0:p.validate),ke=await r(te,p==null?void 0:p.warn);if(ke&&f.set(jn(xe(te,[]),ke)),c.set(Ke(te,!0)),_e&&(c.set(Ke(_e,!0)),Rt(_e,ye=>Array.isArray(ye)?ye.length>=1:!!ye))){await new Promise(ye=>setTimeout(ye)),s().forEach(ye=>{var De;return(De=ye.onSubmitError)===null||De===void 0?void 0:De.call(ye,{data:te,errors:_e})}),_.set(!1);return}const Me={setFields:T,setData:v,setTouched:y,setErrors:g,setWarnings:L,unsetField:G,addField:N,resetField:F,reset:m,setInitialValues:b.setInitialValues,moveField:B,swapFields:Y,form:o,controls:o&&Array.from(o.elements).filter(Ee),config:Object.assign(Object.assign({},e),p)};try{const pe=await z(te,Me);o==null||o.dispatchEvent(X(Object.assign({response:pe},Me))),await(O==null?void 0:O(pe,Me))}catch(pe){const ye=Z(Object.assign({error:pe},Me));if(o==null||o.dispatchEvent(ye),!$&&!ye.defaultPrevented)throw pe;if(!$&&!ye.errors)return;const De=ye.errors||await($==null?void 0:$(pe,Me));De&&(c.set(Ke(De,!0)),u.set(De),await new Promise(Le=>setTimeout(Le)),s().forEach(Le=>{var Be;return(Be=Le.onSubmitError)===null||Be===void 0?void 0:Be.call(Le,{data:te,errors:We(u)})}))}finally{_.set(!1)}}}const b={setData:v,setFields:T,setTouched:y,setErrors:g,setWarnings:L,setIsSubmitting:I,setIsDirty:V,setInteracted:M,validate:d,reset:m,unsetField:G,resetField:F,addField:N,swapFields:Y,moveField:B,createSubmitHandler:h,handleSubmit:h(),setInitialValues:p=>{a=Ve(p)}};return{public:b,private:{_setFormNode(p){o=p},_getInitialValues:()=>a}}}function gs({helpers:n,stores:e,config:t,extender:r,createSubmitHandler:s,handleSubmit:i,_setFormNode:o,_getInitialValues:a,_setCurrentExtenders:l,_getCurrentExtenders:c}){const{setFields:u,setTouched:f,reset:S,setInitialValues:_}=n,{addValidator:w,addTransformer:v,validate:y}=n,{data:g,errors:L,warnings:U,touched:T,isSubmitting:N,isDirty:R,interacted:G,isValid:Y,isValidating:B}=e;function F(I){I.requestSubmit||(I.requestSubmit=i);function V($){return function(O){return O({form:I,stage:$,controls:Array.from(I.elements).filter(Ee),data:g,errors:L,warnings:U,touched:T,isValid:Y,isValidating:B,isSubmitting:N,isDirty:R,interacted:G,config:t,addValidator:w,addTransformer:v,setFields:u,validate:y,reset:S,createSubmitHandler:s,handleSubmit:i})}}l(r.map(V("MOUNT"))),I.noValidate=!!t.validate;const{defaultData:M,defaultTouched:d}=Jr(I);o(I),_(jn(Ie(M),a())),u(a()),T.set(d);function m($){const O=be($),z=Array.from(I.querySelectorAll(`[name="${$.name}"]`)).filter(te=>Ee(te)?O===be(te):!1);if(z.length!==0)return z.length===1?g.update(te=>ce(te,be($),$.checked)):g.update(te=>ce(te,be($),z.filter(yt).filter(_e=>_e.checked).map(_e=>_e.value)))}function h($){const O=I.querySelectorAll(`[name="${$.name}"]`),z=Array.from(O).find(te=>yt(te)&&te.checked);g.update(te=>ce(te,be($),z==null?void 0:z.value))}function b($){var O;const z=Array.from((O=$.files)!==null&&O!==void 0?O:[]);g.update(te=>ce(te,be($),$.multiple?z:z[0]))}function D($){if(!$.multiple)g.update(O=>ce(O,be($),$.value));else{const O=Array.from($.options).filter(z=>z.selected).map(z=>z.value);g.update(z=>ce(z,be($),O))}}function p($){const O=$.target;if(!O||!Ee(O)||gt(O)||er(O)||["checkbox","radio","file"].includes(O.type)||!O.name)return;R.set(!0);const z=Rn(O);G.set(O.name),g.update(te=>ce(te,be(O),z))}function C($){const O=$.target;if(!(!O||!Ee(O)||er(O))&&O.name)if(f(be(O),!0),G.set(O.name),(gt(O)||["checkbox","radio","file","hidden"].includes(O.type))&&R.set(!0),O.type==="hidden"&&g.update(z=>ce(z,be(O),O.value)),gt(O))D(O);else if(yt(O))O.type==="checkbox"?m(O):O.type==="radio"?h(O):O.type==="file"&&b(O);else return}function j($){const O=$.target;!O||!Ee(O)||er(O)||O.name&&(f(be(O),!0),G.set(O.name))}function q($){$.preventDefault(),S()}const J={childList:!0,subtree:!0};function re($){let O=We(g),z=We(T),te=We(L),_e=We(U);for(const ke of $.reverse()){if(ke.hasAttribute("data-felte-keep-on-remove")&&ke.dataset.felteKeepOnRemove!=="false")continue;const Me=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let pe=be(ke);const ye=We(T);if(Me.test(pe)){const Le=pe.split(".").slice(0,-1).join("."),Be=Ge(ye,Le);ne(Be)&&Object.keys(Be).length<=1&&(pe=Le)}O=Dt(O,pe),z=Dt(z,pe),te=Dt(te,pe),_e=Dt(_e,pe)}g.set(O),T.set(z),L.set(te),U.set(_e)}const ee=Wt(()=>{c().forEach(z=>{var te;return(te=z.destroy)===null||te===void 0?void 0:te.call(z)}),l(r.map(V("UPDATE")));const{defaultData:$,defaultTouched:O}=Jr(I);g.update(z=>Yr(z,$)),T.update(z=>Yr(z,O)),n.setFields(We(g))},0);let fe=[];const se=Wt(()=>{c().forEach($=>{var O;return(O=$.destroy)===null||O===void 0?void 0:O.call($)}),l(r.map(V("UPDATE"))),re(fe),fe=[]},0);function A($){Array.from($.addedNodes).some(z=>qr(z)?Ee(z)?!0:mr(z).length>0:!1)&&ee()}function Z($){for(const O of $.removedNodes){if(!qr(O))continue;const z=mr(O);z.length!==0&&(fe.push(...z),se())}}function E($){for(const O of $)O.type==="childList"&&(O.addedNodes.length>0&&A(O),O.removedNodes.length>0&&Z(O))}const X=new MutationObserver(E);X.observe(I,J),I.addEventListener("input",p),I.addEventListener("change",C),I.addEventListener("focusout",j),I.addEventListener("submit",i),I.addEventListener("reset",q);const me=L.subscribe($=>{for(const O of I.elements){if(!Ee(O)||!O.name)continue;const z=Ge($,be(O)),te=Array.isArray(z)?z.join(`
`):typeof z=="string"?z:void 0;te!==O.dataset.felteValidationMessage&&(te?(O.dataset.felteValidationMessage=te,O.setAttribute("aria-invalid","true")):(delete O.dataset.felteValidationMessage,O.removeAttribute("aria-invalid")))}});return{destroy(){X.disconnect(),I.removeEventListener("input",p),I.removeEventListener("change",C),I.removeEventListener("focusout",j),I.removeEventListener("submit",i),I.removeEventListener("reset",q),me(),c().forEach($=>{var O;return(O=$.destroy)===null||O===void 0?void 0:O.call($)})}}}return{form:F}}function _s(n){const e={aborted:!1,priority:n};return{signal:e,abort(){e.aborted=!0}}}function bs(n,e){if(ne(n))return!e||ne(e)&&Object.keys(e).length===0?xe(n,null):void 0;if(Array.isArray(n)){if(n.some(ne))return;const t=Array.isArray(e)?e:[];return n.map((r,s)=>{const i=t[s];return Array.isArray(i)&&i.length===0?null:r&&i||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?n?e:null:n&&e?[e]:null}function ws(n,e){if(ne(n))return!e||ne(e)&&Object.keys(e).length===0?xe(n,null):void 0;if(Array.isArray(n)){if(n.some(ne))return;const t=Array.isArray(e)?e:[];return n.map((r,s)=>{const i=t[s];return Array.isArray(i)&&i.length===0?null:i||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?e:e?[e]:null}function Es([n,e]){return rt(e,n,bs)}function Ss([n,e]){return rt(e,n,ws)}function ks(n){return function(t,r,s){const i=Array.isArray(t)?t:[t],o=new Array(i.length),a=n(s),l=a.set,c=a.subscribe;let u;function f(){u=i.map((_,w)=>_.subscribe(v=>{o[w]=v,l(r(o))}))}function S(){u==null||u.forEach(_=>_())}return a.subscribe=function(w){const v=c(w);return()=>{v()}},[a,f,S]}}function Ts(n,e){var t,r,s,i,o,a,l,c,u;const f=ks(n),S=e.initialValues=e.initialValues?Ve(vr(Ie(e.initialValues),e.transform)):{},_=Ke(jt(S),!1),w=n(_),v=n(0),[y,g,L]=f([w,v],([ve,ae])=>Rt(ve,Ue=>!!Ue)&&ae>=1,!1);delete y.set,delete y.update;function U(ve){let ae;return async function(Ue,He,je,it=!1){if(!je||!Ue)return;let Ze=He&&Object.keys(He).length>0?He:xe(Ue,[]);const ot=_s(it);if((!(ae!=null&&ae.signal.priority)||it)&&(ae==null||ae.abort(),ae=ot),ae.signal.priority&&!it)return;v.update(kt=>kt+1);const Ur=hs(Ue,je);return Ur.forEach(async kt=>{const Jn=await kt;ot.signal.aborted||(Ze=mt([Ze,Jn]),ve.set(Ze))}),await Promise.all(Ur),ae=void 0,v.update(kt=>kt-1),Ze}}let T=xe(_,[]);const N=n(S),R=xe(_,[]),G=n(R),Y=n(Ie(R)),[B,F,I]=f([G,Y],mt,Ie(R)),V=xe(_,[]),M=n(V),d=n(Ie(V)),[m,h,b]=f([M,d],mt,Ie(V)),[D,p,C]=f([B,w],Es,Ie(R)),[j,q,J]=f([m,w],Ss,Ie(V));let re=!1;const[ee,fe,se]=f(B,([ve])=>{var ae;return re?!Rt(ve,Te=>Array.isArray(Te)?Te.length>=1:!!Te):(re=!0,!e.validate&&!(!((ae=e.debounced)===null||ae===void 0)&&ae.validate))},!e.validate&&!(!((t=e.debounced)===null||t===void 0)&&t.validate));delete ee.set,delete ee.update;const A=n(!1),Z=n(!1),E=n(null),X=U(G),me=U(M),$=U(Y),O=U(d),z=Wt($,(o=(s=(r=e.debounced)===null||r===void 0?void 0:r.validateTimeout)!==null&&s!==void 0?s:(i=e.debounced)===null||i===void 0?void 0:i.timeout)!==null&&o!==void 0?o:300,{onInit:()=>{v.update(ve=>ve+1)},onEnd:()=>{v.update(ve=>ve-1)}}),te=Wt(O,(u=(l=(a=e.debounced)===null||a===void 0?void 0:a.warnTimeout)!==null&&l!==void 0?l:(c=e.debounced)===null||c===void 0?void 0:c.timeout)!==null&&u!==void 0?u:300);async function _e(ve,ae){var Te;const Ue=jt(ve),He=X(Ue,T,ae??e.validate,!0);if(ae)return He;const je=$(Ue,T,(Te=e.debounced)===null||Te===void 0?void 0:Te.validate,!0);return mt(await Promise.all([He,je]))}async function ke(ve,ae){var Te;const Ue=jt(ve),He=me(Ue,T,ae??e.warn,!0);if(ae)return He;const je=O(Ue,T,(Te=e.debounced)===null||Te===void 0?void 0:Te.warn,!0);return mt(await Promise.all([He,je]))}let Me=R,pe=V;function ye(){const ve=N.subscribe(je=>{var it,Ze;const ot=jt(je);X(ot,T,e.validate),me(ot,T,e.warn),z(ot,T,(it=e.debounced)===null||it===void 0?void 0:it.validate),te(ot,T,(Ze=e.debounced)===null||Ze===void 0?void 0:Ze.warn)}),ae=w.subscribe(je=>{T=xe(je,[])}),Te=B.subscribe(je=>{Me=je}),Ue=m.subscribe(je=>{pe=je});F(),fe(),h(),p(),q(),g();function He(){ve(),C(),I(),b(),J(),se(),L(),ae(),Te(),Ue()}return He}function De(ve){G.set(ve(Me)),Y.set({})}function Le(ve){M.set(ve(pe)),d.set({})}function Be(ve){De(()=>ve)}function de(ve){Le(()=>ve)}return D.set=Be,D.update=De,j.set=de,j.update=Le,{data:N,errors:D,warnings:j,touched:w,isValid:ee,isSubmitting:A,isDirty:Z,isValidating:y,interacted:E,validateErrors:_e,validateWarnings:ke,cleanup:e.preventStoreStart?()=>{}:ye(),start:ye}}function Os(n,e){var t,r;(t=n.extend)!==null&&t!==void 0||(n.extend=[]),(r=n.debounced)!==null&&r!==void 0||(n.debounced={}),n.validate&&!Array.isArray(n.validate)&&(n.validate=[n.validate]),n.debounced.validate&&!Array.isArray(n.debounced.validate)&&(n.debounced.validate=[n.debounced.validate]),n.transform&&!Array.isArray(n.transform)&&(n.transform=[n.transform]),n.warn&&!Array.isArray(n.warn)&&(n.warn=[n.warn]),n.debounced.warn&&!Array.isArray(n.debounced.warn)&&(n.debounced.warn=[n.debounced.warn]);function s(h,{debounced:b,level:D}={debounced:!1,level:"error"}){var p;const C=D==="error"?"validate":"warn";(p=n.debounced)!==null&&p!==void 0||(n.debounced={});const j=b?n.debounced:n;j[C]?j[C]=[...j[C],h]:j[C]=[h]}function i(h){n.transform?n.transform=[...n.transform,h]:n.transform=[h]}const o=Array.isArray(n.extend)?n.extend:[n.extend];let a=[];const l=()=>a,c=h=>{a=h},{isSubmitting:u,isValidating:f,data:S,errors:_,warnings:w,touched:v,isValid:y,isDirty:g,cleanup:L,start:U,validateErrors:T,validateWarnings:N,interacted:R}=Ts(e.storeFactory,n),G=S.update,Y=S.set,B=h=>G(b=>Ve(vr(h(b),n.transform))),F=h=>Y(Ve(vr(h,n.transform)));S.update=B,S.set=F;const I=ys({extender:o,config:n,addValidator:s,addTransformer:i,validateErrors:T,validateWarnings:N,_getCurrentExtenders:l,stores:{data:S,errors:_,warnings:w,touched:v,isValid:y,isValidating:f,isSubmitting:u,isDirty:g,interacted:R}}),{createSubmitHandler:V,handleSubmit:M}=I.public;a=o.map(h=>h({stage:"SETUP",errors:_,warnings:w,touched:v,data:S,isDirty:g,isValid:y,isValidating:f,isSubmitting:u,interacted:R,config:n,addValidator:s,addTransformer:i,setFields:I.public.setFields,reset:I.public.reset,validate:I.public.validate,handleSubmit:M,createSubmitHandler:V}));const d=Object.assign({config:n,stores:{data:S,touched:v,errors:_,warnings:w,isSubmitting:u,isValidating:f,isValid:y,isDirty:g,interacted:R},createSubmitHandler:V,handleSubmit:M,helpers:Object.assign(Object.assign({},I.public),{addTransformer:i,addValidator:s}),extender:o,_getCurrentExtenders:l,_setCurrentExtenders:c},I.private),{form:m}=gs(d);return Object.assign({data:S,errors:_,warnings:w,touched:v,isValid:y,isSubmitting:u,isValidating:f,isDirty:g,interacted:R,form:m,cleanup:L,startStores:U},I.public)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function As(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function na(n){const e=Os(n??{},{storeFactory:Tn}),{cleanup:t,startStores:r}=e,s=As(e,["cleanup","startStores"]);return zn(t),s}function Ds(n){return n%4===0&&n%100!==0||n%400===0}function It(n,e){return[31,Ds(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function Wr(n,e){let t="";if(n)for(const r of e)typeof r=="string"?t+=r:t+=r.toString(n);return t}function tr(n,e){const t=It(n,e),r=[];for(let s=0;s<t;s++)r.push({year:n,month:e,number:s+1});return r}function js(n,e){const t=n.getFullYear(),r=n.getMonth(),s=new Date(t,r,1).getDay();let i=[];const o=(s-e+7)%7;if(o>0){let u=r-1,f=t;u===-1&&(u=11,f=t-1),i=tr(f,u).slice(-o)}i=i.concat(tr(t,r));let a=r+1,l=t;a===12&&(a=0,l=t+1);const c=42-i.length;return i=i.concat(tr(l,a).slice(0,c)),i}function Ps(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStartsOn:1}}function Cs(n={}){const e=Ps();return typeof n.weekStartsOn=="number"&&(e.weekStartsOn=n.weekStartsOn),n.months&&(e.months=n.months),n.weekdays&&(e.weekdays=n.weekdays),e}function Kr(n,e,t){const r=n.slice();return r[29]=e[t],r[31]=t,r}function Gr(n,e,t){const r=n.slice();return r[32]=e[t],r}function Vr(n,e,t){const r=n.slice();return r[29]=e[t],r[36]=t,r}function Zr(n,e,t){const r=n.slice();return r[37]=e[t],r}function Xr(n,e,t){const r=n.slice();return r[37]=e[t],r}function Qr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function en(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function tn(n){let e,t=n[42]+"",r,s;return{c(){e=W("option"),r=Oe(t),this.h()},l(i){e=K(i,"OPTION",{});var o=H(e);r=Ae(o,t),o.forEach(x),this.h()},h(){e.disabled=s=new Date(n[8],n[36],It(n[8],n[36]),23,59,59,999)<n[1]||new Date(n[8],n[36])>n[2],e.__value=n[36],e.value=e.__value},m(i,o){ge(i,e,o),P(e,r)},p(i,o){o[0]&16&&t!==(t=i[42]+"")&&st(r,t),o[0]&294&&s!==(s=new Date(i[8],i[36],It(i[8],i[36]),23,59,59,999)<i[1]||new Date(i[8],i[36])>i[2])&&(e.disabled=s)},d(i){i&&x(e)}}}function rn(n){let e,t=n[42]+"",r,s;return{c(){e=W("option"),r=Oe(t),this.h()},l(i){e=K(i,"OPTION",{});var o=H(e);r=Ae(o,t),o.forEach(x),this.h()},h(){e.__value=n[36],e.value=e.__value,e.selected=s=n[36]===n[7]},m(i,o){ge(i,e,o),P(e,r)},p(i,o){o[0]&16&&t!==(t=i[42]+"")&&st(r,t),o[0]&128&&s!==(s=i[36]===i[7])&&(e.selected=s)},d(i){i&&x(e)}}}function nn(n){let e,t=n[37]+"",r,s;return{c(){e=W("option"),r=Oe(t),this.h()},l(i){e=K(i,"OPTION",{});var o=H(e);r=Ae(o,t),o.forEach(x),this.h()},h(){e.__value=s=n[37],e.value=e.__value},m(i,o){ge(i,e,o),P(e,r)},p(i,o){o[0]&32&&t!==(t=i[37]+"")&&st(r,t),o[0]&32&&s!==(s=i[37])&&(e.__value=s,e.value=e.__value)},d(i){i&&x(e)}}}function sn(n){let e,t=n[37]+"",r,s,i;return{c(){e=W("option"),r=Oe(t),this.h()},l(o){e=K(o,"OPTION",{});var a=H(e);r=Ae(a,t),a.forEach(x),this.h()},h(){e.__value=s=n[37],e.value=e.__value,e.selected=i=n[37]===n[3].getFullYear()},m(o,a){ge(o,e,a),P(e,r)},p(o,a){a[0]&32&&t!==(t=o[37]+"")&&st(r,t),a[0]&32&&s!==(s=o[37])&&(e.__value=s,e.value=e.__value),a[0]&40&&i!==(i=o[37]===o[3].getFullYear())&&(e.selected=i)},d(o){o&&x(e)}}}function Rs(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]-7]+"",r;return{c(){e=W("div"),r=Oe(t),this.h()},l(s){e=K(s,"DIV",{class:!0});var i=H(e);r=Ae(i,t),i.forEach(x),this.h()},h(){k(e,"class","header-cell svelte-w239uu")},m(s,i){ge(s,e,i),P(e,r)},p(s,i){i[0]&16&&t!==(t=s[4].weekdays[s[4].weekStartsOn+s[36]-7]+"")&&st(r,t)},d(s){s&&x(e)}}}function Is(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]]+"",r;return{c(){e=W("div"),r=Oe(t),this.h()},l(s){e=K(s,"DIV",{class:!0});var i=H(e);r=Ae(i,t),i.forEach(x),this.h()},h(){k(e,"class","header-cell svelte-w239uu")},m(s,i){ge(s,e,i),P(e,r)},p(s,i){i[0]&16&&t!==(t=s[4].weekdays[s[4].weekStartsOn+s[36]]+"")&&st(r,t)},d(s){s&&x(e)}}}function on(n){let e;function t(i,o){return i[36]+i[4].weekStartsOn<7?Is:Rs}let r=t(n),s=r(n);return{c(){s.c(),e=Nr()},l(i){s.l(i),e=Nr()},m(i,o){s.m(i,o),ge(i,e,o)},p(i,o){r===(r=t(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){s.d(i),i&&x(e)}}}function an(n){let e,t,r=n[32].number+"",s,i,o;function a(){return n[23](n[32])}return{c(){e=W("div"),t=W("span"),s=Oe(r),this.h()},l(l){e=K(l,"DIV",{class:!0});var c=H(e);t=K(c,"SPAN",{class:!0});var u=H(t);s=Ae(u,r),u.forEach(x),c.forEach(x),this.h()},h(){k(t,"class","svelte-w239uu"),k(e,"class","cell svelte-w239uu"),$e(e,"disabled",!pr(n[32],n[1],n[2])),$e(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),$e(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),$e(e,"other-month",n[32].month!==n[7])},m(l,c){ge(l,e,c),P(e,t),P(t,s),i||(o=we(e,"click",a),i=!0)},p(l,c){n=l,c[0]&64&&r!==(r=n[32].number+"")&&st(s,r),c[0]&70&&$e(e,"disabled",!pr(n[32],n[1],n[2])),c[0]&65&&$e(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),c[0]&576&&$e(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),c[0]&192&&$e(e,"other-month",n[32].month!==n[7])},d(l){l&&x(e),i=!1,o()}}}function ln(n){let e,t,r=n[6].slice(n[31]*7,n[31]*7+7),s=[];for(let i=0;i<r.length;i+=1)s[i]=an(Gr(n,r,i));return{c(){e=W("div");for(let i=0;i<s.length;i+=1)s[i].c();t=ue(),this.h()},l(i){e=K(i,"DIV",{class:!0});var o=H(e);for(let a=0;a<s.length;a+=1)s[a].l(o);t=he(o),o.forEach(x),this.h()},h(){k(e,"class","week svelte-w239uu")},m(i,o){ge(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);P(e,t)},p(i,o){if(o[0]&4807){r=i[6].slice(i[31]*7,i[31]*7+7);let a;for(a=0;a<r.length;a+=1){const l=Gr(i,r,a);s[a]?s[a].p(l,o):(s[a]=an(l),s[a].c(),s[a].m(e,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(i){i&&x(e),lt(s,i)}}}function xs(n){let e,t,r,s,i,o,a,l,c,u,f,S,_,w,v,y,g,L,U,T,N,R,G,Y,B,F,I,V,M,d,m,h=n[4].months,b=[];for(let A=0;A<h.length;A+=1)b[A]=tn(en(n,h,A));let D=n[4].months,p=[];for(let A=0;A<D.length;A+=1)p[A]=rn(Qr(n,D,A));let C=n[5],j=[];for(let A=0;A<C.length;A+=1)j[A]=nn(Xr(n,C,A));let q=n[5],J=[];for(let A=0;A<q.length;A+=1)J[A]=sn(Zr(n,q,A));let re=Array(7),ee=[];for(let A=0;A<re.length;A+=1)ee[A]=on(Vr(n,re,A));let fe=Array(6),se=[];for(let A=0;A<fe.length;A+=1)se[A]=ln(Kr(n,fe,A));return{c(){e=W("div"),t=W("div"),r=W("div"),s=W("button"),i=Ce("svg"),o=Ce("path"),a=ue(),l=W("div"),c=W("select");for(let A=0;A<b.length;A+=1)b[A].c();u=ue(),f=W("select");for(let A=0;A<p.length;A+=1)p[A].c();S=ue(),_=Ce("svg"),w=Ce("path"),v=ue(),y=W("div"),g=W("select");for(let A=0;A<j.length;A+=1)j[A].c();L=ue(),U=W("select");for(let A=0;A<J.length;A+=1)J[A].c();T=ue(),N=Ce("svg"),R=Ce("path"),G=ue(),Y=W("button"),B=Ce("svg"),F=Ce("path"),I=ue(),V=W("div");for(let A=0;A<ee.length;A+=1)ee[A].c();M=ue();for(let A=0;A<se.length;A+=1)se[A].c();this.h()},l(A){e=K(A,"DIV",{class:!0,tabindex:!0});var Z=H(e);t=K(Z,"DIV",{class:!0,tabindex:!0});var E=H(t);r=K(E,"DIV",{class:!0});var X=H(r);s=K(X,"BUTTON",{type:!0,class:!0,tabindex:!0});var me=H(s);i=Re(me,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var $=H(i);o=Re($,"path",{d:!0,transform:!0}),H(o).forEach(x),$.forEach(x),me.forEach(x),a=he(X),l=K(X,"DIV",{class:!0});var O=H(l);c=K(O,"SELECT",{class:!0});var z=H(c);for(let de=0;de<b.length;de+=1)b[de].l(z);z.forEach(x),u=he(O),f=K(O,"SELECT",{class:!0,tabindex:!0});var te=H(f);for(let de=0;de<p.length;de+=1)p[de].l(te);te.forEach(x),S=he(O),_=Re(O,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var _e=H(_);w=Re(_e,"path",{d:!0,transform:!0}),H(w).forEach(x),_e.forEach(x),O.forEach(x),v=he(X),y=K(X,"DIV",{class:!0});var ke=H(y);g=K(ke,"SELECT",{class:!0});var Me=H(g);for(let de=0;de<j.length;de+=1)j[de].l(Me);Me.forEach(x),L=he(ke),U=K(ke,"SELECT",{class:!0,tabindex:!0});var pe=H(U);for(let de=0;de<J.length;de+=1)J[de].l(pe);pe.forEach(x),T=he(ke),N=Re(ke,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var ye=H(N);R=Re(ye,"path",{d:!0,transform:!0}),H(R).forEach(x),ye.forEach(x),ke.forEach(x),G=he(X),Y=K(X,"BUTTON",{type:!0,class:!0,tabindex:!0});var De=H(Y);B=Re(De,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Le=H(B);F=Re(Le,"path",{d:!0}),H(F).forEach(x),Le.forEach(x),De.forEach(x),X.forEach(x),I=he(E),V=K(E,"DIV",{class:!0});var Be=H(V);for(let de=0;de<ee.length;de+=1)ee[de].l(Be);Be.forEach(x),M=he(E);for(let de=0;de<se.length;de+=1)se[de].l(E);E.forEach(x),Z.forEach(x),this.h()},h(){k(o,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),k(o,"transform","rotate(180, 12, 12)"),k(i,"xmlns","http://www.w3.org/2000/svg"),k(i,"width","24"),k(i,"height","24"),k(i,"viewBox","0 0 24 24"),k(i,"class","svelte-w239uu"),k(s,"type","button"),k(s,"class","page-button svelte-w239uu"),k(s,"tabindex","-1"),k(c,"class","svelte-w239uu"),k(f,"class","dummy-select svelte-w239uu"),k(f,"tabindex","-1"),k(w,"d","M6 0l12 12-12 12z"),k(w,"transform","rotate(90, 12, 12)"),k(_,"xmlns","http://www.w3.org/2000/svg"),k(_,"width","24"),k(_,"height","24"),k(_,"viewBox","0 0 24 24"),k(_,"class","svelte-w239uu"),k(l,"class","dropdown month svelte-w239uu"),k(g,"class","svelte-w239uu"),k(U,"class","dummy-select svelte-w239uu"),k(U,"tabindex","-1"),k(R,"d","M6 0l12 12-12 12z"),k(R,"transform","rotate(90, 12, 12)"),k(N,"xmlns","http://www.w3.org/2000/svg"),k(N,"width","24"),k(N,"height","24"),k(N,"viewBox","0 0 24 24"),k(N,"class","svelte-w239uu"),k(y,"class","dropdown year svelte-w239uu"),k(F,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),k(B,"xmlns","http://www.w3.org/2000/svg"),k(B,"width","24"),k(B,"height","24"),k(B,"viewBox","0 0 24 24"),k(B,"class","svelte-w239uu"),k(Y,"type","button"),k(Y,"class","page-button svelte-w239uu"),k(Y,"tabindex","-1"),k(r,"class","top svelte-w239uu"),k(V,"class","header svelte-w239uu"),k(t,"class","tab-container svelte-w239uu"),k(t,"tabindex","-1"),k(e,"class","date-time-picker svelte-w239uu"),k(e,"tabindex","0")},m(A,Z){ge(A,e,Z),P(e,t),P(t,r),P(r,s),P(s,i),P(i,o),P(r,a),P(r,l),P(l,c);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(c,null);Ut(c,n[7]),P(l,u),P(l,f);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(f,null);P(l,S),P(l,_),P(_,w),P(r,v),P(r,y),P(y,g);for(let E=0;E<j.length;E+=1)j[E]&&j[E].m(g,null);Ut(g,n[8]),P(y,L),P(y,U);for(let E=0;E<J.length;E+=1)J[E]&&J[E].m(U,null);P(y,T),P(y,N),P(N,R),P(r,G),P(r,Y),P(Y,B),P(B,F),P(t,I),P(t,V);for(let E=0;E<ee.length;E+=1)ee[E]&&ee[E].m(V,null);P(t,M);for(let E=0;E<se.length;E+=1)se[E]&&se[E].m(t,null);d||(m=[we(s,"click",n[19]),we(c,"keydown",n[14]),we(c,"input",n[20]),we(g,"input",n[21]),we(g,"keydown",n[13]),we(Y,"click",n[22]),we(e,"focusout",n[18]),we(e,"keydown",n[15])],d=!0)},p(A,Z){if(Z[0]&278){h=A[4].months;let E;for(E=0;E<h.length;E+=1){const X=en(A,h,E);b[E]?b[E].p(X,Z):(b[E]=tn(X),b[E].c(),b[E].m(c,null))}for(;E<b.length;E+=1)b[E].d(1);b.length=h.length}if(Z[0]&128&&Ut(c,A[7]),Z[0]&144){D=A[4].months;let E;for(E=0;E<D.length;E+=1){const X=Qr(A,D,E);p[E]?p[E].p(X,Z):(p[E]=rn(X),p[E].c(),p[E].m(f,null))}for(;E<p.length;E+=1)p[E].d(1);p.length=D.length}if(Z[0]&32){C=A[5];let E;for(E=0;E<C.length;E+=1){const X=Xr(A,C,E);j[E]?j[E].p(X,Z):(j[E]=nn(X),j[E].c(),j[E].m(g,null))}for(;E<j.length;E+=1)j[E].d(1);j.length=C.length}if(Z[0]&288&&Ut(g,A[8]),Z[0]&40){q=A[5];let E;for(E=0;E<q.length;E+=1){const X=Zr(A,q,E);J[E]?J[E].p(X,Z):(J[E]=sn(X),J[E].c(),J[E].m(U,null))}for(;E<J.length;E+=1)J[E].d(1);J.length=q.length}if(Z[0]&16){re=Array(7);let E;for(E=0;E<re.length;E+=1){const X=Vr(A,re,E);ee[E]?ee[E].p(X,Z):(ee[E]=on(X),ee[E].c(),ee[E].m(V,null))}for(;E<ee.length;E+=1)ee[E].d(1);ee.length=re.length}if(Z[0]&4807){fe=Array(6);let E;for(E=0;E<fe.length;E+=1){const X=Kr(A,fe,E);se[E]?se[E].p(X,Z):(se[E]=ln(X),se[E].c(),se[E].m(t,null))}for(;E<se.length;E+=1)se[E].d(1);se.length=fe.length}},i:hr,o:hr,d(A){A&&x(e),lt(b,A),lt(p,A),lt(j,A),lt(J,A),lt(ee,A),lt(se,A),d=!1,Er(m)}}}function dt(n){return new Date(n.getTime())}function rr(n,e,t){return n>t?dt(t):n<e?dt(e):dt(n)}function cn(n,e){let t=[];for(let r=n.getFullYear();r<=e.getFullYear();r++)t.push(r);return t}function pr(n,e,t){const r=new Date(n.year,n.month,n.number),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r>=s&&r<=i}function Ms(n,e,t){let r,s,i,o;const a=On();let{value:l=null}=e;function c(h){h.getTime()!==(l==null?void 0:l.getTime())&&(t(3,v=rr(h,_,w)),t(0,l=dt(v)))}function u(h){t(3,v=rr(h,_,w)),!L&&l&&c(v)}const f=new Date,S=new Date;let{min:_=new Date(S.getFullYear()-20,0,1)}=e,{max:w=new Date(S.getFullYear(),11,31,23,59,59,999)}=e,v=dt(l||rr(S,_,w)),y=cn(_,w),{locale:g={}}=e,{browseWithoutSelecting:L=!1}=e;function U(h){v.setFullYear(h),u(v)}function T(h){let b=v.getFullYear();h===12?(h=0,b++):h===-1&&(h=11,b--);const D=It(b,h),p=Math.min(v.getDate(),D);u(new Date(b,h,p,v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()))}function N(h){pr(h,_,w)&&(v.setFullYear(0),v.setMonth(0),v.setDate(1),v.setFullYear(h.year),v.setMonth(h.month),v.setDate(h.number),c(v),a("select"))}function R(h){if(h.shiftKey&&h.key==="ArrowUp")U(v.getFullYear()-1);else if(h.shiftKey&&h.key==="ArrowDown")U(v.getFullYear()+1);else if(h.shiftKey&&h.key==="ArrowLeft")T(v.getMonth()-1);else if(h.shiftKey&&h.key==="ArrowRight")T(v.getMonth()+1);else return!1;return h.preventDefault(),!0}function G(h){if(h.shiftKey||h.altKey){R(h);return}else if(h.key==="ArrowUp")U(v.getFullYear()-1);else if(h.key==="ArrowDown")U(v.getFullYear()+1);else if(h.key==="ArrowLeft")T(v.getMonth()-1);else if(h.key==="ArrowRight")T(v.getMonth()+1);else{R(h);return}h.preventDefault()}function Y(h){if(h.shiftKey||h.altKey){R(h);return}else if(h.key==="ArrowUp"||h.key==="ArrowLeft")T(v.getMonth()-1);else if(h.key==="ArrowDown"||h.key==="ArrowRight")T(v.getMonth()+1);else{R(h);return}h.preventDefault()}function B(h){var D;let b=h.shiftKey||h.altKey;if(((D=h.target)==null?void 0:D.tagName)!=="SELECT"){if(b){R(h);return}else if(h.key==="ArrowUp")v.setDate(v.getDate()-7),c(v);else if(h.key==="ArrowDown")v.setDate(v.getDate()+7),c(v);else if(h.key==="ArrowLeft")v.setDate(v.getDate()-1),c(v);else if(h.key==="ArrowRight")v.setDate(v.getDate()+1),c(v);else if(h.key==="Enter")c(v),a("select");else return;h.preventDefault()}}function F(h){Wn.call(this,n,h)}const I=()=>T(v.getMonth()-1),V=h=>T(parseInt(h.currentTarget.value)),M=h=>U(parseInt(h.currentTarget.value)),d=()=>T(v.getMonth()+1),m=h=>N(h);return n.$$set=h=>{"value"in h&&t(0,l=h.value),"min"in h&&t(1,_=h.min),"max"in h&&t(2,w=h.max),"locale"in h&&t(16,g=h.locale),"browseWithoutSelecting"in h&&t(17,L=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty[0]&7&&(l&&l>w?c(w):l&&l<_&&c(_)),n.$$.dirty[0]&131081&&v.getTime()!==(l==null?void 0:l.getTime())&&!L&&t(3,v=l?dt(l):v),n.$$.dirty[0]&6&&t(5,y=cn(_,w)),n.$$.dirty[0]&65536&&t(4,r=Cs(g)),n.$$.dirty[0]&8&&t(8,s=v.getFullYear()),n.$$.dirty[0]&8&&t(7,i=v.getMonth()),n.$$.dirty[0]&24&&t(6,o=js(v,r.weekStartsOn))},[l,_,w,v,r,y,o,i,s,f,U,T,N,G,Y,B,g,L,F,I,V,M,d,m]}class Ls extends bt{constructor(e){super(),wt(this,e,Ms,xs,Et,{value:0,min:1,max:2,locale:16,browseWithoutSelecting:17},null,[-1,-1])}}function un(n,e,t){let r="",s=!0;t=t||new Date(2020,0,1,0,0,0,0);let i=t.getFullYear(),o=t.getMonth(),a=t.getDate(),l=t.getHours(),c=t.getMinutes(),u=t.getSeconds();const f=t.getMilliseconds();function S(y){for(let g=0;g<y.length;g++)if(n.startsWith(y[g]))n=n.slice(1);else{s=!1,n.length===0&&(r=y.slice(g));return}}function _(y,g,L){const U=n.match(y);if(U!=null&&U[0]){n=n.slice(U[0].length);const T=parseInt(U[0]);return T>L||T<g?(s=!1,null):T}else return s=!1,null}function w(y){if(typeof y=="string")S(y);else if(y.id==="yyyy"){const g=_(/^[0-9]{4}/,0,9999);g!==null&&(i=g)}else if(y.id==="MM"){const g=_(/^[0-9]{2}/,1,12);g!==null&&(o=g-1)}else if(y.id==="dd"){const g=_(/^[0-9]{2}/,1,31);g!==null&&(a=g)}else if(y.id==="HH"){const g=_(/^[0-9]{2}/,0,23);g!==null&&(l=g)}else if(y.id==="mm"){const g=_(/^[0-9]{2}/,0,59);g!==null&&(c=g)}else if(y.id==="ss"){const g=_(/^[0-9]{2}/,0,59);g!==null&&(u=g)}}for(const y of e)if(w(y),!s)break;const v=It(i,o);return a>v&&(s=!1),{date:s?new Date(i,o,a,l,c,u,f):null,missingPunctuation:r}}function Tt(n){return("0"+n.toString()).slice(-2)}const Us=[{id:"yyyy",toString:n=>n.getFullYear().toString()},{id:"MM",toString:n=>Tt(n.getMonth()+1)},{id:"dd",toString:n=>Tt(n.getDate())},{id:"HH",toString:n=>Tt(n.getHours())},{id:"mm",toString:n=>Tt(n.getMinutes())},{id:"ss",toString:n=>Tt(n.getSeconds())}];function Fs(n){for(const e of Us)if(n.startsWith(e.id))return e}function hn(n){const e=[];for(;n.length>0;){const t=Fs(n);t?(e.push(t),n=n.slice(t.id.length)):typeof e[e.length-1]=="string"?(e[e.length-1]+=n[0],n=n.slice(1)):(e.push(n[0]),n=n.slice(1))}return e}function dn(n){let e,t,r,s,i;function o(l){n[23](l)}let a={min:n[3],max:n[4],locale:n[8],browseWithoutSelecting:n[9]};return n[11]!==void 0&&(a.value=n[11]),t=new Ls({props:a}),Kn.push(()=>Gn(t,"value",o)),t.$on("focusout",n[14]),t.$on("select",n[16]),{c(){e=W("div"),Vn(t.$$.fragment),this.h()},l(l){e=K(l,"DIV",{class:!0});var c=H(e);Zn(t.$$.fragment,c),c.forEach(x),this.h()},h(){k(e,"class","picker svelte-1bsxr9h"),$e(e,"visible",n[2])},m(l,c){ge(l,e,c),Xn(t,e,null),i=!0},p(l,c){n=l;const u={};c&8&&(u.min=n[3]),c&16&&(u.max=n[4]),c&256&&(u.locale=n[8]),c&512&&(u.browseWithoutSelecting=n[9]),!r&&c&2048&&(r=!0,u.value=n[11],Qn(()=>r=!1)),t.$set(u),(!i||c&4)&&$e(e,"visible",n[2])},i(l){i||(Je(t.$$.fragment,l),Sr(()=>{i&&(s||(s=_t(e,zt,{duration:80,easing:Br,y:-5},!0)),s.run(1))}),i=!0)},o(l){nt(t.$$.fragment,l),s||(s=_t(e,zt,{duration:80,easing:Br,y:-5},!1)),s.run(0),i=!1},d(l){l&&x(e),es(t),l&&s&&s.end()}}}function Ns(n){let e,t,r,s,i,o,a,l=n[2]&&!n[6]&&dn(n);return{c(){e=W("div"),t=W("input"),r=ue(),l&&l.c(),this.h()},l(c){e=K(c,"DIV",{class:!0});var u=H(e);t=K(u,"INPUT",{type:!0,placeholder:!0,class:!0}),r=he(u),l&&l.l(u),u.forEach(x),this.h()},h(){k(t,"type","text"),t.value=n[0],k(t,"placeholder",n[5]),t.disabled=n[6],k(t,"class","svelte-1bsxr9h"),$e(t,"invalid",!n[1]),k(e,"class",s="date-time-field "+n[7]+" svelte-1bsxr9h")},m(c,u){ge(c,e,u),P(e,t),P(e,r),l&&l.m(e,null),i=!0,o||(a=[we(t,"focus",n[20]),we(t,"mousedown",n[21]),we(t,"input",n[22]),we(e,"focusout",n[14]),we(e,"keydown",n[15])],o=!0)},p(c,[u]){(!i||u&1&&t.value!==c[0])&&(t.value=c[0]),(!i||u&32)&&k(t,"placeholder",c[5]),(!i||u&64)&&(t.disabled=c[6]),(!i||u&2)&&$e(t,"invalid",!c[1]),c[2]&&!c[6]?l?(l.p(c,u),u&68&&Je(l,1)):(l=dn(c),l.c(),Je(l,1),l.m(e,null)):l&&(An(),nt(l,1,1,()=>{l=null}),Dn()),(!i||u&128&&s!==(s="date-time-field "+c[7]+" svelte-1bsxr9h"))&&k(e,"class",s)},i(c){i||(Je(l),i=!0)},o(c){nt(l),i=!1},d(c){c&&x(e),l&&l.d(),o=!1,Er(a)}}}function $s(n,e,t){let r,s;const i=On(),o=new Date,a=Tn(null);dr(n,a,h=>t(24,s=h));const l=(()=>({subscribe:a.subscribe,set:h=>{h===null?(a.set(null),t(17,c=h)):h.getTime()!==(s==null?void 0:s.getTime())&&(a.set(h),t(17,c=h))}}))();dr(n,l,h=>t(11,r=h));let{value:c=null}=e,{min:u=new Date(o.getFullYear()-20,0,1)}=e,{max:f=new Date(o.getFullYear(),11,31,23,59,59,999)}=e,{placeholder:S="2020-12-31 23:00:00"}=e,{valid:_=!0}=e,{disabled:w=!1}=e,{class:v=""}=e,{format:y="yyyy-MM-dd HH:mm:ss"}=e,g=hn(y),{locale:L={}}=e;function U(h,b){t(0,T=Wr(h,b))}let{text:T=Wr(r,g)}=e;function N(h,b){if(h.length){const D=un(h,b,r);D.date!==null?(t(1,_=!0),l.set(D.date)):t(1,_=!1)}else t(1,_=!0),c&&(t(17,c=null),l.set(null))}let{visible:R=!1}=e,{closeOnSelection:G=!1}=e,{browseWithoutSelecting:Y=!1}=e;function B(h){(h==null?void 0:h.currentTarget)instanceof HTMLElement&&h.relatedTarget&&h.relatedTarget instanceof Node&&h.currentTarget.contains(h.relatedTarget)||t(2,R=!1)}function F(h){h.key==="Escape"&&R?(t(2,R=!1),h.preventDefault(),h.stopPropagation()):h.key==="Enter"&&(t(2,R=!R),h.preventDefault())}function I(h){i("select",h.detail),G&&t(2,R=!1)}const V=()=>t(2,R=!0),M=()=>t(2,R=!0),d=h=>{if(h instanceof InputEvent&&h.inputType==="insertText"&&typeof h.data=="string"&&h.currentTarget.value===T+h.data){let b=un(T,g,r);if(b.missingPunctuation!==""&&!b.missingPunctuation.startsWith(h.data)){t(0,T=T+b.missingPunctuation+h.data);return}}t(0,T=h.currentTarget.value)};function m(h){r=h,l.set(r)}return n.$$set=h=>{"value"in h&&t(17,c=h.value),"min"in h&&t(3,u=h.min),"max"in h&&t(4,f=h.max),"placeholder"in h&&t(5,S=h.placeholder),"valid"in h&&t(1,_=h.valid),"disabled"in h&&t(6,w=h.disabled),"class"in h&&t(7,v=h.class),"format"in h&&t(18,y=h.format),"locale"in h&&t(8,L=h.locale),"text"in h&&t(0,T=h.text),"visible"in h&&t(2,R=h.visible),"closeOnSelection"in h&&t(19,G=h.closeOnSelection),"browseWithoutSelecting"in h&&t(9,Y=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty&131072&&l.set(c),n.$$.dirty&262144&&t(10,g=hn(y)),n.$$.dirty&3072&&U(r,g),n.$$.dirty&1025&&N(T,g)},[T,_,R,u,f,S,w,v,L,Y,g,r,a,l,B,F,I,c,y,G,V,M,d,m]}class sa extends bt{constructor(e){super(),wt(this,e,$s,Ns,Et,{value:17,min:3,max:4,placeholder:5,valid:1,disabled:6,class:7,format:18,locale:8,text:0,visible:2,closeOnSelection:19,browseWithoutSelecting:9})}}var xn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Dr,function(){var t=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",l="hour",c="day",u="week",f="month",S="quarter",_="year",w="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,L={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var d=["th","st","nd","rd"],m=M%100;return"["+M+(d[(m-20)%10]||d[m]||d[0])+"]"}},U=function(M,d,m){var h=String(M);return!h||h.length>=d?M:""+Array(d+1-h.length).join(m)+M},T={s:U,z:function(M){var d=-M.utcOffset(),m=Math.abs(d),h=Math.floor(m/60),b=m%60;return(d<=0?"+":"-")+U(h,2,"0")+":"+U(b,2,"0")},m:function M(d,m){if(d.date()<m.date())return-M(m,d);var h=12*(m.year()-d.year())+(m.month()-d.month()),b=d.clone().add(h,f),D=m-b<0,p=d.clone().add(h+(D?-1:1),f);return+(-(h+(m-b)/(D?b-p:p-b))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:_,w:u,d:c,D:w,h:l,m:a,s:o,ms:i,Q:S}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},N="en",R={};R[N]=L;var G=function(M){return M instanceof I},Y=function M(d,m,h){var b;if(!d)return N;if(typeof d=="string"){var D=d.toLowerCase();R[D]&&(b=D),m&&(R[D]=m,b=D);var p=d.split("-");if(!b&&p.length>1)return M(p[0])}else{var C=d.name;R[C]=d,b=C}return!h&&b&&(N=b),b||!h&&N},B=function(M,d){if(G(M))return M.clone();var m=typeof d=="object"?d:{};return m.date=M,m.args=arguments,new I(m)},F=T;F.l=Y,F.i=G,F.w=function(M,d){return B(M,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var I=function(){function M(m){this.$L=Y(m.locale,null,!0),this.parse(m)}var d=M.prototype;return d.parse=function(m){this.$d=function(h){var b=h.date,D=h.utc;if(b===null)return new Date(NaN);if(F.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var p=b.match(y);if(p){var C=p[2]-1||0,j=(p[7]||"0").substring(0,3);return D?new Date(Date.UTC(p[1],C,p[3]||1,p[4]||0,p[5]||0,p[6]||0,j)):new Date(p[1],C,p[3]||1,p[4]||0,p[5]||0,p[6]||0,j)}}return new Date(b)}(m),this.$x=m.x||{},this.init()},d.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},d.$utils=function(){return F},d.isValid=function(){return this.$d.toString()!==v},d.isSame=function(m,h){var b=B(m);return this.startOf(h)<=b&&b<=this.endOf(h)},d.isAfter=function(m,h){return B(m)<this.startOf(h)},d.isBefore=function(m,h){return this.endOf(h)<B(m)},d.$g=function(m,h,b){return F.u(m)?this[h]:this.set(b,m)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(m,h){var b=this,D=!!F.u(h)||h,p=F.p(m),C=function(A,Z){var E=F.w(b.$u?Date.UTC(b.$y,Z,A):new Date(b.$y,Z,A),b);return D?E:E.endOf(c)},j=function(A,Z){return F.w(b.toDate()[A].apply(b.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(Z)),b)},q=this.$W,J=this.$M,re=this.$D,ee="set"+(this.$u?"UTC":"");switch(p){case _:return D?C(1,0):C(31,11);case f:return D?C(1,J):C(0,J+1);case u:var fe=this.$locale().weekStart||0,se=(q<fe?q+7:q)-fe;return C(D?re-se:re+(6-se),J);case c:case w:return j(ee+"Hours",0);case l:return j(ee+"Minutes",1);case a:return j(ee+"Seconds",2);case o:return j(ee+"Milliseconds",3);default:return this.clone()}},d.endOf=function(m){return this.startOf(m,!1)},d.$set=function(m,h){var b,D=F.p(m),p="set"+(this.$u?"UTC":""),C=(b={},b[c]=p+"Date",b[w]=p+"Date",b[f]=p+"Month",b[_]=p+"FullYear",b[l]=p+"Hours",b[a]=p+"Minutes",b[o]=p+"Seconds",b[i]=p+"Milliseconds",b)[D],j=D===c?this.$D+(h-this.$W):h;if(D===f||D===_){var q=this.clone().set(w,1);q.$d[C](j),q.init(),this.$d=q.set(w,Math.min(this.$D,q.daysInMonth())).$d}else C&&this.$d[C](j);return this.init(),this},d.set=function(m,h){return this.clone().$set(m,h)},d.get=function(m){return this[F.p(m)]()},d.add=function(m,h){var b,D=this;m=Number(m);var p=F.p(h),C=function(J){var re=B(D);return F.w(re.date(re.date()+Math.round(J*m)),D)};if(p===f)return this.set(f,this.$M+m);if(p===_)return this.set(_,this.$y+m);if(p===c)return C(1);if(p===u)return C(7);var j=(b={},b[a]=r,b[l]=s,b[o]=t,b)[p]||1,q=this.$d.getTime()+m*j;return F.w(q,this)},d.subtract=function(m,h){return this.add(-1*m,h)},d.format=function(m){var h=this,b=this.$locale();if(!this.isValid())return b.invalidDate||v;var D=m||"YYYY-MM-DDTHH:mm:ssZ",p=F.z(this),C=this.$H,j=this.$m,q=this.$M,J=b.weekdays,re=b.months,ee=function(Z,E,X,me){return Z&&(Z[E]||Z(h,D))||X[E].slice(0,me)},fe=function(Z){return F.s(C%12||12,Z,"0")},se=b.meridiem||function(Z,E,X){var me=Z<12?"AM":"PM";return X?me.toLowerCase():me},A={YY:String(this.$y).slice(-2),YYYY:this.$y,M:q+1,MM:F.s(q+1,2,"0"),MMM:ee(b.monthsShort,q,re,3),MMMM:ee(re,q),D:this.$D,DD:F.s(this.$D,2,"0"),d:String(this.$W),dd:ee(b.weekdaysMin,this.$W,J,2),ddd:ee(b.weekdaysShort,this.$W,J,3),dddd:J[this.$W],H:String(C),HH:F.s(C,2,"0"),h:fe(1),hh:fe(2),a:se(C,j,!0),A:se(C,j,!1),m:String(j),mm:F.s(j,2,"0"),s:String(this.$s),ss:F.s(this.$s,2,"0"),SSS:F.s(this.$ms,3,"0"),Z:p};return D.replace(g,function(Z,E){return E||A[Z]||p.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(m,h,b){var D,p=F.p(h),C=B(m),j=(C.utcOffset()-this.utcOffset())*r,q=this-C,J=F.m(this,C);return J=(D={},D[_]=J/12,D[f]=J,D[S]=J/3,D[u]=(q-j)/6048e5,D[c]=(q-j)/864e5,D[l]=q/s,D[a]=q/r,D[o]=q/t,D)[p]||q,b?J:F.a(J)},d.daysInMonth=function(){return this.endOf(f).$D},d.$locale=function(){return R[this.$L]},d.locale=function(m,h){if(!m)return this.$L;var b=this.clone(),D=Y(m,h,!0);return D&&(b.$L=D),b},d.clone=function(){return F.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},M}(),V=I.prototype;return B.prototype=V,[["$ms",i],["$s",o],["$m",a],["$H",l],["$W",c],["$M",f],["$y",_],["$D",w]].forEach(function(M){V[M[1]]=function(d){return this.$g(d,M[0],M[1])}}),B.extend=function(M,d){return M.$i||(M(d,I,B),M.$i=!0),B},B.locale=Y,B.isDayjs=G,B.unix=function(M){return B(1e3*M)},B.en=R[N],B.Ls=R,B.p={},B})})(xn);var Bs=xn.exports;const fn=jr(Bs);function Hs(n){let e,t,r,s,i,o,a,l,c,u,f;const S=n[3].default,_=kr(S,n,n[2],null);return{c(){e=W("div"),t=W("picture"),r=W("source"),s=ue(),i=W("source"),o=ue(),a=W("img"),u=ue(),_&&_.c(),this.h()},l(w){e=K(w,"DIV",{class:!0,grid:!0});var v=H(e);t=K(v,"PICTURE",{class:!0});var y=H(t);r=K(y,"SOURCE",{media:!0,srcset:!0}),s=he(y),i=K(y,"SOURCE",{media:!0,srcset:!0}),o=he(y),a=K(y,"IMG",{src:!0,alt:!0,style:!0,class:!0}),y.forEach(x),u=he(v),_&&_.l(v),v.forEach(x),this.h()},h(){k(r,"media","(min-width:650px)"),k(r,"srcset",n[0]),k(i,"media","(min-width:465px)"),k(i,"srcset",n[0]),$r(a.src,l=n[0])||k(a,"src",l),k(a,"alt","Flowers"),fr(a,"width","auto"),k(a,"class","h-screen"),k(t,"class",c="lt-sm:blur lt-sm:brightness-120 lt-sm:absolute lt-sm:top-1/2 lt-sm:left-1/2 lt-sm:-translate-x-1/2 lt-sm:-translate-y-1/2 max-w-max row-start-1 row-end-2 "+(n[1]?"order-1 justify-self-end ":"")),k(e,"class","grid gap-y-2 sm:gap-y-4 h-screen w-screen"),k(e,"grid","cols-[max-content_1fr] lg:rows-[40vh_60vh]")},m(w,v){ge(w,e,v),P(e,t),P(t,r),P(t,s),P(t,i),P(t,o),P(t,a),P(e,u),_&&_.m(e,null),f=!0},p(w,[v]){(!f||v&1)&&k(r,"srcset",w[0]),(!f||v&1)&&k(i,"srcset",w[0]),(!f||v&1&&!$r(a.src,l=w[0]))&&k(a,"src",l),(!f||v&2&&c!==(c="lt-sm:blur lt-sm:brightness-120 lt-sm:absolute lt-sm:top-1/2 lt-sm:left-1/2 lt-sm:-translate-x-1/2 lt-sm:-translate-y-1/2 max-w-max row-start-1 row-end-2 "+(w[1]?"order-1 justify-self-end ":"")))&&k(t,"class",c),_&&_.p&&(!f||v&4)&&Tr(_,S,w,w[2],f?Ar(S,w[2],v,null):Or(w[2]),null)},i(w){f||(Je(_,w),f=!0)},o(w){nt(_,w),f=!1},d(w){w&&x(e),_&&_.d(w)}}}function Ys(n,e,t){let{$$slots:r={},$$scope:s}=e,{pictureName:i,reverse:o}=e;return n.$$set=a=>{"pictureName"in a&&t(0,i=a.pictureName),"reverse"in a&&t(1,o=a.reverse),"$$scope"in a&&t(2,s=a.$$scope)},[i,o,s,r]}class ia extends bt{constructor(e){super(),wt(this,e,Ys,Hs,Et,{pictureName:0,reverse:1})}}var Mn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Dr,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(v){return(v=+v)+(v>68?1900:2e3)},c=function(v){return function(y){this[v]=+y}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var g=y.match(/([+-]|\d\d)/g),L=60*g[1]+(+g[2]||0);return L===0?0:g[0]==="+"?-L:L}(v)}],f=function(v){var y=a[v];return y&&(y.indexOf?y:y.s.concat(y.f))},S=function(v,y){var g,L=a.meridiem;if(L){for(var U=1;U<=24;U+=1)if(v.indexOf(L(U,0,y))>-1){g=U>12;break}}else g=v===(y?"pm":"PM");return g},_={A:[o,function(v){this.afternoon=S(v,!1)}],a:[o,function(v){this.afternoon=S(v,!0)}],S:[/\d/,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[i,c("seconds")],ss:[i,c("seconds")],m:[i,c("minutes")],mm:[i,c("minutes")],H:[i,c("hours")],h:[i,c("hours")],HH:[i,c("hours")],hh:[i,c("hours")],D:[i,c("day")],DD:[s,c("day")],Do:[o,function(v){var y=a.ordinal,g=v.match(/\d+/);if(this.day=g[0],y)for(var L=1;L<=31;L+=1)y(L).replace(/\[|\]/g,"")===v&&(this.day=L)}],M:[i,c("month")],MM:[s,c("month")],MMM:[o,function(v){var y=f("months"),g=(f("monthsShort")||y.map(function(L){return L.slice(0,3)})).indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],MMMM:[o,function(v){var y=f("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(v){this.year=l(v)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function w(v){var y,g;y=v,g=a&&a.formats;for(var L=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(B,F,I){var V=I&&I.toUpperCase();return F||g[I]||t[I]||g[V].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,d,m){return d||m.slice(1)})})).match(r),U=L.length,T=0;T<U;T+=1){var N=L[T],R=_[N],G=R&&R[0],Y=R&&R[1];L[T]=Y?{regex:G,parser:Y}:N.replace(/^\[|\]$/g,"")}return function(B){for(var F={},I=0,V=0;I<U;I+=1){var M=L[I];if(typeof M=="string")V+=M.length;else{var d=M.regex,m=M.parser,h=B.slice(V),b=d.exec(h)[0];m.call(F,b),B=B.replace(b,"")}}return function(D){var p=D.afternoon;if(p!==void 0){var C=D.hours;p?C<12&&(D.hours+=12):C===12&&(D.hours=0),delete D.afternoon}}(F),F}}return function(v,y,g){g.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(l=v.parseTwoDigitYear);var L=y.prototype,U=L.parse;L.parse=function(T){var N=T.date,R=T.utc,G=T.args;this.$u=R;var Y=G[1];if(typeof Y=="string"){var B=G[2]===!0,F=G[3]===!0,I=B||F,V=G[2];F&&(V=G[2]),a=this.$locale(),!B&&V&&(a=g.Ls[V]),this.$d=function(h,b,D){try{if(["x","X"].indexOf(b)>-1)return new Date((b==="X"?1e3:1)*h);var p=w(b)(h),C=p.year,j=p.month,q=p.day,J=p.hours,re=p.minutes,ee=p.seconds,fe=p.milliseconds,se=p.zone,A=new Date,Z=q||(C||j?1:A.getDate()),E=C||A.getFullYear(),X=0;C&&!j||(X=j>0?j-1:A.getMonth());var me=J||0,$=re||0,O=ee||0,z=fe||0;return se?new Date(Date.UTC(E,X,Z,me,$,O,z+60*se.offset*1e3)):D?new Date(Date.UTC(E,X,Z,me,$,O,z)):new Date(E,X,Z,me,$,O,z)}catch{return new Date("")}}(N,Y,R),this.init(),V&&V!==!0&&(this.$L=this.locale(V).$L),I&&N!=this.format(Y)&&(this.$d=new Date("")),a={}}else if(Y instanceof Array)for(var M=Y.length,d=1;d<=M;d+=1){G[1]=Y[d-1];var m=g.apply(this,G);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}d===M&&(this.$d=new Date(""))}else U.call(this,T)}}})})(Mn);var qs=Mn.exports;const Js=jr(qs),zs=n=>typeof window>"u"||!n?Fr(!1):Fr(!1,t=>{const r=window.matchMedia(n);t(r.matches);const s=i=>t(i.matches);return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}});function Ws(n){let e,t,r,s,i;const o=n[7].default,a=kr(o,n,n[6],null);return{c(){e=W("div"),t=W("h3"),r=Oe(n[2]),s=ue(),a&&a.c(),this.h()},l(l){e=K(l,"DIV",{class:!0,style:!0});var c=H(e);t=K(c,"H3",{class:!0});var u=H(t);r=Ae(u,n[2]),u.forEach(x),s=he(c),a&&a.l(c),c.forEach(x),this.h()},h(){k(t,"class","text-sm sm:text-base md:text-lg font-title"),k(e,"class","card w-full group flex gap-4 items-center justify-between svelte-u0mhei"),fr(e,"order",n[0]-n[1])},m(l,c){ge(l,e,c),P(e,t),P(t,r),P(e,s),a&&a.m(e,null),i=!0},p(l,[c]){(!i||c&4)&&st(r,l[2]),a&&a.p&&(!i||c&64)&&Tr(a,o,l,l[6],i?Ar(o,l[6],c,null):Or(l[6]),null),(!i||c&3)&&fr(e,"order",l[0]-l[1])},i(l){i||(Je(a,l),i=!0)},o(l){nt(a,l),i=!1},d(l){l&&x(e),a&&a.d(l)}}}function Ks(n,e,t){let r,s,{$$slots:i={},$$scope:o}=e;const a=zs("(max-width: 768px)");dr(n,a,f=>t(5,s=f)),fn.extend(Js);let{created_at:l,dates_length:c,order:u}=e;return n.$$set=f=>{"created_at"in f&&t(4,l=f.created_at),"dates_length"in f&&t(0,c=f.dates_length),"order"in f&&t(1,u=f.order),"$$scope"in f&&t(6,o=f.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&t(2,r=l),n.$$.dirty&48&&(s?t(2,r=fn(l,"DD/MM/YYYY").format("DD/MM")):t(2,r=l))},[c,u,r,a,l,s,o,i]}class oa extends bt{constructor(e){super(),wt(this,e,Ks,Ws,Et,{created_at:4,dates_length:0,order:1})}}var Gs=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Vs=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Gs(void 0,void 0,void 0,function*(){return yield(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Pr extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class Zs extends Pr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xs extends Pr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Qs extends Pr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ei=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class ti{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Vs(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ei(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(_=>{throw new Zs(_)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new Xs(c);if(!c.ok)throw new Qs(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),S;return f==="application/json"?S=yield c.json():f==="application/octet-stream"?S=yield c.blob():f==="multipart/form-data"?S=yield c.formData():S=yield c.text(),{data:S,error:null}}catch(s){return{data:null,error:s}}})}}var yr={exports:{}};(function(n,e){var t=typeof self<"u"?self:Dr,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function l(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(d){return d&&c.indexOf(Object.prototype.toString.call(d))>-1};function f(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function S(d){return typeof d!="string"&&(d=String(d)),d}function _(d){var m={next:function(){var h=d.shift();return{done:h===void 0,value:h}}};return a.iterable&&(m[Symbol.iterator]=function(){return m}),m}function w(d){this.map={},d instanceof w?d.forEach(function(m,h){this.append(h,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}w.prototype.append=function(d,m){d=f(d),m=S(m);var h=this.map[d];this.map[d]=h?h+", "+m:m},w.prototype.delete=function(d){delete this.map[f(d)]},w.prototype.get=function(d){return d=f(d),this.has(d)?this.map[d]:null},w.prototype.has=function(d){return this.map.hasOwnProperty(f(d))},w.prototype.set=function(d,m){this.map[f(d)]=S(m)},w.prototype.forEach=function(d,m){for(var h in this.map)this.map.hasOwnProperty(h)&&d.call(m,this.map[h],h,this)},w.prototype.keys=function(){var d=[];return this.forEach(function(m,h){d.push(h)}),_(d)},w.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),_(d)},w.prototype.entries=function(){var d=[];return this.forEach(function(m,h){d.push([h,m])}),_(d)},a.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);function v(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function y(d){return new Promise(function(m,h){d.onload=function(){m(d.result)},d.onerror=function(){h(d.error)}})}function g(d){var m=new FileReader,h=y(m);return m.readAsArrayBuffer(d),h}function L(d){var m=new FileReader,h=y(m);return m.readAsText(d),h}function U(d){for(var m=new Uint8Array(d),h=new Array(m.length),b=0;b<m.length;b++)h[b]=String.fromCharCode(m[b]);return h.join("")}function T(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&l(d)?(this._bodyArrayBuffer=T(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||u(d))?this._bodyArrayBuffer=T(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=v(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var d=v(this);if(d)return d;if(this._bodyBlob)return L(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var R=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function G(d){var m=d.toUpperCase();return R.indexOf(m)>-1?m:d}function Y(d,m){m=m||{};var h=m.body;if(d instanceof Y){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new w(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!h&&d._bodyInit!=null&&(h=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new w(m.headers)),this.method=G(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(h)}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function B(d){var m=new FormData;return d.trim().split("&").forEach(function(h){if(h){var b=h.split("="),D=b.shift().replace(/\+/g," "),p=b.join("=").replace(/\+/g," ");m.append(decodeURIComponent(D),decodeURIComponent(p))}}),m}function F(d){var m=new w,h=d.replace(/\r?\n[\t ]+/g," ");return h.split(/\r?\n/).forEach(function(b){var D=b.split(":"),p=D.shift().trim();if(p){var C=D.join(":").trim();m.append(p,C)}}),m}N.call(Y.prototype);function I(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new w(m.headers),this.url=m.url||"",this._initBody(d)}N.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},I.error=function(){var d=new I(null,{status:0,statusText:""});return d.type="error",d};var V=[301,302,303,307,308];I.redirect=function(d,m){if(V.indexOf(m)===-1)throw new RangeError("Invalid status code");return new I(null,{status:m,headers:{location:d}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,h){this.message=m,this.name=h;var b=Error(m);this.stack=b.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function M(d,m){return new Promise(function(h,b){var D=new Y(d,m);if(D.signal&&D.signal.aborted)return b(new o.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function C(){p.abort()}p.onload=function(){var j={status:p.status,statusText:p.statusText,headers:F(p.getAllResponseHeaders()||"")};j.url="responseURL"in p?p.responseURL:j.headers.get("X-Request-URL");var q="response"in p?p.response:p.responseText;h(new I(q,j))},p.onerror=function(){b(new TypeError("Network request failed"))},p.ontimeout=function(){b(new TypeError("Network request failed"))},p.onabort=function(){b(new o.DOMException("Aborted","AbortError"))},p.open(D.method,D.url,!0),D.credentials==="include"?p.withCredentials=!0:D.credentials==="omit"&&(p.withCredentials=!1),"responseType"in p&&a.blob&&(p.responseType="blob"),D.headers.forEach(function(j,q){p.setRequestHeader(q,j)}),D.signal&&(D.signal.addEventListener("abort",C),p.onreadystatechange=function(){p.readyState===4&&D.signal.removeEventListener("abort",C)}),p.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return M.polyfill=!0,i.fetch||(i.fetch=M,i.Headers=w,i.Request=Y,i.Response=I),o.Headers=w,o.Request=Y,o.Response=I,o.fetch=M,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e})(yr,yr.exports);var Cr=yr.exports;const Rr=jr(Cr),Zt=rs({__proto__:null,default:Rr},[Cr]);class ri{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Rr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,u=null,f=null,S=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,S=406,_="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{c=JSON.parse(v),Array.isArray(c)&&i.status===404&&(u=[],c=null,S=200,_="OK")}catch{i.status===404&&v===""?(S=204,_="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(c=null,S=200,_="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:f,status:S,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class ni extends ri{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class pt extends ni{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class si{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new pt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new pt({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new pt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new pt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new pt({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const ii="1.6.1",oi={"X-Client-Info":`postgrest-js/${ii}`};class ai{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},oi),t),this.schema=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new si(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:s}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(i="HEAD",Object.entries(t).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(i="POST",a=t);const l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new pt({method:i,url:o,headers:l,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var nr,vn;function li(){if(vn)return nr;vn=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return nr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),nr}const ci="websocket",ui="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",hi=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],di="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",fi=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],vi="1.0.34",mi={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},pi="https://github.com/theturtle32/WebSocket-Node",yi={node:">=4.0.0"},gi={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},_i={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},bi={verbose:!1},wi={test:"tape test/unit/*.js",gulp:"gulp"},Ei="index",Si={lib:"./lib"},ki="lib/browser.js",Ti="Apache-2.0",Oi={name:ci,description:ui,keywords:hi,author:di,contributors:fi,version:vi,repository:mi,homepage:pi,engines:yi,dependencies:gi,devDependencies:_i,config:bi,scripts:wi,main:Ei,directories:Si,browser:ki,license:Ti};var Ai=Oi.version,ct;if(typeof globalThis=="object")ct=globalThis;else try{ct=li()}catch{}finally{if(!ct&&typeof window<"u"&&(ct=window),!ct)throw new Error("Could not determine global this")}var xt=ct.WebSocket||ct.MozWebSocket,Di=Ai;function Ln(n,e){var t;return e?t=new xt(n,e):t=new xt(n),t}xt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(Ln,n,{get:function(){return xt[n]}})});var ji={w3cwebsocket:xt?Ln:null,version:Di};const Pi="2.7.2",Ci={"X-Client-Info":`realtime-js/${Pi}`},Ri="1.0.0",Un=1e4,Ii=1e3;var Pt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pt||(Pt={}));var Fe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Fe||(Fe={}));var Ye;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ye||(Ye={}));var gr;(function(n){n.websocket="websocket"})(gr||(gr={}));var ut;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ut||(ut={}));class Fn{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class xi{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class sr{constructor(e,t,r={},s=Un){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var mn;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(mn||(mn={}));class Ct{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ct.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ct.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ct.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=i[c];if(f){const S=u.map(y=>y.presence_ref),_=f.map(y=>y.presence_ref),w=u.filter(y=>_.indexOf(y.presence_ref)<0),v=f.filter(y=>S.indexOf(y.presence_ref)<0);w.length>0&&(a[c]=w),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(_=>_.presence_ref),S=u.filter(_=>f.indexOf(_.presence_ref)<0);e[a].unshift(...S)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var le;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(le||(le={}));const pn=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Mi(o,n,e,s),i),{})},Mi=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?Nn(i,o):_r(o)},Nn=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Ni(e,t)}switch(n){case le.bool:return Li(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Ui(e);case le.json:case le.jsonb:return Fi(e);case le.timestamp:return $i(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return _r(e);default:return _r(e)}},_r=n=>n,Li=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ui=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Fi=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Ni=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Nn(e,a))}return n},$i=n=>typeof n=="string"?n.replace(" ","T"):n;var yn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},gn;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(gn||(gn={}));var _n;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(_n||(_n={}));var bn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(bn||(bn={}));class Ir{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new sr(this,Ye.join,this.params,this.timeout),this.rejoinTimer=new Fn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ye.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ct(this)}subscribe(e,t=this.timeout){var r,s;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(c=>e&&e("CHANNEL_ERROR",c)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,S=(u=f==null?void 0:f.length)!==null&&u!==void 0?u:0,_=[];for(let w=0;w<S;w++){const v=f[w],{filter:{event:y,schema:g,table:L,filter:U}}=v,T=c&&c[w];if(T&&T.event===y&&T.schema===g&&T.table===L&&T.filter===U)_.push(Object.assign(Object.assign({},v),{id:T.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e("SUBSCRIBED");return}}).receive("error",c=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return yn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return yn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var s,i,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(i=(s=this.params)===null||s===void 0?void 0:s.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ye.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new sr(this,Ye.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new sr(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Ye;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let S=this._onMessage(o,t,r);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var w,v,y;return((w=_.filter)===null||w===void 0?void 0:w.event)==="*"||((y=(v=_.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(_=>_.callback(S,r)):(i=this.bindings[o])===null||i===void 0||i.filter(_=>{var w,v,y,g,L,U;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const T=_.id,N=(w=_.filter)===null||w===void 0?void 0:w.event;return T&&((v=t.ids)===null||v===void 0?void 0:v.includes(T))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const T=(L=(g=_==null?void 0:_.filter)===null||g===void 0?void 0:g.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return T==="*"||T===((U=t==null?void 0:t.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof S=="object"&&"ids"in S){const w=S.data,{schema:v,table:y,commit_timestamp:g,type:L,errors:U}=w;S=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:g,eventType:L,new:{},old:{},errors:U}),this._getPayloadRecords(w))}_.callback(S,r)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Ir.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ye.close,{},e)}_onError(e){this._on(Ye.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=pn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=pn(e.columns,e.old_record)),t}}var ir=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Bi=()=>{};class Hi{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Ci,this.params={},this.timeout=Un,this.transport=ji.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Bi,this.conn=null,this.sendBuffer=[],this.serializer=new xi,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${gr.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Fn(()=>ir(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return ir(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return ir(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pt.connecting:return ut.Connecting;case Pt.open:return ut.Open;case Pt.closing:return ut.Closing;default:return ut.Closed}}isConnected(){return this.connectionState()===ut.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new Ir(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e;let o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};if(this.log("push",`${t} ${r} (${i})`,s),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Ye.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ri}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ye.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ii,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class xr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Se(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Yi extends xr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class wn extends xr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $n=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Bn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>$n(void 0,void 0,void 0,function*(){return yield(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},qi=()=>$n(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).Response:Response});var St=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const or=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ji=(n,e)=>St(void 0,void 0,void 0,function*(){const t=yield qi();n instanceof t?n.json().then(r=>{e(new Yi(or(r),n.status||500))}).catch(r=>{e(new wn(or(r),r))}):e(new wn(or(n),n))}),zi=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function Xt(n,e,t,r,s,i){return St(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,zi(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ji(l,a))})})}function br(n,e,t,r){return St(this,void 0,void 0,function*(){return Xt(n,"GET",e,t,r)})}function tt(n,e,t,r,s){return St(this,void 0,void 0,function*(){return Xt(n,"POST",e,r,s,t)})}function Wi(n,e,t,r,s){return St(this,void 0,void 0,function*(){return Xt(n,"PUT",e,r,s,t)})}function Hn(n,e,t,r,s){return St(this,void 0,void 0,function*(){return Xt(n,"DELETE",e,r,s,t)})}var Ne=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ki={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},En={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gi{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Bn(s)}uploadOrUpdate(e,t,r,s){return Ne(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},En),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return u.ok?{data:{path:l},error:null}:{data:null,error:yield u.json()}}catch(i){if(Se(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:En.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u});return f.ok?{data:{path:i},error:null}:{data:null,error:yield f.json()}}catch(l){if(Se(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Ne(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield tt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+r.url),i=s.searchParams.get("token");if(!i)throw new xr("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}update(e,t,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}copy(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return Ne(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield tt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Ne(this,void 0,void 0,function*(){try{const s=yield tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}download(e,t){return Ne(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield br(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Se(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ne(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ki),t),{prefix:e||""});return{data:yield tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Vi="2.5.1",Zi={"X-Client-Info":`storage-js/${Vi}`};var vt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class Xi{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Zi),t),this.fetch=Bn(r)}listBuckets(){return vt(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Se(e))return{data:null,error:e};throw e}})}getBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield br(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return vt(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return vt(this,void 0,void 0,function*(){try{return{data:yield Wi(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}deleteBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}})}}class Qi extends Xi{constructor(e,t={},r){super(e,t,r)}from(e){return new Gi(this.url,this.headers,e,this.fetch)}}const eo="2.22.0",to={"X-Client-Info":`supabase-js/${eo}`};var ro=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const no=n=>{let e;return n?e=n:typeof fetch>"u"?e=Rr:e=fetch,(...t)=>e(...t)},so=()=>typeof Headers>"u"?Cr.Headers:Headers,io=(n,e,t)=>{const r=no(t),s=so();return(i,o)=>ro(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};function oo(n){return n.replace(/\/$/,"")}function ao(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}var ft=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};function lo(n){return Math.round(Date.now()/1e3)+n}function co(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const et=()=>typeof document<"u",at={tested:!1,writable:!1},ar=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(at.tested)return at.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),at.tested=!0,at.writable=!0}catch{at.tested=!0,at.writable=!1}return at.writable};function Pe(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const Yn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ft(void 0,void 0,void 0,function*(){return yield(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},uo=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ot=(n,e,t)=>ft(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),Bt=(n,e)=>ft(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),lr=(n,e)=>ft(void 0,void 0,void 0,function*(){yield n.removeItem(e)});function ho(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,o,a,l,c,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=e.indexOf(n.charAt(u++)),a=e.indexOf(n.charAt(u++)),l=e.indexOf(n.charAt(u++)),c=e.indexOf(n.charAt(u++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Qt{constructor(){this.promise=new Qt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qt.promiseConstructor=Promise;function Sn(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(ho(r))}function fo(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function vo(n,e){return new Promise((r,s)=>{ft(this,void 0,void 0,function*(){for(let i=0;i<1/0;i++)try{const o=yield n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})})}function mo(n){return("0"+n.toString(16)).substr(-2)}function Ht(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,mo).join("")}function po(n){return ft(this,void 0,void 0,function*(){const t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function yo(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Yt(n){return ft(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield po(n);return yo(e)})}class Mr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function ie(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class go extends Mr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function _o(n){return ie(n)&&n.name==="AuthApiError"}class qn extends Mr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Lt extends Mr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class At extends Lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class qt extends Lt{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class ze extends Lt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cr extends Lt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wr extends Lt{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var Lr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},bo=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Jt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),wo=(n,e)=>Lr(void 0,void 0,void 0,function*(){const t=[502,503,504];uo(n)?t.includes(n.status)?e(new wr(Jt(n),n.status)):n.json().then(r=>{e(new go(Jt(r),n.status||500))}).catch(r=>{e(new qn(Jt(r),r))}):e(new wr(Jt(n),0))}),Eo=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function oe(n,e,t,r){var s;return Lr(this,void 0,void 0,function*(){const i=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield So(n,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function So(n,e,t,r,s,i){return Lr(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Eo(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>wo(l,a))})})}function Qe(n){var e;let t=null;Ao(n)&&(t=Object.assign({},n),t.expires_at=lo(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ht(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function ko(n){return{data:n,error:null}}function To(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=bo(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Oo(n){return n}function Ao(n){return n.access_token&&n.refresh_token&&n.expires_in}var qe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})},Do=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class jo{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Yn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ht})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return qe(this,void 0,void 0,function*(){try{const{options:t}=e,r=Do(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),yield oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:To,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ie(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ht})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,r,s,i,o,a,l;return qe(this,void 0,void 0,function*(){try{const c={nextPage:null,lastPage:0,total:0},u=yield oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Oo});if(u.error)throw u.error;const f=yield u.json(),S=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return _.length>0&&(_.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(w.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(S)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ie(c))return{data:{users:[]},error:c};throw c}})}getUserById(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ht})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ht})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ht})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return qe(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}}const Po="2.27.0",Co="http://localhost:9999",Ro="supabase.auth.token",Io={"X-Client-Info":`gotrue-js/${Po}`},xo=10,Mo={getItem:n=>ar()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ar()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ar()&&globalThis.localStorage.removeItem(n)}};function Lo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Q=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};Lo();const Uo={url:Co,storageKey:Ro,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Io,flowType:"implicit"},ur=30*1e3,Fo=3;class No{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const r=Object.assign(Object.assign({},Uo),e);if(this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||Mo,this.admin=new jo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Yn(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",s=>{this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return Q(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=yield this._isPKCEFlow();if(this.detectSessionInUrl&&this._isImplicitGrantFlow()||e){const{data:t,error:r}=yield this._getSessionFromUrl(e);if(r)return yield this._removeSession(),{error:r};const{session:s,redirectType:i}=t;return yield this._saveSession(s),setTimeout(()=>{i==="recovery"?this._notifyAllSubscribers("PASSWORD_RECOVERY",s):this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return ie(e)?{error:e}:{error:new qn("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}})}signUp(e){var t,r,s;return Q(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:u,password:f,options:S}=e;let _=null,w=null;if(this.flowType==="pkce"){const v=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,v),_=yield Yt(v),w=v===_?"plain":"s256"}i=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:u,password:f,data:(t=S==null?void 0:S.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:_,code_challenge_method:w},xform:Qe})}else if("phone"in e){const{phone:u,password:f,options:S}=e;i=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},channel:(s=S==null?void 0:S.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Qe})}else throw new qt("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ie(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){return Q(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qe})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qe})}else throw new qt("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s||!r?{data:{user:null,session:null},error:s}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,r,s,i;return Q(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(e){return Q(this,void 0,void 0,function*(){const t=yield Bt(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:s}=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Qe});return yield lr(this.storage,`${this.storageKey}-code-verifier`),s||!r?{data:{user:null,session:null},error:s}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})})}signInWithIdToken(e){return Q(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:r,token:s,nonce:i}=e,o=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Qe}),{data:a,error:l}=o;return l||!a?{data:{user:null,session:null},error:l}:(a.session&&(yield this._saveSession(a.session),this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,r,s,i,o;return Q(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,u=null;if(this.flowType==="pkce"){const S=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,S),c=yield Yt(S),u=S===c?"plain":"s256"}const{error:f}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{error:c}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null},error:c}}throw new qt("You must provide either an email or phone number.")}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){var t,r;return Q(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:s,error:i}=yield oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Qe});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,a=s.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){var t,r,s;return Q(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:ko})}catch(i){if(ie(i))return{data:null,error:i};throw i}})}resend(e){return Q(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null},error:o}}throw new qt("You must provide either an email or phone number and a type")}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return Q(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const i=yield Bt(this.storage,this.storageKey);i!==null&&(this._isValidSession(i)?e=i:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:r,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}})}getUser(e){var t,r;return Q(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:i}=yield this.getSession();if(i)throw i;e=(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0}return yield oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ht})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}})}updateUser(e,t={}){return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();if(s)throw s;if(!r.session)throw new At;const i=r.session,{data:o,error:a}=yield oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:i.access_token,xform:ht});if(a)throw a;return i.user=o.user,yield this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}_decodeJWT(e){return Sn(e)}setSession(e){return Q(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new At;const t=Date.now()/1e3;let r=t,s=!0,i=null;const o=Sn(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:a,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=yield this.getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ie(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return Q(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:o}=yield this.getSession();if(o)throw o;e=(t=i.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new At;const{session:r,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(ie(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(e){return Q(this,void 0,void 0,function*(){try{if(!et())throw new ze("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new ze("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new cr("Not a valid PKCE flow url.");if(e){const y=Pe("code");if(!y)throw new cr("No code detected.");const{data:g,error:L}=yield this.exchangeCodeForSession(y);if(L)throw L;if(!g.session)throw new cr("No session detected.");let U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:g.session,redirectType:null},error:null}}const t=Pe("error_description");if(t){const y=Pe("error_code");if(!y)throw new ze("No error_code detected.");const g=Pe("error");throw g?new ze(t,{error:g,code:y}):new ze("No error detected.")}const r=Pe("provider_token"),s=Pe("provider_refresh_token"),i=Pe("access_token");if(!i)throw new ze("No access_token detected.");const o=Pe("expires_in");if(!o)throw new ze("No expires_in detected.");const a=Pe("refresh_token");if(!a)throw new ze("No refresh_token detected.");const l=Pe("token_type");if(!l)throw new ze("No token_type detected.");const u=Math.round(Date.now()/1e3)+parseInt(o),{data:f,error:S}=yield this.getUser(i);if(S)throw S;const _=f.user,w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:parseInt(o),expires_at:u,refresh_token:a,token_type:l,user:_},v=Pe("type");return window.location.hash="",{data:{session:w,redirectType:v},error:null}}catch(t){if(ie(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return et()&&(!!Pe("access_token")||!!Pe("error_description"))}_isPKCEFlow(){return Q(this,void 0,void 0,function*(){const e=yield Bt(this.storage,`${this.storageKey}-code-verifier`);return et()&&!!Pe("code")&&!!e})}signOut(){var e;return Q(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const s=(e=t.session)===null||e===void 0?void 0:e.access_token;if(s){const{error:i}=yield this.admin.signOut(s);if(i&&!(_o(i)&&(i.status===404||i.status===401)))return{error:i}}return yield this._removeSession(),yield lr(this.storage,`${this.storageKey}-code-verifier`),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=co(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),this.emitInitialSession(t),{data:{subscription:r}}}emitInitialSession(e){var t,r;return Q(this,void 0,void 0,function*(){try{const{data:{session:s},error:i}=yield this.getSession();if(i)throw i;(t=this.stateChangeEmitters.get(e))===null||t===void 0||t.callback("INITIAL_SESSION",s)}catch(s){(r=this.stateChangeEmitters.get(e))===null||r===void 0||r.callback("INITIAL_SESSION",null),console.error(s)}})}resetPasswordForEmail(e,t={}){return Q(this,void 0,void 0,function*(){let r=null,s=null;if(this.flowType==="pkce"){const i=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,i),r=yield Yt(i),s=i===r?"plain":"s256"}try{return yield oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ie(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return Q(this,void 0,void 0,function*(){try{const t=Date.now();return yield vo(r=>Q(this,void 0,void 0,function*(){return yield fo(r*200),yield oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qe})}),(r,s,i)=>i&&i.error&&i.error instanceof wr&&Date.now()+(r+1)*200-t<ur)}catch(t){if(ie(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return Q(this,void 0,void 0,function*(){const r=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return et()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){var e;return Q(this,void 0,void 0,function*(){try{const t=yield Bt(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+xo){if(this.autoRefreshToken&&t.refresh_token){const{error:s}=yield this._callRefreshToken(t.refresh_token);s&&(console.log(s.message),yield this._removeSession())}}else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return Q(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Qt,!e)throw new At;const{data:s,error:i}=yield this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new At;yield this._saveSession(s.session),this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(ie(s)){const i={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach(s=>s.callback(e,t))}_saveSession(e){return Q(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Ot(this.storage,this.storageKey,e)}_removeSession(){return Q(this,void 0,void 0,function*(){this.persistSession?yield lr(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return Q(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const e=setInterval(()=>this._autoRefreshTokenTick(),ur);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return Q(this,void 0,void 0,function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return Q(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return Q(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return Q(this,void 0,void 0,function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((t.expires_at*1e3-e)/ur)<Fo&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}})}_handleVisibilityChange(){return Q(this,void 0,void 0,function*(){if(!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>Q(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return Q(this,void 0,void 0,function*(){document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return Q(this,void 0,void 0,function*(){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,s);const i=yield Yt(s),o=s===i?"plain":"s256",a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return`${this.url}/authorize?${r.join("&")}`})}_unenroll(e){var t;return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();return s?{data:null,error:s}:yield oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(ie(r))return{data:null,error:r};throw r}})}_enroll(e){var t,r;return Q(this,void 0,void 0,function*(){try{const{data:s,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:o,error:a}=yield oe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=s==null?void 0:s.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}_verify(e){var t;return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:i,error:o}=yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}catch(r){if(ie(r))return{data:null,error:r};throw r}})}_challenge(e){var t;return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();return s?{data:null,error:s}:yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(ie(r))return{data:null,error:r};throw r}})}_challengeAndVerify(e){return Q(this,void 0,void 0,function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return Q(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return Q(this,void 0,void 0,function*(){const{data:{session:r},error:s}=yield this.getSession();if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}})}}class $o extends No{constructor(e){super(e)}}var Bo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const Ho={headers:to},Yo={schema:"public"},qo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jo={};class zo{constructor(e,t,r){var s,i,o,a,l,c,u,f;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const S=oo(e);if(this.realtimeUrl=`${S}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${S}/auth/v1`,this.storageUrl=`${S}/storage/v1`,S.match(/(supabase\.co)|(supabase\.in)/)){const g=S.split(".");this.functionsUrl=`${g[0]}.functions.${g[1]}.${g[2]}`}else this.functionsUrl=`${S}/functions/v1`;const w=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:Yo,realtime:Jo,auth:Object.assign(Object.assign({},qo),{storageKey:w}),global:Ho},y=ao(r??{},v);this.storageKey=(i=(s=y.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=y.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=y.auth)!==null&&l!==void 0?l:{},this.headers,(c=y.global)===null||c===void 0?void 0:c.fetch),this.fetch=io(t,this._getAccessToken.bind(this),(u=y.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new ai(`${S}/rest/v1`,{headers:this.headers,schema:(f=y.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ti(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Qi(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Bo(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $o({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,fetch:l})}_initRealtimeClient(e){return new Hi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wo=(n,e,t)=>new zo(n,e,t),aa=Wo("https://weaughxswjpwirdjraab.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndlYXVnaHhzd2pwd2lyZGpyYWFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODM5NDc4NTcsImV4cCI6MTk5OTUyMzg1N30.hB8oikmuFAR1AyhmydMqRTKc-gw3QK8aLbOZzpTl2Wk");function kn(n){let e,t,r,s,i,o,a,l,c,u,f,S,_,w,v,y,g,L,U,T,N,R,G,Y,B;return{c(){e=W("nav"),t=W("button"),r=Ce("svg"),s=Ce("path"),i=Oe("Open Form"),o=ue(),a=W("a"),l=Ce("svg"),c=Ce("path"),u=Oe("Home"),f=ue(),S=W("a"),_=Ce("svg"),w=Ce("path"),v=Oe("Table"),y=ue(),g=W("a"),L=Oe("Green Tara"),U=ue(),T=W("a"),N=Oe("Guru Rinpoche"),this.h()},l(F){e=K(F,"NAV",{class:!0});var I=H(e);t=K(I,"BUTTON",{class:!0});var V=H(t);r=Re(V,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var M=H(r);s=Re(M,"path",{fill:!0,d:!0}),H(s).forEach(x),M.forEach(x),i=Ae(V,"Open Form"),V.forEach(x),o=he(I),a=K(I,"A",{href:!0,class:!0});var d=H(a);l=Re(d,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var m=H(l);c=Re(m,"path",{fill:!0,d:!0}),H(c).forEach(x),m.forEach(x),u=Ae(d,"Home"),d.forEach(x),f=he(I),S=K(I,"A",{href:!0,class:!0});var h=H(S);_=Re(h,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var b=H(_);w=Re(b,"path",{fill:!0,d:!0}),H(w).forEach(x),b.forEach(x),v=Ae(h,"Table"),h.forEach(x),y=he(I),g=K(I,"A",{href:!0,class:!0});var D=H(g);L=Ae(D,"Green Tara"),D.forEach(x),U=he(I),T=K(I,"A",{href:!0,class:!0});var p=H(T);N=Ae(p,"Guru Rinpoche"),p.forEach(x),I.forEach(x),this.h()},h(){k(s,"fill","currentColor"),k(s,"d","M6 22q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V11.1l-8 7.975V22H6Zm8.5 0q-.2 0-.35-.15T14 21.5v-1.2q0-.2.088-.4t.212-.325l4.85-4.875l2.15 2.1l-4.875 4.9q-.125.15-.325.225t-.4.075h-1.2Zm7.525-5.9L19.9 13.975l.7-.7q.3-.3.725-.3t.7.3l.7.725q.275.3.275.713t-.275.687l-.7.7ZM14 9h4l-5-5v4q0 .425.288.713T14 9Z"),k(r,"xmlns","http://www.w3.org/2000/svg"),k(r,"width","16"),k(r,"height","16"),k(r,"viewBox","0 0 24 24"),k(t,"class","py-2 px-4 cursor-pointer rounded-md flex-center border-none gap-2 hover:border-gray bg-white hover:border-gray-900 hover:shadow transition-all ease-in dark:bg-gray-500 text-dark-600 dark:text-white"),k(c,"fill","currentColor"),k(c,"d","M4 21V9l8-6l8 6v12h-6v-7h-4v7H4Z"),k(l,"xmlns","http://www.w3.org/2000/svg"),k(l,"width","16"),k(l,"height","16"),k(l,"viewBox","0 0 24 24"),k(a,"href",Ft+"/"),k(a,"class","py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in dark:bg-gray-500 text-dark-600 dark:text-white"),k(w,"fill","currentColor"),k(w,"d","M3 8V3h19v5H3Zm5 2v11H3V10h5Zm14 11h-5V10h5v11Zm-7-11v11h-5V10h5Z"),k(_,"xmlns","http://www.w3.org/2000/svg"),k(_,"width","16"),k(_,"height","16"),k(_,"viewBox","0 0 24 24"),k(S,"href",Ft+"/table"),k(S,"class","py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray text-dark-600 bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in dark:bg-gray-500 text-dark-600 dark:text-white"),k(g,"href",Ft+"/tara"),k(g,"class","py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in dark:bg-gray-500 text-dark-600 dark:text-white"),k(T,"href",Ft+"/guru_rinpoche"),k(T,"class","py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in dark:bg-gray-500 text-dark-600 dark:text-white"),k(e,"class","absolute gap-1 bottom-16 text-xs md:text-sm md:bottom-21 right-2 rounded-md cursor-pointer p-4 flex flex-col border-gray-900 shadow border-2 min-w-[8rem] bg-white dark:bg-gray-500")},m(F,I){ge(F,e,I),P(e,t),P(t,r),P(r,s),P(t,i),P(e,o),P(e,a),P(a,l),P(l,c),P(a,u),P(e,f),P(e,S),P(S,_),P(_,w),P(S,v),P(e,y),P(e,g),P(g,L),P(e,U),P(e,T),P(T,N),G=!0,Y||(B=we(t,"click",n[2]),Y=!0)},p:hr,i(F){G||(Sr(()=>{G&&(R||(R=_t(e,zt,{},!0)),R.run(1))}),G=!0)},o(F){R||(R=_t(e,zt,{},!1)),R.run(0),G=!1},d(F){F&&x(e),F&&R&&R.end(),Y=!1,B()}}}function Ko(n){let e,t,r,s,i,o,a,l,c,u,f,S,_,w,v,y,g,L,U,T=n[0]&&kn(n);return{c(){T&&T.c(),e=ue(),t=W("div"),r=W("nav"),s=W("button"),i=W("span"),o=Oe("Open main"),a=ue(),l=W("div"),c=W("span"),f=ue(),S=W("span"),w=ue(),v=W("span"),this.h()},l(N){T&&T.l(N),e=he(N),t=K(N,"DIV",{class:!0});var R=H(t);r=K(R,"NAV",{});var G=H(r);s=K(G,"BUTTON",{class:!0});var Y=H(s);i=K(Y,"SPAN",{class:!0});var B=H(i);o=Ae(B,"Open main"),B.forEach(x),a=he(Y),l=K(Y,"DIV",{class:!0});var F=H(l);c=K(F,"SPAN",{"aria-hidden":!0,class:!0}),H(c).forEach(x),f=he(F),S=K(F,"SPAN",{"aria-hidden":!0,class:!0}),H(S).forEach(x),w=he(F),v=K(F,"SPAN",{"aria-hidden":!0,class:!0}),H(v).forEach(x),F.forEach(x),Y.forEach(x),G.forEach(x),R.forEach(x),this.h()},h(){k(i,"class","sr-only"),k(c,"aria-hidden","true"),k(c,"class",u="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(n[0]?"rotate-45":" -translate-y-1.5")),k(S,"aria-hidden","true"),k(S,"class",_="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(n[0]?"opacity-0":"")),k(v,"aria-hidden","true"),k(v,"class",y="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(n[0]?"-rotate-45":" translate-y-1.5")),k(l,"class","block w-5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"),k(s,"class","rounded-full text-gray-500 w-10 h-10 md:w-14 md:h-14 relative focus:outline-none bg-white cursor-pointer"),k(t,"class","absolute bottom-1 right-1 sm:right-2 py-3 sm:max-w-xl mx-auto")},m(N,R){T&&T.m(N,R),ge(N,e,R),ge(N,t,R),P(t,r),P(r,s),P(s,i),P(i,o),P(s,a),P(s,l),P(l,c),P(l,f),P(l,S),P(l,w),P(l,v),g=!0,L||(U=we(s,"click",n[3]),L=!0)},p(N,[R]){N[0]?T?(T.p(N,R),R&1&&Je(T,1)):(T=kn(N),T.c(),Je(T,1),T.m(e.parentNode,e)):T&&(An(),nt(T,1,1,()=>{T=null}),Dn()),(!g||R&1&&u!==(u="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(N[0]?"rotate-45":" -translate-y-1.5")))&&k(c,"class",u),(!g||R&1&&_!==(_="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(N[0]?"opacity-0":"")))&&k(S,"class",_),(!g||R&1&&y!==(y="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(N[0]?"-rotate-45":" translate-y-1.5")))&&k(v,"class",y)},i(N){g||(Je(T),g=!0)},o(N){nt(T),g=!1},d(N){T&&T.d(N),N&&x(e),N&&x(t),L=!1,U()}}}function Go(n,e,t){let{menuVisible:r,visible:s}=e;const i=()=>(t(1,s=!s),t(0,r=!1)),o=()=>t(0,r=!r);return n.$$set=a=>{"menuVisible"in a&&t(0,r=a.menuVisible),"visible"in a&&t(1,s=a.visible)},[r,s,i,o]}class la extends bt{constructor(e){super(),wt(this,e,Go,Ko,Et,{menuVisible:0,visible:1})}}function Vo(n){let e,t,r,s,i,o,a,l,c,u,f,S,_;const w=n[5].default,v=kr(w,n,n[4],null);return{c(){e=W("div"),t=ue(),r=W("form"),v&&v.c(),s=ue(),i=W("button"),o=W("span"),a=ue(),l=W("span"),c=Oe("Submit"),this.h()},l(y){e=K(y,"DIV",{class:!0,backdrop:!0}),H(e).forEach(x),t=he(y),r=K(y,"FORM",{class:!0,grid:!0});var g=H(r);v&&v.l(g),s=he(g),i=K(g,"BUTTON",{type:!0,class:!0});var L=H(i);o=K(L,"SPAN",{class:!0}),H(o).forEach(x),a=he(L),l=K(L,"SPAN",{class:!0});var U=H(l);c=Ae(U,"Submit"),U.forEach(x),L.forEach(x),g.forEach(x),this.h()},h(){k(e,"class","absolute top-0 left-0 bottom-0 right-0 cursor-pointer"),k(e,"backdrop","blur-md brightness-75"),k(o,"class","absolute inset-0 border-0 group-hover:border-[25px] ease-linear duration-100 transition-all border-white rounded-full"),k(l,"class","relative w-full text-left text-base text-white transition-colors duration-200 ease-in-out group-hover:text-green-600 text-lg"),k(i,"type","submit"),k(i,"class","relative inline-flex items-center justify-start inline-block px-8 py-4 overflow-hidden font-medium transition-all bg-green-600 rounded-full hover:bg-white group cursor-pointer col-start-1 row-start-5 justify-self-start self-center"),k(r,"class","bg-dark-500 px-10 py-16 rounded gap-4 text-white grid absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"),k(r,"grid","cols-[1fr_1fr] rows-4")},m(y,g){ge(y,e,g),ge(y,t,g),ge(y,r,g),v&&v.m(r,null),P(r,s),P(r,i),P(i,o),P(i,a),P(i,l),P(l,c),f=!0,S||(_=[we(e,"click",n[6]),ts(n[1].call(null,r))],S=!0)},p(y,[g]){v&&v.p&&(!f||g&16)&&Tr(v,w,y,y[4],f?Ar(w,y[4],g,null):Or(y[4]),null)},i(y){f||(Je(v,y),Sr(()=>{f&&(u||(u=_t(r,Hr,{duration:500},!0)),u.run(1))}),f=!0)},o(y){nt(v,y),u||(u=_t(r,Hr,{duration:500},!1)),u.run(0),f=!1},d(y){y&&x(e),y&&x(t),y&&x(r),v&&v.d(y),y&&u&&u.end(),S=!1,Er(_)}}}function Zo(n,e,t){let{$$slots:r={},$$scope:s}=e,{visible:i,buttonColor:o,form:a,gridClasses:l}=e;const c=()=>t(0,i=!1);return n.$$set=u=>{"visible"in u&&t(0,i=u.visible),"buttonColor"in u&&t(2,o=u.buttonColor),"form"in u&&t(1,a=u.form),"gridClasses"in u&&t(3,l=u.gridClasses),"$$scope"in u&&t(4,s=u.$$scope)},[i,a,o,l,s,r,c]}class ca extends bt{constructor(e){super(),wt(this,e,Zo,Vo,Et,{visible:0,buttonColor:2,form:1,gridClasses:3})}}export{sa as D,la as O,ia as S,ca as a,oa as b,na as c,fn as d,aa as s};
