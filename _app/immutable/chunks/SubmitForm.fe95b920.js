import{w as En}from"./index.4e7134ab.js";import{a0 as qn,S as bt,i as wt,s as St,k as W,M as Ce,a as ce,l as K,m as H,N as Re,h as M,c as he,n as T,b as ge,D as P,a1 as Ut,a2 as we,K as hr,R as lt,a3 as wr,a4 as Tn,q as Oe,r as Ae,u as st,e as Ur,a5 as Jn,Z as $e,g as Je,v as kn,d as nt,f as On,L as Fr,w as zn,P as Wn,y as Kn,z as Gn,A as Vn,Q as Zn,I as Sr,J as _t,B as Xn,E as Er,O as Nr,p as dr,F as Tr,G as kr,H as Or,a6 as Qn}from"./index.5b671a4c.js";import{c as $r,a as zt,f as Br}from"./index.9054fda5.js";import{_ as Kt}from"./preload-helper.41c905a7.js";import{b as Ft}from"./paths.f559539e.js";function es(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ts(n,...e){const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function We(n){let e;return ts(n,t=>e=t)(),e}class rs extends Error{constructor(e,t){super(e),this.name="FelteSubmitError",this.response=t}}function ns(n,e){return Object.keys(n).some(r=>e(n[r]))}function Gt(n,e){return Object.keys(n||{}).reduce((r,s)=>Object.assign(Object.assign({},r),{[s]:e(n[s])}),{})}function ne(n){return Object.prototype.toString.call(n)==="[object Object]"}function Ie(n){return Object.keys(n||{}).reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:ne(n[t])?Ie(n[t]):Array.isArray(n[t])?[...n[t]]:n[t]}),{})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ss(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function is(n){return function(e){if(ne(e)){const t=xe(e,n);return ss(t,["key"])}return n}}function xe(n,e){return Gt(n,t=>ne(t)?xe(t,e):Array.isArray(t)?t.map(is(e)):e)}function rt(...n){const e=n.pop(),t=n.shift();if(typeof t=="string")return t;const r=Ie(t);if(n.length===0)return r;for(const s of n){if(!s)continue;if(typeof s=="string")return s;let i=e(r,s);if(typeof i<"u")return i;const o=Array.from(new Set(Object.keys(r).concat(Object.keys(s))));for(const a of o)if(i=e(r[a],s[a]),typeof i<"u")r[a]=i;else if(ne(s[a])&&ne(r[a]))r[a]=rt(r[a],s[a],e);else if(Array.isArray(s[a]))r[a]=s[a].map((l,u)=>{if(!ne(l))return l;const c=Array.isArray(r[a])?r[a][u]:r[a];return rt(c,l,e)});else if(ne(s[a])){const l=xe(Ie(s[a]),void 0);r[a]=rt(l,s[a],e)}else typeof s[a]<"u"&&(r[a]=s[a])}return r}function os(n,e){if(!(ne(n)&&ne(e))){if(Array.isArray(e)){if(e.some(ne))return;const t=Array.isArray(n)?n:[];return e.map((r,s)=>{var i;return(i=t[s])!==null&&i!==void 0?i:r})}if(typeof n<"u")return n}}function Hr(...n){return rt(...n,os)}function An(...n){return rt(...n,()=>{})}function Ge(n,e,t){const r=i=>String.prototype.split.call(e,i).filter(Boolean).reduce((o,a)=>o!=null?o[a]:o,n),s=r(/[,[\]]+?/)||r(/[,[\].]+?/);return s===void 0||s===n?t:s}function Mt(n,e,t){n&&(n=Ie(n)),ne(n)||(n={});const r=Array.isArray(e)?e:e.match(/[^.[\]]+/g)||[],s=r[r.length-1];if(!s)return n;let i=n;for(let o=0;o<r.length-1;o++){const a=r[o];if(!i[a]||!ne(i[a])&&!Array.isArray(i[a])){const l=r[o+1];isNaN(Number(l))?i[a]={}:i[a]=[]}i=i[a]}return i[s]=t(i[s]),n}function ue(n,e,t){return Mt(n,e,()=>t)}function Dt(n,e){if(!n||Object(n)!==n)return;typeof n<"u"&&(n=Ie(n));const t=Array.isArray(e)?e:e.toString().match(/[^.[\]]+/g)||[],r=t.length===1?n:Ge(n,t.slice(0,-1).join("."));return Array.isArray(r)?r.splice(Number(t[t.length-1]),1):r==null||delete r[t[t.length-1]],n}function Rt(n,e){return ns(n,t=>ne(t)?Rt(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e(t):t.some(r=>ne(r)?Rt(r,e):e(r)):e(t))}function yt(n){return(n==null?void 0:n.nodeName)==="INPUT"}function as(n){return(n==null?void 0:n.nodeName)==="TEXTAREA"}function gt(n){return(n==null?void 0:n.nodeName)==="SELECT"}function Vt(n){return(n==null?void 0:n.nodeName)==="FIELDSET"}function Se(n){return yt(n)||as(n)||gt(n)}function Yr(n){return n.nodeType===Node.ELEMENT_NODE}function be(n,e){return e??(Se(n)?n.name:"")}function er(n){let e=n;for(;e&&e.nodeName!=="FORM";){if(e.hasAttribute("data-felte-ignore"))return!0;e=e.parentElement}return!1}function ls(n,e){if(!(ne(n)||ne(e))){if(n===null||n==="")return e;if(e===null||e===""||!e)return n;if(!(!n||!e)){if(Array.isArray(n)){if(!Array.isArray(e))return[...n,e];const t=[],r=Math.max(e.length,n.length);for(let s=0;s<r;s++){let i=n[s],o=e[s];!ne(i)&&!ne(o)?(Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]),t.push(...i,...o)):t.push(mt([i??{},o??{}]))}return t.filter(Boolean)}return Array.isArray(e)||(e=[e]),[n,...e].reduce((t,r)=>t.concat(r),[]).filter(Boolean)}}}function mt(n){return rt(...n,ls)}function us(n,e){return e?(Array.isArray(e)?e:[e]).map(r=>r(n)):[]}function fr(n,e){return e?Array.isArray(e)?e.reduce((t,r)=>r(t),n):e(n):n}function Dn(n=8){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<n;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Wt(n,e,{onInit:t,onEnd:r}={}){let s;return(...i)=>{s||t==null||t(),s&&clearTimeout(s),s=setTimeout(()=>{n.apply(this,i),s=void 0,r==null||r()},e)}}function vr(n){if(Se(n))return[n];if(n.childElementCount===0)return[];const e=new Set;for(const t of n.children){if(Se(t)&&e.add(t),Vt(t))for(const r of t.elements)Se(r)&&e.add(r);t.childElementCount>0&&vr(t).forEach(r=>e.add(r))}return Array.from(e)}function jn(n){for(const e of n.elements)!Se(e)&&!Vt(e)||n.hasAttribute("data-felte-keep-on-remove")&&!e.hasAttribute("data-felte-keep-on-remove")&&(e.dataset.felteKeepOnRemove=n.dataset.felteKeepOnRemove)}function Pn(n){return n.type.match(/^(number|range)$/)?n.value?+n.value:void 0:n.value}function qr(n){var e;let t={},r={};for(const s of n.elements){if(Vt(s)&&jn(s),!Se(s)||!s.name)continue;const i=be(s);if(yt(s)){if(s.type==="checkbox"){if(typeof Ge(t,i)>"u"){if(Array.from(n.querySelectorAll(`[name="${s.name}"]`)).filter(l=>Se(l)?i===be(l):!1).length===1){t=ue(t,i,s.checked),r=ue(r,i,!1);continue}t=ue(t,i,s.checked?[s.value]:[]),r=ue(r,i,!1);continue}Array.isArray(Ge(t,i))&&s.checked&&(t=Mt(t,i,a=>[...a,s.value]));continue}if(s.type==="radio"){if(Ge(t,i))continue;t=ue(t,i,s.checked?s.value:void 0),r=ue(r,i,!1);continue}if(s.type==="file"){t=ue(t,i,s.multiple?Array.from(s.files||[]):(e=s.files)===null||e===void 0?void 0:e[0]),r=ue(r,i,!1);continue}}else if(gt(s)){if(!s.multiple)t=ue(t,i,s.value);else{const l=Array.from(s.options).filter(u=>u.selected).map(u=>u.value);t=ue(t,i,l)}r=ue(r,i,!1);continue}const o=Pn(s);t=ue(t,i,o),r=ue(r,i,!1)}return{defaultData:t,defaultTouched:r}}function cs(n,e){var t;if(!Se(n))return;const r=e;if(yt(n)){if(n.type==="checkbox"){const s=r;if(typeof s>"u"||typeof s=="boolean"){n.checked=!!s;return}Array.isArray(s)&&(s.includes(n.value)?n.checked=!0:n.checked=!1);return}if(n.type==="radio"){const s=r;n.value===s?n.checked=!0:n.checked=!1;return}if(n.type==="file"){n.files=null,n.value="";return}}else if(gt(n)){if(n.multiple){if(Array.isArray(r)){n.value=String((t=r[0])!==null&&t!==void 0?t:"");const i=r.map(o=>String(o));for(const o of n.options)i.includes(o.value)?o.selected=!0:o.selected=!1}}else{n.value=String(r??"");for(const i of n.options)i.value===String(r)?i.selected=!0:i.selected=!1}return}n.value=String(r??"")}function Nt(n,e){for(const t of n.elements){if(Vt(t)&&jn(t),!Se(t)||!t.name)continue;const r=be(t);cs(t,Ge(e,r))}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Cn(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Ke(n,e){return Gt(n,t=>ne(t)?Ke(t,e):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?e:t.map(r=>{const s=Ke(r,e);return Cn(s,["key"])}):e)}function Ve(n){return n?Gt(n,e=>ne(e)?Ve(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!ne(t))return t;const r=Ve(t);return r.key||(r.key=Dn()),r}):e):{}}function jt(n){return n?Gt(n,e=>ne(e)?Ve(e):Array.isArray(e)?e.length===0||e.every(t=>typeof t=="string")?e:e.map(t=>{if(!ne(t))return t;const r=Ve(t);return Cn(r,["key"])}):e):{}}function hs(){class n extends CustomEvent{constructor(s){super("feltesuccess",{detail:s})}}class e extends CustomEvent{constructor(s){super("felteerror",{detail:s,cancelable:!0})}setErrors(s){this.preventDefault(),this.errors=s}}class t extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(s){this.onSubmit=s}handleError(s){this.onError=s}handleSuccess(s){this.onSuccess=s}}return{createErrorEvent:r=>new e(r),createSubmitEvent:()=>new t,createSuccessEvent:r=>new n(r)}}function ds(n){if(n)return async function(){let t=new FormData(n);const r=new URL(n.action),s=n.method.toLowerCase()==="get"?"get":r.searchParams.get("_method")||n.method;let i=n.enctype;n.querySelector('input[type="file"]')&&(i="multipart/form-data"),(s==="get"||i==="application/x-www-form-urlencoded")&&(t=new URLSearchParams(t));let o;s==="get"?(t.forEach((l,u)=>{r.searchParams.append(u,l)}),o={method:s,headers:{Accept:"application/json"}}):o={method:s,body:t,headers:Object.assign(Object.assign({},i!=="multipart/form-data"&&{"Content-Type":i}),{Accept:"application/json"})};const a=await window.fetch(r.toString(),o);if(a.ok)return a;throw new rs("An error occurred while submitting the form",a)}}function $t(n,e,t,r){return Mt(n,e,s=>(typeof s<"u"&&!Array.isArray(s)||(s||(s=[]),typeof r>"u"?s.push(t):s.splice(r,0,t)),s))}function fs(n,e,t,r){return Mt(n,e,s=>(!s||!Array.isArray(s)||([s[t],s[r]]=[s[r],s[t]]),s))}function vs(n,e,t,r){return Mt(n,e,s=>(!s||!Array.isArray(s)||s.splice(r,0,s.splice(t,1)[0]),s))}function Jr(n){return typeof n=="function"}function Xe(n){return(t,r)=>{if(typeof t=="string"){const s=t;n(i=>{const o=Jr(r)?r(Ge(i,s)):r;return ue(i,s,o)})}else n(s=>Jr(t)?t(s):t)}}function ms({stores:n,config:e,validateErrors:t,validateWarnings:r,_getCurrentExtenders:s}){var i;let o,a=Ve((i=e.initialValues)!==null&&i!==void 0?i:{});const{data:l,touched:u,errors:c,warnings:f,isDirty:S,isSubmitting:_,interacted:w}=n,v=Xe(l.update),g=Xe(u.update),y=Xe(c.update),R=Xe(f.update);function U(p){v(C=>{const j=p(C);return o&&Nt(o,j),j})}const k=(p,C,j)=>{Xe(U)(p,C),typeof p=="string"&&j&&g(p,!0)};function N(p,C,j){const q=ne(C)?Ke(C,!1):!1,J=ne(q)?xe(q,[]):[];C=ne(C)?Object.assign(Object.assign({},C),{key:Dn()}):C,c.update(re=>$t(re,p,J,j)),f.update(re=>$t(re,p,J,j)),u.update(re=>$t(re,p,q,j)),l.update(re=>{const ee=$t(re,p,C,j);return setTimeout(()=>o&&Nt(o,ee)),ee})}function I(p){c.update(p),f.update(p),u.update(p),l.update(C=>{const j=p(C);return setTimeout(()=>o&&Nt(o,j)),j})}function G(p){I(C=>Dt(C,p))}function Y(p,C,j){I(q=>fs(q,p,C,j))}function B(p,C,j){I(q=>vs(q,p,C,j))}function F(p){const C=Ge(a,p),j=ne(C)?Ke(C,!1):!1,q=ne(j)?xe(j,[]):[];l.update(J=>{const re=ue(J,p,C);return o&&Nt(o,re),re}),u.update(J=>ue(J,p,j)),c.update(J=>ue(J,p,q)),f.update(J=>ue(J,p,q))}const x=Xe(_.update),V=Xe(S.update),L=Xe(w.update);async function d(){const p=We(l);u.set(Ke(p,!0)),w.set(null);const C=await t(p);return await r(p),C}function m(){k(Ie(a)),g(p=>xe(p,!1)),w.set(null),S.set(!1)}function h(p){return async function(j){var q,J,re,ee,fe,se,A;const{createErrorEvent:Z,createSubmitEvent:E,createSuccessEvent:X}=hs(),me=E();o==null||o.dispatchEvent(me);const $=(J=(q=me.onError)!==null&&q!==void 0?q:p==null?void 0:p.onError)!==null&&J!==void 0?J:e.onError,O=(ee=(re=me.onSuccess)!==null&&re!==void 0?re:p==null?void 0:p.onSuccess)!==null&&ee!==void 0?ee:e.onSuccess,z=(A=(se=(fe=me.onSubmit)!==null&&fe!==void 0?fe:p==null?void 0:p.onSubmit)!==null&&se!==void 0?se:e.onSubmit)!==null&&A!==void 0?A:ds(o);if(!z||(j==null||j.preventDefault(),me.defaultPrevented))return;_.set(!0),w.set(null);const te=jt(We(l)),_e=await t(te,p==null?void 0:p.validate),Te=await r(te,p==null?void 0:p.warn);if(Te&&f.set(An(xe(te,[]),Te)),u.set(Ke(te,!0)),_e&&(u.set(Ke(_e,!0)),Rt(_e,ye=>Array.isArray(ye)?ye.length>=1:!!ye))){await new Promise(ye=>setTimeout(ye)),s().forEach(ye=>{var De;return(De=ye.onSubmitError)===null||De===void 0?void 0:De.call(ye,{data:te,errors:_e})}),_.set(!1);return}const Me={setFields:k,setData:v,setTouched:g,setErrors:y,setWarnings:R,unsetField:G,addField:N,resetField:F,reset:m,setInitialValues:b.setInitialValues,moveField:B,swapFields:Y,form:o,controls:o&&Array.from(o.elements).filter(Se),config:Object.assign(Object.assign({},e),p)};try{const pe=await z(te,Me);o==null||o.dispatchEvent(X(Object.assign({response:pe},Me))),await(O==null?void 0:O(pe,Me))}catch(pe){const ye=Z(Object.assign({error:pe},Me));if(o==null||o.dispatchEvent(ye),!$&&!ye.defaultPrevented)throw pe;if(!$&&!ye.errors)return;const De=ye.errors||await($==null?void 0:$(pe,Me));De&&(u.set(Ke(De,!0)),c.set(De),await new Promise(Le=>setTimeout(Le)),s().forEach(Le=>{var Be;return(Be=Le.onSubmitError)===null||Be===void 0?void 0:Be.call(Le,{data:te,errors:We(c)})}))}finally{_.set(!1)}}}const b={setData:v,setFields:k,setTouched:g,setErrors:y,setWarnings:R,setIsSubmitting:x,setIsDirty:V,setInteracted:L,validate:d,reset:m,unsetField:G,resetField:F,addField:N,swapFields:Y,moveField:B,createSubmitHandler:h,handleSubmit:h(),setInitialValues:p=>{a=Ve(p)}};return{public:b,private:{_setFormNode(p){o=p},_getInitialValues:()=>a}}}function ps({helpers:n,stores:e,config:t,extender:r,createSubmitHandler:s,handleSubmit:i,_setFormNode:o,_getInitialValues:a,_setCurrentExtenders:l,_getCurrentExtenders:u}){const{setFields:c,setTouched:f,reset:S,setInitialValues:_}=n,{addValidator:w,addTransformer:v,validate:g}=n,{data:y,errors:R,warnings:U,touched:k,isSubmitting:N,isDirty:I,interacted:G,isValid:Y,isValidating:B}=e;function F(x){x.requestSubmit||(x.requestSubmit=i);function V($){return function(O){return O({form:x,stage:$,controls:Array.from(x.elements).filter(Se),data:y,errors:R,warnings:U,touched:k,isValid:Y,isValidating:B,isSubmitting:N,isDirty:I,interacted:G,config:t,addValidator:w,addTransformer:v,setFields:c,validate:g,reset:S,createSubmitHandler:s,handleSubmit:i})}}l(r.map(V("MOUNT"))),x.noValidate=!!t.validate;const{defaultData:L,defaultTouched:d}=qr(x);o(x),_(An(Ie(L),a())),c(a()),k.set(d);function m($){const O=be($),z=Array.from(x.querySelectorAll(`[name="${$.name}"]`)).filter(te=>Se(te)?O===be(te):!1);if(z.length!==0)return z.length===1?y.update(te=>ue(te,be($),$.checked)):y.update(te=>ue(te,be($),z.filter(yt).filter(_e=>_e.checked).map(_e=>_e.value)))}function h($){const O=x.querySelectorAll(`[name="${$.name}"]`),z=Array.from(O).find(te=>yt(te)&&te.checked);y.update(te=>ue(te,be($),z==null?void 0:z.value))}function b($){var O;const z=Array.from((O=$.files)!==null&&O!==void 0?O:[]);y.update(te=>ue(te,be($),$.multiple?z:z[0]))}function D($){if(!$.multiple)y.update(O=>ue(O,be($),$.value));else{const O=Array.from($.options).filter(z=>z.selected).map(z=>z.value);y.update(z=>ue(z,be($),O))}}function p($){const O=$.target;if(!O||!Se(O)||gt(O)||er(O)||["checkbox","radio","file"].includes(O.type)||!O.name)return;I.set(!0);const z=Pn(O);G.set(O.name),y.update(te=>ue(te,be(O),z))}function C($){const O=$.target;if(!(!O||!Se(O)||er(O))&&O.name)if(f(be(O),!0),G.set(O.name),(gt(O)||["checkbox","radio","file","hidden"].includes(O.type))&&I.set(!0),O.type==="hidden"&&y.update(z=>ue(z,be(O),O.value)),gt(O))D(O);else if(yt(O))O.type==="checkbox"?m(O):O.type==="radio"?h(O):O.type==="file"&&b(O);else return}function j($){const O=$.target;!O||!Se(O)||er(O)||O.name&&(f(be(O),!0),G.set(O.name))}function q($){$.preventDefault(),S()}const J={childList:!0,subtree:!0};function re($){let O=We(y),z=We(k),te=We(R),_e=We(U);for(const Te of $.reverse()){if(Te.hasAttribute("data-felte-keep-on-remove")&&Te.dataset.felteKeepOnRemove!=="false")continue;const Me=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let pe=be(Te);const ye=We(k);if(Me.test(pe)){const Le=pe.split(".").slice(0,-1).join("."),Be=Ge(ye,Le);ne(Be)&&Object.keys(Be).length<=1&&(pe=Le)}O=Dt(O,pe),z=Dt(z,pe),te=Dt(te,pe),_e=Dt(_e,pe)}y.set(O),k.set(z),R.set(te),U.set(_e)}const ee=Wt(()=>{u().forEach(z=>{var te;return(te=z.destroy)===null||te===void 0?void 0:te.call(z)}),l(r.map(V("UPDATE")));const{defaultData:$,defaultTouched:O}=qr(x);y.update(z=>Hr(z,$)),k.update(z=>Hr(z,O)),n.setFields(We(y))},0);let fe=[];const se=Wt(()=>{u().forEach($=>{var O;return(O=$.destroy)===null||O===void 0?void 0:O.call($)}),l(r.map(V("UPDATE"))),re(fe),fe=[]},0);function A($){Array.from($.addedNodes).some(z=>Yr(z)?Se(z)?!0:vr(z).length>0:!1)&&ee()}function Z($){for(const O of $.removedNodes){if(!Yr(O))continue;const z=vr(O);z.length!==0&&(fe.push(...z),se())}}function E($){for(const O of $)O.type==="childList"&&(O.addedNodes.length>0&&A(O),O.removedNodes.length>0&&Z(O))}const X=new MutationObserver(E);X.observe(x,J),x.addEventListener("input",p),x.addEventListener("change",C),x.addEventListener("focusout",j),x.addEventListener("submit",i),x.addEventListener("reset",q);const me=R.subscribe($=>{for(const O of x.elements){if(!Se(O)||!O.name)continue;const z=Ge($,be(O)),te=Array.isArray(z)?z.join(`
`):typeof z=="string"?z:void 0;te!==O.dataset.felteValidationMessage&&(te?(O.dataset.felteValidationMessage=te,O.setAttribute("aria-invalid","true")):(delete O.dataset.felteValidationMessage,O.removeAttribute("aria-invalid")))}});return{destroy(){X.disconnect(),x.removeEventListener("input",p),x.removeEventListener("change",C),x.removeEventListener("focusout",j),x.removeEventListener("submit",i),x.removeEventListener("reset",q),me(),u().forEach($=>{var O;return(O=$.destroy)===null||O===void 0?void 0:O.call($)})}}}return{form:F}}function ys(n){const e={aborted:!1,priority:n};return{signal:e,abort(){e.aborted=!0}}}function gs(n,e){if(ne(n))return!e||ne(e)&&Object.keys(e).length===0?xe(n,null):void 0;if(Array.isArray(n)){if(n.some(ne))return;const t=Array.isArray(e)?e:[];return n.map((r,s)=>{const i=t[s];return Array.isArray(i)&&i.length===0?null:r&&i||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?n?e:null:n&&e?[e]:null}function _s(n,e){if(ne(n))return!e||ne(e)&&Object.keys(e).length===0?xe(n,null):void 0;if(Array.isArray(n)){if(n.some(ne))return;const t=Array.isArray(e)?e:[];return n.map((r,s)=>{const i=t[s];return Array.isArray(i)&&i.length===0?null:i||null})}return Array.isArray(e)&&e.length===0?null:Array.isArray(e)?e:e?[e]:null}function bs([n,e]){return rt(e,n,gs)}function ws([n,e]){return rt(e,n,_s)}function Ss(n){return function(t,r,s){const i=Array.isArray(t)?t:[t],o=new Array(i.length),a=n(s),l=a.set,u=a.subscribe;let c;function f(){c=i.map((_,w)=>_.subscribe(v=>{o[w]=v,l(r(o))}))}function S(){c==null||c.forEach(_=>_())}return a.subscribe=function(w){const v=u(w);return()=>{v()}},[a,f,S]}}function Es(n,e){var t,r,s,i,o,a,l,u,c;const f=Ss(n),S=e.initialValues=e.initialValues?Ve(fr(Ie(e.initialValues),e.transform)):{},_=Ke(jt(S),!1),w=n(_),v=n(0),[g,y,R]=f([w,v],([ve,ae])=>Rt(ve,Ue=>!!Ue)&&ae>=1,!1);delete g.set,delete g.update;function U(ve){let ae;return async function(Ue,He,je,it=!1){if(!je||!Ue)return;let Ze=He&&Object.keys(He).length>0?He:xe(Ue,[]);const ot=ys(it);if((!(ae!=null&&ae.signal.priority)||it)&&(ae==null||ae.abort(),ae=ot),ae.signal.priority&&!it)return;v.update(Tt=>Tt+1);const Lr=us(Ue,je);return Lr.forEach(async Tt=>{const Yn=await Tt;ot.signal.aborted||(Ze=mt([Ze,Yn]),ve.set(Ze))}),await Promise.all(Lr),ae=void 0,v.update(Tt=>Tt-1),Ze}}let k=xe(_,[]);const N=n(S),I=xe(_,[]),G=n(I),Y=n(Ie(I)),[B,F,x]=f([G,Y],mt,Ie(I)),V=xe(_,[]),L=n(V),d=n(Ie(V)),[m,h,b]=f([L,d],mt,Ie(V)),[D,p,C]=f([B,w],bs,Ie(I)),[j,q,J]=f([m,w],ws,Ie(V));let re=!1;const[ee,fe,se]=f(B,([ve])=>{var ae;return re?!Rt(ve,ke=>Array.isArray(ke)?ke.length>=1:!!ke):(re=!0,!e.validate&&!(!((ae=e.debounced)===null||ae===void 0)&&ae.validate))},!e.validate&&!(!((t=e.debounced)===null||t===void 0)&&t.validate));delete ee.set,delete ee.update;const A=n(!1),Z=n(!1),E=n(null),X=U(G),me=U(L),$=U(Y),O=U(d),z=Wt($,(o=(s=(r=e.debounced)===null||r===void 0?void 0:r.validateTimeout)!==null&&s!==void 0?s:(i=e.debounced)===null||i===void 0?void 0:i.timeout)!==null&&o!==void 0?o:300,{onInit:()=>{v.update(ve=>ve+1)},onEnd:()=>{v.update(ve=>ve-1)}}),te=Wt(O,(c=(l=(a=e.debounced)===null||a===void 0?void 0:a.warnTimeout)!==null&&l!==void 0?l:(u=e.debounced)===null||u===void 0?void 0:u.timeout)!==null&&c!==void 0?c:300);async function _e(ve,ae){var ke;const Ue=jt(ve),He=X(Ue,k,ae??e.validate,!0);if(ae)return He;const je=$(Ue,k,(ke=e.debounced)===null||ke===void 0?void 0:ke.validate,!0);return mt(await Promise.all([He,je]))}async function Te(ve,ae){var ke;const Ue=jt(ve),He=me(Ue,k,ae??e.warn,!0);if(ae)return He;const je=O(Ue,k,(ke=e.debounced)===null||ke===void 0?void 0:ke.warn,!0);return mt(await Promise.all([He,je]))}let Me=I,pe=V;function ye(){const ve=N.subscribe(je=>{var it,Ze;const ot=jt(je);X(ot,k,e.validate),me(ot,k,e.warn),z(ot,k,(it=e.debounced)===null||it===void 0?void 0:it.validate),te(ot,k,(Ze=e.debounced)===null||Ze===void 0?void 0:Ze.warn)}),ae=w.subscribe(je=>{k=xe(je,[])}),ke=B.subscribe(je=>{Me=je}),Ue=m.subscribe(je=>{pe=je});F(),fe(),h(),p(),q(),y();function He(){ve(),C(),x(),b(),J(),se(),R(),ae(),ke(),Ue()}return He}function De(ve){G.set(ve(Me)),Y.set({})}function Le(ve){L.set(ve(pe)),d.set({})}function Be(ve){De(()=>ve)}function de(ve){Le(()=>ve)}return D.set=Be,D.update=De,j.set=de,j.update=Le,{data:N,errors:D,warnings:j,touched:w,isValid:ee,isSubmitting:A,isDirty:Z,isValidating:g,interacted:E,validateErrors:_e,validateWarnings:Te,cleanup:e.preventStoreStart?()=>{}:ye(),start:ye}}function Ts(n,e){var t,r;(t=n.extend)!==null&&t!==void 0||(n.extend=[]),(r=n.debounced)!==null&&r!==void 0||(n.debounced={}),n.validate&&!Array.isArray(n.validate)&&(n.validate=[n.validate]),n.debounced.validate&&!Array.isArray(n.debounced.validate)&&(n.debounced.validate=[n.debounced.validate]),n.transform&&!Array.isArray(n.transform)&&(n.transform=[n.transform]),n.warn&&!Array.isArray(n.warn)&&(n.warn=[n.warn]),n.debounced.warn&&!Array.isArray(n.debounced.warn)&&(n.debounced.warn=[n.debounced.warn]);function s(h,{debounced:b,level:D}={debounced:!1,level:"error"}){var p;const C=D==="error"?"validate":"warn";(p=n.debounced)!==null&&p!==void 0||(n.debounced={});const j=b?n.debounced:n;j[C]?j[C]=[...j[C],h]:j[C]=[h]}function i(h){n.transform?n.transform=[...n.transform,h]:n.transform=[h]}const o=Array.isArray(n.extend)?n.extend:[n.extend];let a=[];const l=()=>a,u=h=>{a=h},{isSubmitting:c,isValidating:f,data:S,errors:_,warnings:w,touched:v,isValid:g,isDirty:y,cleanup:R,start:U,validateErrors:k,validateWarnings:N,interacted:I}=Es(e.storeFactory,n),G=S.update,Y=S.set,B=h=>G(b=>Ve(fr(h(b),n.transform))),F=h=>Y(Ve(fr(h,n.transform)));S.update=B,S.set=F;const x=ms({extender:o,config:n,addValidator:s,addTransformer:i,validateErrors:k,validateWarnings:N,_getCurrentExtenders:l,stores:{data:S,errors:_,warnings:w,touched:v,isValid:g,isValidating:f,isSubmitting:c,isDirty:y,interacted:I}}),{createSubmitHandler:V,handleSubmit:L}=x.public;a=o.map(h=>h({stage:"SETUP",errors:_,warnings:w,touched:v,data:S,isDirty:y,isValid:g,isValidating:f,isSubmitting:c,interacted:I,config:n,addValidator:s,addTransformer:i,setFields:x.public.setFields,reset:x.public.reset,validate:x.public.validate,handleSubmit:L,createSubmitHandler:V}));const d=Object.assign({config:n,stores:{data:S,touched:v,errors:_,warnings:w,isSubmitting:c,isValidating:f,isValid:g,isDirty:y,interacted:I},createSubmitHandler:V,handleSubmit:L,helpers:Object.assign(Object.assign({},x.public),{addTransformer:i,addValidator:s}),extender:o,_getCurrentExtenders:l,_setCurrentExtenders:u},x.private),{form:m}=ps(d);return Object.assign({data:S,errors:_,warnings:w,touched:v,isValid:g,isSubmitting:c,isValidating:f,isDirty:y,interacted:I,form:m,cleanup:R,startStores:U},x.public)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ks(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function ta(n){const e=Ts(n??{},{storeFactory:En}),{cleanup:t,startStores:r}=e,s=ks(e,["cleanup","startStores"]);return qn(t),s}function Os(n){return n%4===0&&n%100!==0||n%400===0}function It(n,e){return[31,Os(n)?29:28,31,30,31,30,31,31,30,31,30,31][e]}function zr(n,e){let t="";if(n)for(const r of e)typeof r=="string"?t+=r:t+=r.toString(n);return t}function tr(n,e){const t=It(n,e),r=[];for(let s=0;s<t;s++)r.push({year:n,month:e,number:s+1});return r}function As(n,e){const t=n.getFullYear(),r=n.getMonth(),s=new Date(t,r,1).getDay();let i=[];const o=(s-e+7)%7;if(o>0){let c=r-1,f=t;c===-1&&(c=11,f=t-1),i=tr(f,c).slice(-o)}i=i.concat(tr(t,r));let a=r+1,l=t;a===12&&(a=0,l=t+1);const u=42-i.length;return i=i.concat(tr(l,a).slice(0,u)),i}function Ds(){return{weekdays:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStartsOn:1}}function js(n={}){const e=Ds();return typeof n.weekStartsOn=="number"&&(e.weekStartsOn=n.weekStartsOn),n.months&&(e.months=n.months),n.weekdays&&(e.weekdays=n.weekdays),e}function Wr(n,e,t){const r=n.slice();return r[29]=e[t],r[31]=t,r}function Kr(n,e,t){const r=n.slice();return r[32]=e[t],r}function Gr(n,e,t){const r=n.slice();return r[29]=e[t],r[36]=t,r}function Vr(n,e,t){const r=n.slice();return r[37]=e[t],r}function Zr(n,e,t){const r=n.slice();return r[37]=e[t],r}function Xr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function Qr(n,e,t){const r=n.slice();return r[42]=e[t],r[36]=t,r}function en(n){let e,t=n[42]+"",r,s;return{c(){e=W("option"),r=Oe(t),this.h()},l(i){e=K(i,"OPTION",{});var o=H(e);r=Ae(o,t),o.forEach(M),this.h()},h(){e.disabled=s=new Date(n[8],n[36],It(n[8],n[36]),23,59,59,999)<n[1]||new Date(n[8],n[36])>n[2],e.__value=n[36],e.value=e.__value},m(i,o){ge(i,e,o),P(e,r)},p(i,o){o[0]&16&&t!==(t=i[42]+"")&&st(r,t),o[0]&294&&s!==(s=new Date(i[8],i[36],It(i[8],i[36]),23,59,59,999)<i[1]||new Date(i[8],i[36])>i[2])&&(e.disabled=s)},d(i){i&&M(e)}}}function tn(n){let e,t=n[42]+"",r,s;return{c(){e=W("option"),r=Oe(t),this.h()},l(i){e=K(i,"OPTION",{});var o=H(e);r=Ae(o,t),o.forEach(M),this.h()},h(){e.__value=n[36],e.value=e.__value,e.selected=s=n[36]===n[7]},m(i,o){ge(i,e,o),P(e,r)},p(i,o){o[0]&16&&t!==(t=i[42]+"")&&st(r,t),o[0]&128&&s!==(s=i[36]===i[7])&&(e.selected=s)},d(i){i&&M(e)}}}function rn(n){let e,t=n[37]+"",r,s;return{c(){e=W("option"),r=Oe(t),this.h()},l(i){e=K(i,"OPTION",{});var o=H(e);r=Ae(o,t),o.forEach(M),this.h()},h(){e.__value=s=n[37],e.value=e.__value},m(i,o){ge(i,e,o),P(e,r)},p(i,o){o[0]&32&&t!==(t=i[37]+"")&&st(r,t),o[0]&32&&s!==(s=i[37])&&(e.__value=s,e.value=e.__value)},d(i){i&&M(e)}}}function nn(n){let e,t=n[37]+"",r,s,i;return{c(){e=W("option"),r=Oe(t),this.h()},l(o){e=K(o,"OPTION",{});var a=H(e);r=Ae(a,t),a.forEach(M),this.h()},h(){e.__value=s=n[37],e.value=e.__value,e.selected=i=n[37]===n[3].getFullYear()},m(o,a){ge(o,e,a),P(e,r)},p(o,a){a[0]&32&&t!==(t=o[37]+"")&&st(r,t),a[0]&32&&s!==(s=o[37])&&(e.__value=s,e.value=e.__value),a[0]&40&&i!==(i=o[37]===o[3].getFullYear())&&(e.selected=i)},d(o){o&&M(e)}}}function Ps(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]-7]+"",r;return{c(){e=W("div"),r=Oe(t),this.h()},l(s){e=K(s,"DIV",{class:!0});var i=H(e);r=Ae(i,t),i.forEach(M),this.h()},h(){T(e,"class","header-cell svelte-w239uu")},m(s,i){ge(s,e,i),P(e,r)},p(s,i){i[0]&16&&t!==(t=s[4].weekdays[s[4].weekStartsOn+s[36]-7]+"")&&st(r,t)},d(s){s&&M(e)}}}function Cs(n){let e,t=n[4].weekdays[n[4].weekStartsOn+n[36]]+"",r;return{c(){e=W("div"),r=Oe(t),this.h()},l(s){e=K(s,"DIV",{class:!0});var i=H(e);r=Ae(i,t),i.forEach(M),this.h()},h(){T(e,"class","header-cell svelte-w239uu")},m(s,i){ge(s,e,i),P(e,r)},p(s,i){i[0]&16&&t!==(t=s[4].weekdays[s[4].weekStartsOn+s[36]]+"")&&st(r,t)},d(s){s&&M(e)}}}function sn(n){let e;function t(i,o){return i[36]+i[4].weekStartsOn<7?Cs:Ps}let r=t(n),s=r(n);return{c(){s.c(),e=Ur()},l(i){s.l(i),e=Ur()},m(i,o){s.m(i,o),ge(i,e,o)},p(i,o){r===(r=t(i))&&s?s.p(i,o):(s.d(1),s=r(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){s.d(i),i&&M(e)}}}function on(n){let e,t,r=n[32].number+"",s,i,o;function a(){return n[23](n[32])}return{c(){e=W("div"),t=W("span"),s=Oe(r),this.h()},l(l){e=K(l,"DIV",{class:!0});var u=H(e);t=K(u,"SPAN",{class:!0});var c=H(t);s=Ae(c,r),c.forEach(M),u.forEach(M),this.h()},h(){T(t,"class","svelte-w239uu"),T(e,"class","cell svelte-w239uu"),$e(e,"disabled",!mr(n[32],n[1],n[2])),$e(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),$e(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),$e(e,"other-month",n[32].month!==n[7])},m(l,u){ge(l,e,u),P(e,t),P(t,s),i||(o=we(e,"click",a),i=!0)},p(l,u){n=l,u[0]&64&&r!==(r=n[32].number+"")&&st(s,r),u[0]&70&&$e(e,"disabled",!mr(n[32],n[1],n[2])),u[0]&65&&$e(e,"selected",n[0]&&n[32].year===n[0].getFullYear()&&n[32].month===n[0].getMonth()&&n[32].number===n[0].getDate()),u[0]&576&&$e(e,"today",n[32].year===n[9].getFullYear()&&n[32].month===n[9].getMonth()&&n[32].number===n[9].getDate()),u[0]&192&&$e(e,"other-month",n[32].month!==n[7])},d(l){l&&M(e),i=!1,o()}}}function an(n){let e,t,r=n[6].slice(n[31]*7,n[31]*7+7),s=[];for(let i=0;i<r.length;i+=1)s[i]=on(Kr(n,r,i));return{c(){e=W("div");for(let i=0;i<s.length;i+=1)s[i].c();t=ce(),this.h()},l(i){e=K(i,"DIV",{class:!0});var o=H(e);for(let a=0;a<s.length;a+=1)s[a].l(o);t=he(o),o.forEach(M),this.h()},h(){T(e,"class","week svelte-w239uu")},m(i,o){ge(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);P(e,t)},p(i,o){if(o[0]&4807){r=i[6].slice(i[31]*7,i[31]*7+7);let a;for(a=0;a<r.length;a+=1){const l=Kr(i,r,a);s[a]?s[a].p(l,o):(s[a]=on(l),s[a].c(),s[a].m(e,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(i){i&&M(e),lt(s,i)}}}function Rs(n){let e,t,r,s,i,o,a,l,u,c,f,S,_,w,v,g,y,R,U,k,N,I,G,Y,B,F,x,V,L,d,m,h=n[4].months,b=[];for(let A=0;A<h.length;A+=1)b[A]=en(Qr(n,h,A));let D=n[4].months,p=[];for(let A=0;A<D.length;A+=1)p[A]=tn(Xr(n,D,A));let C=n[5],j=[];for(let A=0;A<C.length;A+=1)j[A]=rn(Zr(n,C,A));let q=n[5],J=[];for(let A=0;A<q.length;A+=1)J[A]=nn(Vr(n,q,A));let re=Array(7),ee=[];for(let A=0;A<re.length;A+=1)ee[A]=sn(Gr(n,re,A));let fe=Array(6),se=[];for(let A=0;A<fe.length;A+=1)se[A]=an(Wr(n,fe,A));return{c(){e=W("div"),t=W("div"),r=W("div"),s=W("button"),i=Ce("svg"),o=Ce("path"),a=ce(),l=W("div"),u=W("select");for(let A=0;A<b.length;A+=1)b[A].c();c=ce(),f=W("select");for(let A=0;A<p.length;A+=1)p[A].c();S=ce(),_=Ce("svg"),w=Ce("path"),v=ce(),g=W("div"),y=W("select");for(let A=0;A<j.length;A+=1)j[A].c();R=ce(),U=W("select");for(let A=0;A<J.length;A+=1)J[A].c();k=ce(),N=Ce("svg"),I=Ce("path"),G=ce(),Y=W("button"),B=Ce("svg"),F=Ce("path"),x=ce(),V=W("div");for(let A=0;A<ee.length;A+=1)ee[A].c();L=ce();for(let A=0;A<se.length;A+=1)se[A].c();this.h()},l(A){e=K(A,"DIV",{class:!0,tabindex:!0});var Z=H(e);t=K(Z,"DIV",{class:!0,tabindex:!0});var E=H(t);r=K(E,"DIV",{class:!0});var X=H(r);s=K(X,"BUTTON",{type:!0,class:!0,tabindex:!0});var me=H(s);i=Re(me,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var $=H(i);o=Re($,"path",{d:!0,transform:!0}),H(o).forEach(M),$.forEach(M),me.forEach(M),a=he(X),l=K(X,"DIV",{class:!0});var O=H(l);u=K(O,"SELECT",{class:!0});var z=H(u);for(let de=0;de<b.length;de+=1)b[de].l(z);z.forEach(M),c=he(O),f=K(O,"SELECT",{class:!0,tabindex:!0});var te=H(f);for(let de=0;de<p.length;de+=1)p[de].l(te);te.forEach(M),S=he(O),_=Re(O,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var _e=H(_);w=Re(_e,"path",{d:!0,transform:!0}),H(w).forEach(M),_e.forEach(M),O.forEach(M),v=he(X),g=K(X,"DIV",{class:!0});var Te=H(g);y=K(Te,"SELECT",{class:!0});var Me=H(y);for(let de=0;de<j.length;de+=1)j[de].l(Me);Me.forEach(M),R=he(Te),U=K(Te,"SELECT",{class:!0,tabindex:!0});var pe=H(U);for(let de=0;de<J.length;de+=1)J[de].l(pe);pe.forEach(M),k=he(Te),N=Re(Te,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var ye=H(N);I=Re(ye,"path",{d:!0,transform:!0}),H(I).forEach(M),ye.forEach(M),Te.forEach(M),G=he(X),Y=K(X,"BUTTON",{type:!0,class:!0,tabindex:!0});var De=H(Y);B=Re(De,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,class:!0});var Le=H(B);F=Re(Le,"path",{d:!0}),H(F).forEach(M),Le.forEach(M),De.forEach(M),X.forEach(M),x=he(E),V=K(E,"DIV",{class:!0});var Be=H(V);for(let de=0;de<ee.length;de+=1)ee[de].l(Be);Be.forEach(M),L=he(E);for(let de=0;de<se.length;de+=1)se[de].l(E);E.forEach(M),Z.forEach(M),this.h()},h(){T(o,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),T(o,"transform","rotate(180, 12, 12)"),T(i,"xmlns","http://www.w3.org/2000/svg"),T(i,"width","24"),T(i,"height","24"),T(i,"viewBox","0 0 24 24"),T(i,"class","svelte-w239uu"),T(s,"type","button"),T(s,"class","page-button svelte-w239uu"),T(s,"tabindex","-1"),T(u,"class","svelte-w239uu"),T(f,"class","dummy-select svelte-w239uu"),T(f,"tabindex","-1"),T(w,"d","M6 0l12 12-12 12z"),T(w,"transform","rotate(90, 12, 12)"),T(_,"xmlns","http://www.w3.org/2000/svg"),T(_,"width","24"),T(_,"height","24"),T(_,"viewBox","0 0 24 24"),T(_,"class","svelte-w239uu"),T(l,"class","dropdown month svelte-w239uu"),T(y,"class","svelte-w239uu"),T(U,"class","dummy-select svelte-w239uu"),T(U,"tabindex","-1"),T(I,"d","M6 0l12 12-12 12z"),T(I,"transform","rotate(90, 12, 12)"),T(N,"xmlns","http://www.w3.org/2000/svg"),T(N,"width","24"),T(N,"height","24"),T(N,"viewBox","0 0 24 24"),T(N,"class","svelte-w239uu"),T(g,"class","dropdown year svelte-w239uu"),T(F,"d","M5 3l3.057-3 11.943 12-11.943 12-3.057-3 9-9z"),T(B,"xmlns","http://www.w3.org/2000/svg"),T(B,"width","24"),T(B,"height","24"),T(B,"viewBox","0 0 24 24"),T(B,"class","svelte-w239uu"),T(Y,"type","button"),T(Y,"class","page-button svelte-w239uu"),T(Y,"tabindex","-1"),T(r,"class","top svelte-w239uu"),T(V,"class","header svelte-w239uu"),T(t,"class","tab-container svelte-w239uu"),T(t,"tabindex","-1"),T(e,"class","date-time-picker svelte-w239uu"),T(e,"tabindex","0")},m(A,Z){ge(A,e,Z),P(e,t),P(t,r),P(r,s),P(s,i),P(i,o),P(r,a),P(r,l),P(l,u);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(u,null);Ut(u,n[7]),P(l,c),P(l,f);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(f,null);P(l,S),P(l,_),P(_,w),P(r,v),P(r,g),P(g,y);for(let E=0;E<j.length;E+=1)j[E]&&j[E].m(y,null);Ut(y,n[8]),P(g,R),P(g,U);for(let E=0;E<J.length;E+=1)J[E]&&J[E].m(U,null);P(g,k),P(g,N),P(N,I),P(r,G),P(r,Y),P(Y,B),P(B,F),P(t,x),P(t,V);for(let E=0;E<ee.length;E+=1)ee[E]&&ee[E].m(V,null);P(t,L);for(let E=0;E<se.length;E+=1)se[E]&&se[E].m(t,null);d||(m=[we(s,"click",n[19]),we(u,"keydown",n[14]),we(u,"input",n[20]),we(y,"input",n[21]),we(y,"keydown",n[13]),we(Y,"click",n[22]),we(e,"focusout",n[18]),we(e,"keydown",n[15])],d=!0)},p(A,Z){if(Z[0]&278){h=A[4].months;let E;for(E=0;E<h.length;E+=1){const X=Qr(A,h,E);b[E]?b[E].p(X,Z):(b[E]=en(X),b[E].c(),b[E].m(u,null))}for(;E<b.length;E+=1)b[E].d(1);b.length=h.length}if(Z[0]&128&&Ut(u,A[7]),Z[0]&144){D=A[4].months;let E;for(E=0;E<D.length;E+=1){const X=Xr(A,D,E);p[E]?p[E].p(X,Z):(p[E]=tn(X),p[E].c(),p[E].m(f,null))}for(;E<p.length;E+=1)p[E].d(1);p.length=D.length}if(Z[0]&32){C=A[5];let E;for(E=0;E<C.length;E+=1){const X=Zr(A,C,E);j[E]?j[E].p(X,Z):(j[E]=rn(X),j[E].c(),j[E].m(y,null))}for(;E<j.length;E+=1)j[E].d(1);j.length=C.length}if(Z[0]&288&&Ut(y,A[8]),Z[0]&40){q=A[5];let E;for(E=0;E<q.length;E+=1){const X=Vr(A,q,E);J[E]?J[E].p(X,Z):(J[E]=nn(X),J[E].c(),J[E].m(U,null))}for(;E<J.length;E+=1)J[E].d(1);J.length=q.length}if(Z[0]&16){re=Array(7);let E;for(E=0;E<re.length;E+=1){const X=Gr(A,re,E);ee[E]?ee[E].p(X,Z):(ee[E]=sn(X),ee[E].c(),ee[E].m(V,null))}for(;E<ee.length;E+=1)ee[E].d(1);ee.length=re.length}if(Z[0]&4807){fe=Array(6);let E;for(E=0;E<fe.length;E+=1){const X=Wr(A,fe,E);se[E]?se[E].p(X,Z):(se[E]=an(X),se[E].c(),se[E].m(t,null))}for(;E<se.length;E+=1)se[E].d(1);se.length=fe.length}},i:hr,o:hr,d(A){A&&M(e),lt(b,A),lt(p,A),lt(j,A),lt(J,A),lt(ee,A),lt(se,A),d=!1,wr(m)}}}function dt(n){return new Date(n.getTime())}function rr(n,e,t){return n>t?dt(t):n<e?dt(e):dt(n)}function ln(n,e){let t=[];for(let r=n.getFullYear();r<=e.getFullYear();r++)t.push(r);return t}function mr(n,e,t){const r=new Date(n.year,n.month,n.number),s=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(t.getFullYear(),t.getMonth(),t.getDate());return r>=s&&r<=i}function Is(n,e,t){let r,s,i,o;const a=Tn();let{value:l=null}=e;function u(h){h.getTime()!==(l==null?void 0:l.getTime())&&(t(3,v=rr(h,_,w)),t(0,l=dt(v)))}function c(h){t(3,v=rr(h,_,w)),!R&&l&&u(v)}const f=new Date,S=new Date;let{min:_=new Date(S.getFullYear()-20,0,1)}=e,{max:w=new Date(S.getFullYear(),11,31,23,59,59,999)}=e,v=dt(l||rr(S,_,w)),g=ln(_,w),{locale:y={}}=e,{browseWithoutSelecting:R=!1}=e;function U(h){v.setFullYear(h),c(v)}function k(h){let b=v.getFullYear();h===12?(h=0,b++):h===-1&&(h=11,b--);const D=It(b,h),p=Math.min(v.getDate(),D);c(new Date(b,h,p,v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds()))}function N(h){mr(h,_,w)&&(v.setFullYear(0),v.setMonth(0),v.setDate(1),v.setFullYear(h.year),v.setMonth(h.month),v.setDate(h.number),u(v),a("select"))}function I(h){if(h.shiftKey&&h.key==="ArrowUp")U(v.getFullYear()-1);else if(h.shiftKey&&h.key==="ArrowDown")U(v.getFullYear()+1);else if(h.shiftKey&&h.key==="ArrowLeft")k(v.getMonth()-1);else if(h.shiftKey&&h.key==="ArrowRight")k(v.getMonth()+1);else return!1;return h.preventDefault(),!0}function G(h){if(h.shiftKey||h.altKey){I(h);return}else if(h.key==="ArrowUp")U(v.getFullYear()-1);else if(h.key==="ArrowDown")U(v.getFullYear()+1);else if(h.key==="ArrowLeft")k(v.getMonth()-1);else if(h.key==="ArrowRight")k(v.getMonth()+1);else{I(h);return}h.preventDefault()}function Y(h){if(h.shiftKey||h.altKey){I(h);return}else if(h.key==="ArrowUp"||h.key==="ArrowLeft")k(v.getMonth()-1);else if(h.key==="ArrowDown"||h.key==="ArrowRight")k(v.getMonth()+1);else{I(h);return}h.preventDefault()}function B(h){var D;let b=h.shiftKey||h.altKey;if(((D=h.target)==null?void 0:D.tagName)!=="SELECT"){if(b){I(h);return}else if(h.key==="ArrowUp")v.setDate(v.getDate()-7),u(v);else if(h.key==="ArrowDown")v.setDate(v.getDate()+7),u(v);else if(h.key==="ArrowLeft")v.setDate(v.getDate()-1),u(v);else if(h.key==="ArrowRight")v.setDate(v.getDate()+1),u(v);else if(h.key==="Enter")u(v),a("select");else return;h.preventDefault()}}function F(h){Jn.call(this,n,h)}const x=()=>k(v.getMonth()-1),V=h=>k(parseInt(h.currentTarget.value)),L=h=>U(parseInt(h.currentTarget.value)),d=()=>k(v.getMonth()+1),m=h=>N(h);return n.$$set=h=>{"value"in h&&t(0,l=h.value),"min"in h&&t(1,_=h.min),"max"in h&&t(2,w=h.max),"locale"in h&&t(16,y=h.locale),"browseWithoutSelecting"in h&&t(17,R=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty[0]&7&&(l&&l>w?u(w):l&&l<_&&u(_)),n.$$.dirty[0]&131081&&v.getTime()!==(l==null?void 0:l.getTime())&&!R&&t(3,v=l?dt(l):v),n.$$.dirty[0]&6&&t(5,g=ln(_,w)),n.$$.dirty[0]&65536&&t(4,r=js(y)),n.$$.dirty[0]&8&&t(8,s=v.getFullYear()),n.$$.dirty[0]&8&&t(7,i=v.getMonth()),n.$$.dirty[0]&24&&t(6,o=As(v,r.weekStartsOn))},[l,_,w,v,r,g,o,i,s,f,U,k,N,G,Y,B,y,R,F,x,V,L,d,m]}class xs extends bt{constructor(e){super(),wt(this,e,Is,Rs,St,{value:0,min:1,max:2,locale:16,browseWithoutSelecting:17},null,[-1,-1])}}function un(n,e,t){let r="",s=!0;t=t||new Date(2020,0,1,0,0,0,0);let i=t.getFullYear(),o=t.getMonth(),a=t.getDate(),l=t.getHours(),u=t.getMinutes(),c=t.getSeconds();const f=t.getMilliseconds();function S(g){for(let y=0;y<g.length;y++)if(n.startsWith(g[y]))n=n.slice(1);else{s=!1,n.length===0&&(r=g.slice(y));return}}function _(g,y,R){const U=n.match(g);if(U!=null&&U[0]){n=n.slice(U[0].length);const k=parseInt(U[0]);return k>R||k<y?(s=!1,null):k}else return s=!1,null}function w(g){if(typeof g=="string")S(g);else if(g.id==="yyyy"){const y=_(/^[0-9]{4}/,0,9999);y!==null&&(i=y)}else if(g.id==="MM"){const y=_(/^[0-9]{2}/,1,12);y!==null&&(o=y-1)}else if(g.id==="dd"){const y=_(/^[0-9]{2}/,1,31);y!==null&&(a=y)}else if(g.id==="HH"){const y=_(/^[0-9]{2}/,0,23);y!==null&&(l=y)}else if(g.id==="mm"){const y=_(/^[0-9]{2}/,0,59);y!==null&&(u=y)}else if(g.id==="ss"){const y=_(/^[0-9]{2}/,0,59);y!==null&&(c=y)}}for(const g of e)if(w(g),!s)break;const v=It(i,o);return a>v&&(s=!1),{date:s?new Date(i,o,a,l,u,c,f):null,missingPunctuation:r}}function kt(n){return("0"+n.toString()).slice(-2)}const Ms=[{id:"yyyy",toString:n=>n.getFullYear().toString()},{id:"MM",toString:n=>kt(n.getMonth()+1)},{id:"dd",toString:n=>kt(n.getDate())},{id:"HH",toString:n=>kt(n.getHours())},{id:"mm",toString:n=>kt(n.getMinutes())},{id:"ss",toString:n=>kt(n.getSeconds())}];function Ls(n){for(const e of Ms)if(n.startsWith(e.id))return e}function cn(n){const e=[];for(;n.length>0;){const t=Ls(n);t?(e.push(t),n=n.slice(t.id.length)):typeof e[e.length-1]=="string"?(e[e.length-1]+=n[0],n=n.slice(1)):(e.push(n[0]),n=n.slice(1))}return e}function hn(n){let e,t,r,s,i;function o(l){n[23](l)}let a={min:n[3],max:n[4],locale:n[8],browseWithoutSelecting:n[9]};return n[11]!==void 0&&(a.value=n[11]),t=new xs({props:a}),zn.push(()=>Wn(t,"value",o)),t.$on("focusout",n[14]),t.$on("select",n[16]),{c(){e=W("div"),Kn(t.$$.fragment),this.h()},l(l){e=K(l,"DIV",{class:!0});var u=H(e);Gn(t.$$.fragment,u),u.forEach(M),this.h()},h(){T(e,"class","picker svelte-1bsxr9h"),$e(e,"visible",n[2])},m(l,u){ge(l,e,u),Vn(t,e,null),i=!0},p(l,u){n=l;const c={};u&8&&(c.min=n[3]),u&16&&(c.max=n[4]),u&256&&(c.locale=n[8]),u&512&&(c.browseWithoutSelecting=n[9]),!r&&u&2048&&(r=!0,c.value=n[11],Zn(()=>r=!1)),t.$set(c),(!i||u&4)&&$e(e,"visible",n[2])},i(l){i||(Je(t.$$.fragment,l),Sr(()=>{i&&(s||(s=_t(e,zt,{duration:80,easing:$r,y:-5},!0)),s.run(1))}),i=!0)},o(l){nt(t.$$.fragment,l),s||(s=_t(e,zt,{duration:80,easing:$r,y:-5},!1)),s.run(0),i=!1},d(l){l&&M(e),Xn(t),l&&s&&s.end()}}}function Us(n){let e,t,r,s,i,o,a,l=n[2]&&!n[6]&&hn(n);return{c(){e=W("div"),t=W("input"),r=ce(),l&&l.c(),this.h()},l(u){e=K(u,"DIV",{class:!0});var c=H(e);t=K(c,"INPUT",{type:!0,placeholder:!0,class:!0}),r=he(c),l&&l.l(c),c.forEach(M),this.h()},h(){T(t,"type","text"),t.value=n[0],T(t,"placeholder",n[5]),t.disabled=n[6],T(t,"class","svelte-1bsxr9h"),$e(t,"invalid",!n[1]),T(e,"class",s="date-time-field "+n[7]+" svelte-1bsxr9h")},m(u,c){ge(u,e,c),P(e,t),P(e,r),l&&l.m(e,null),i=!0,o||(a=[we(t,"focus",n[20]),we(t,"mousedown",n[21]),we(t,"input",n[22]),we(e,"focusout",n[14]),we(e,"keydown",n[15])],o=!0)},p(u,[c]){(!i||c&1&&t.value!==u[0])&&(t.value=u[0]),(!i||c&32)&&T(t,"placeholder",u[5]),(!i||c&64)&&(t.disabled=u[6]),(!i||c&2)&&$e(t,"invalid",!u[1]),u[2]&&!u[6]?l?(l.p(u,c),c&68&&Je(l,1)):(l=hn(u),l.c(),Je(l,1),l.m(e,null)):l&&(kn(),nt(l,1,1,()=>{l=null}),On()),(!i||c&128&&s!==(s="date-time-field "+u[7]+" svelte-1bsxr9h"))&&T(e,"class",s)},i(u){i||(Je(l),i=!0)},o(u){nt(l),i=!1},d(u){u&&M(e),l&&l.d(),o=!1,wr(a)}}}function Fs(n,e,t){let r,s;const i=Tn(),o=new Date,a=En(null);Fr(n,a,h=>t(24,s=h));const l=(()=>({subscribe:a.subscribe,set:h=>{h===null?(a.set(null),t(17,u=h)):h.getTime()!==(s==null?void 0:s.getTime())&&(a.set(h),t(17,u=h))}}))();Fr(n,l,h=>t(11,r=h));let{value:u=null}=e,{min:c=new Date(o.getFullYear()-20,0,1)}=e,{max:f=new Date(o.getFullYear(),11,31,23,59,59,999)}=e,{placeholder:S="2020-12-31 23:00:00"}=e,{valid:_=!0}=e,{disabled:w=!1}=e,{class:v=""}=e,{format:g="yyyy-MM-dd HH:mm:ss"}=e,y=cn(g),{locale:R={}}=e;function U(h,b){t(0,k=zr(h,b))}let{text:k=zr(r,y)}=e;function N(h,b){if(h.length){const D=un(h,b,r);D.date!==null?(t(1,_=!0),l.set(D.date)):t(1,_=!1)}else t(1,_=!0),u&&(t(17,u=null),l.set(null))}let{visible:I=!1}=e,{closeOnSelection:G=!1}=e,{browseWithoutSelecting:Y=!1}=e;function B(h){(h==null?void 0:h.currentTarget)instanceof HTMLElement&&h.relatedTarget&&h.relatedTarget instanceof Node&&h.currentTarget.contains(h.relatedTarget)||t(2,I=!1)}function F(h){h.key==="Escape"&&I?(t(2,I=!1),h.preventDefault(),h.stopPropagation()):h.key==="Enter"&&(t(2,I=!I),h.preventDefault())}function x(h){i("select",h.detail),G&&t(2,I=!1)}const V=()=>t(2,I=!0),L=()=>t(2,I=!0),d=h=>{if(h instanceof InputEvent&&h.inputType==="insertText"&&typeof h.data=="string"&&h.currentTarget.value===k+h.data){let b=un(k,y,r);if(b.missingPunctuation!==""&&!b.missingPunctuation.startsWith(h.data)){t(0,k=k+b.missingPunctuation+h.data);return}}t(0,k=h.currentTarget.value)};function m(h){r=h,l.set(r)}return n.$$set=h=>{"value"in h&&t(17,u=h.value),"min"in h&&t(3,c=h.min),"max"in h&&t(4,f=h.max),"placeholder"in h&&t(5,S=h.placeholder),"valid"in h&&t(1,_=h.valid),"disabled"in h&&t(6,w=h.disabled),"class"in h&&t(7,v=h.class),"format"in h&&t(18,g=h.format),"locale"in h&&t(8,R=h.locale),"text"in h&&t(0,k=h.text),"visible"in h&&t(2,I=h.visible),"closeOnSelection"in h&&t(19,G=h.closeOnSelection),"browseWithoutSelecting"in h&&t(9,Y=h.browseWithoutSelecting)},n.$$.update=()=>{n.$$.dirty&131072&&l.set(u),n.$$.dirty&262144&&t(10,y=cn(g)),n.$$.dirty&3072&&U(r,y),n.$$.dirty&1025&&N(k,y)},[k,_,I,c,f,S,w,v,R,Y,y,r,a,l,B,F,x,u,g,G,V,L,d,m]}class ra extends bt{constructor(e){super(),wt(this,e,Fs,Us,St,{value:17,min:3,max:4,placeholder:5,valid:1,disabled:6,class:7,format:18,locale:8,text:0,visible:2,closeOnSelection:19,browseWithoutSelecting:9})}}var Rn={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Ar,function(){var t=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",l="hour",u="day",c="week",f="month",S="quarter",_="year",w="date",v="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(L){var d=["th","st","nd","rd"],m=L%100;return"["+L+(d[(m-20)%10]||d[m]||d[0])+"]"}},U=function(L,d,m){var h=String(L);return!h||h.length>=d?L:""+Array(d+1-h.length).join(m)+L},k={s:U,z:function(L){var d=-L.utcOffset(),m=Math.abs(d),h=Math.floor(m/60),b=m%60;return(d<=0?"+":"-")+U(h,2,"0")+":"+U(b,2,"0")},m:function L(d,m){if(d.date()<m.date())return-L(m,d);var h=12*(m.year()-d.year())+(m.month()-d.month()),b=d.clone().add(h,f),D=m-b<0,p=d.clone().add(h+(D?-1:1),f);return+(-(h+(m-b)/(D?b-p:p-b))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:f,y:_,w:c,d:u,D:w,h:l,m:a,s:o,ms:i,Q:S}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},N="en",I={};I[N]=R;var G=function(L){return L instanceof x},Y=function L(d,m,h){var b;if(!d)return N;if(typeof d=="string"){var D=d.toLowerCase();I[D]&&(b=D),m&&(I[D]=m,b=D);var p=d.split("-");if(!b&&p.length>1)return L(p[0])}else{var C=d.name;I[C]=d,b=C}return!h&&b&&(N=b),b||!h&&N},B=function(L,d){if(G(L))return L.clone();var m=typeof d=="object"?d:{};return m.date=L,m.args=arguments,new x(m)},F=k;F.l=Y,F.i=G,F.w=function(L,d){return B(L,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var x=function(){function L(m){this.$L=Y(m.locale,null,!0),this.parse(m)}var d=L.prototype;return d.parse=function(m){this.$d=function(h){var b=h.date,D=h.utc;if(b===null)return new Date(NaN);if(F.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var p=b.match(g);if(p){var C=p[2]-1||0,j=(p[7]||"0").substring(0,3);return D?new Date(Date.UTC(p[1],C,p[3]||1,p[4]||0,p[5]||0,p[6]||0,j)):new Date(p[1],C,p[3]||1,p[4]||0,p[5]||0,p[6]||0,j)}}return new Date(b)}(m),this.$x=m.x||{},this.init()},d.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},d.$utils=function(){return F},d.isValid=function(){return this.$d.toString()!==v},d.isSame=function(m,h){var b=B(m);return this.startOf(h)<=b&&b<=this.endOf(h)},d.isAfter=function(m,h){return B(m)<this.startOf(h)},d.isBefore=function(m,h){return this.endOf(h)<B(m)},d.$g=function(m,h,b){return F.u(m)?this[h]:this.set(b,m)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(m,h){var b=this,D=!!F.u(h)||h,p=F.p(m),C=function(A,Z){var E=F.w(b.$u?Date.UTC(b.$y,Z,A):new Date(b.$y,Z,A),b);return D?E:E.endOf(u)},j=function(A,Z){return F.w(b.toDate()[A].apply(b.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(Z)),b)},q=this.$W,J=this.$M,re=this.$D,ee="set"+(this.$u?"UTC":"");switch(p){case _:return D?C(1,0):C(31,11);case f:return D?C(1,J):C(0,J+1);case c:var fe=this.$locale().weekStart||0,se=(q<fe?q+7:q)-fe;return C(D?re-se:re+(6-se),J);case u:case w:return j(ee+"Hours",0);case l:return j(ee+"Minutes",1);case a:return j(ee+"Seconds",2);case o:return j(ee+"Milliseconds",3);default:return this.clone()}},d.endOf=function(m){return this.startOf(m,!1)},d.$set=function(m,h){var b,D=F.p(m),p="set"+(this.$u?"UTC":""),C=(b={},b[u]=p+"Date",b[w]=p+"Date",b[f]=p+"Month",b[_]=p+"FullYear",b[l]=p+"Hours",b[a]=p+"Minutes",b[o]=p+"Seconds",b[i]=p+"Milliseconds",b)[D],j=D===u?this.$D+(h-this.$W):h;if(D===f||D===_){var q=this.clone().set(w,1);q.$d[C](j),q.init(),this.$d=q.set(w,Math.min(this.$D,q.daysInMonth())).$d}else C&&this.$d[C](j);return this.init(),this},d.set=function(m,h){return this.clone().$set(m,h)},d.get=function(m){return this[F.p(m)]()},d.add=function(m,h){var b,D=this;m=Number(m);var p=F.p(h),C=function(J){var re=B(D);return F.w(re.date(re.date()+Math.round(J*m)),D)};if(p===f)return this.set(f,this.$M+m);if(p===_)return this.set(_,this.$y+m);if(p===u)return C(1);if(p===c)return C(7);var j=(b={},b[a]=r,b[l]=s,b[o]=t,b)[p]||1,q=this.$d.getTime()+m*j;return F.w(q,this)},d.subtract=function(m,h){return this.add(-1*m,h)},d.format=function(m){var h=this,b=this.$locale();if(!this.isValid())return b.invalidDate||v;var D=m||"YYYY-MM-DDTHH:mm:ssZ",p=F.z(this),C=this.$H,j=this.$m,q=this.$M,J=b.weekdays,re=b.months,ee=function(Z,E,X,me){return Z&&(Z[E]||Z(h,D))||X[E].slice(0,me)},fe=function(Z){return F.s(C%12||12,Z,"0")},se=b.meridiem||function(Z,E,X){var me=Z<12?"AM":"PM";return X?me.toLowerCase():me},A={YY:String(this.$y).slice(-2),YYYY:this.$y,M:q+1,MM:F.s(q+1,2,"0"),MMM:ee(b.monthsShort,q,re,3),MMMM:ee(re,q),D:this.$D,DD:F.s(this.$D,2,"0"),d:String(this.$W),dd:ee(b.weekdaysMin,this.$W,J,2),ddd:ee(b.weekdaysShort,this.$W,J,3),dddd:J[this.$W],H:String(C),HH:F.s(C,2,"0"),h:fe(1),hh:fe(2),a:se(C,j,!0),A:se(C,j,!1),m:String(j),mm:F.s(j,2,"0"),s:String(this.$s),ss:F.s(this.$s,2,"0"),SSS:F.s(this.$ms,3,"0"),Z:p};return D.replace(y,function(Z,E){return E||A[Z]||p.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(m,h,b){var D,p=F.p(h),C=B(m),j=(C.utcOffset()-this.utcOffset())*r,q=this-C,J=F.m(this,C);return J=(D={},D[_]=J/12,D[f]=J,D[S]=J/3,D[c]=(q-j)/6048e5,D[u]=(q-j)/864e5,D[l]=q/s,D[a]=q/r,D[o]=q/t,D)[p]||q,b?J:F.a(J)},d.daysInMonth=function(){return this.endOf(f).$D},d.$locale=function(){return I[this.$L]},d.locale=function(m,h){if(!m)return this.$L;var b=this.clone(),D=Y(m,h,!0);return D&&(b.$L=D),b},d.clone=function(){return F.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},L}(),V=x.prototype;return B.prototype=V,[["$ms",i],["$s",o],["$m",a],["$H",l],["$W",u],["$M",f],["$y",_],["$D",w]].forEach(function(L){V[L[1]]=function(d){return this.$g(d,L[0],L[1])}}),B.extend=function(L,d){return L.$i||(L(d,x,B),L.$i=!0),B},B.locale=Y,B.isDayjs=G,B.unix=function(L){return B(1e3*L)},B.en=I[N],B.Ls=I,B.p={},B})})(Rn);var Ns=Rn.exports;const $s=Dr(Ns);function Bs(n){let e,t,r,s,i,o,a,l,u,c,f;const S=n[3].default,_=Er(S,n,n[2],null);return{c(){e=W("div"),t=W("picture"),r=W("source"),s=ce(),i=W("source"),o=ce(),a=W("img"),c=ce(),_&&_.c(),this.h()},l(w){e=K(w,"DIV",{class:!0,grid:!0});var v=H(e);t=K(v,"PICTURE",{class:!0});var g=H(t);r=K(g,"SOURCE",{media:!0,srcset:!0}),s=he(g),i=K(g,"SOURCE",{media:!0,srcset:!0}),o=he(g),a=K(g,"IMG",{src:!0,alt:!0,style:!0,class:!0}),g.forEach(M),c=he(v),_&&_.l(v),v.forEach(M),this.h()},h(){T(r,"media","(min-width:650px)"),T(r,"srcset",n[0]),T(i,"media","(min-width:465px)"),T(i,"srcset",n[0]),Nr(a.src,l=n[0])||T(a,"src",l),T(a,"alt","Flowers"),dr(a,"width","auto"),T(a,"class","h-screen"),T(t,"class",u="lt-sm:blur lt-sm:absolute lt-sm:top-1/2 lt-sm:left-1/2 lt-sm:-translate-x-1/2 lt-sm:-translate-y-1/2 max-w-max row-start-1 row-end-2 "+(n[1]?"order-1 justify-self-end ":"")),T(e,"class","grid gap-4 h-screen w-screen"),T(e,"grid","cols-[max-content_1fr] lg:rows-[40vh_60vh]")},m(w,v){ge(w,e,v),P(e,t),P(t,r),P(t,s),P(t,i),P(t,o),P(t,a),P(e,c),_&&_.m(e,null),f=!0},p(w,[v]){(!f||v&1)&&T(r,"srcset",w[0]),(!f||v&1)&&T(i,"srcset",w[0]),(!f||v&1&&!Nr(a.src,l=w[0]))&&T(a,"src",l),(!f||v&2&&u!==(u="lt-sm:blur lt-sm:absolute lt-sm:top-1/2 lt-sm:left-1/2 lt-sm:-translate-x-1/2 lt-sm:-translate-y-1/2 max-w-max row-start-1 row-end-2 "+(w[1]?"order-1 justify-self-end ":"")))&&T(t,"class",u),_&&_.p&&(!f||v&4)&&Tr(_,S,w,w[2],f?Or(S,w[2],v,null):kr(w[2]),null)},i(w){f||(Je(_,w),f=!0)},o(w){nt(_,w),f=!1},d(w){w&&M(e),_&&_.d(w)}}}function Hs(n,e,t){let{$$slots:r={},$$scope:s}=e,{pictureName:i,reverse:o}=e;return n.$$set=a=>{"pictureName"in a&&t(0,i=a.pictureName),"reverse"in a&&t(1,o=a.reverse),"$$scope"in a&&t(2,s=a.$$scope)},[i,o,s,r]}class na extends bt{constructor(e){super(),wt(this,e,Hs,Bs,St,{pictureName:0,reverse:1})}}var In={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(Ar,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d\d/,i=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(g){this[v]=+g}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),R=60*y[1]+(+y[2]||0);return R===0?0:y[0]==="+"?-R:R}(v)}],f=function(v){var g=a[v];return g&&(g.indexOf?g:g.s.concat(g.f))},S=function(v,g){var y,R=a.meridiem;if(R){for(var U=1;U<=24;U+=1)if(v.indexOf(R(U,0,g))>-1){y=U>12;break}}else y=v===(g?"pm":"PM");return y},_={A:[o,function(v){this.afternoon=S(v,!1)}],a:[o,function(v){this.afternoon=S(v,!0)}],S:[/\d/,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[i,u("seconds")],ss:[i,u("seconds")],m:[i,u("minutes")],mm:[i,u("minutes")],H:[i,u("hours")],h:[i,u("hours")],HH:[i,u("hours")],hh:[i,u("hours")],D:[i,u("day")],DD:[s,u("day")],Do:[o,function(v){var g=a.ordinal,y=v.match(/\d+/);if(this.day=y[0],g)for(var R=1;R<=31;R+=1)g(R).replace(/\[|\]/g,"")===v&&(this.day=R)}],M:[i,u("month")],MM:[s,u("month")],MMM:[o,function(v){var g=f("months"),y=(f("monthsShort")||g.map(function(R){return R.slice(0,3)})).indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(v){var g=f("months").indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(v){this.year=l(v)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function w(v){var g,y;g=v,y=a&&a.formats;for(var R=(v=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(B,F,x){var V=x&&x.toUpperCase();return F||y[x]||t[x]||y[V].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(L,d,m){return d||m.slice(1)})})).match(r),U=R.length,k=0;k<U;k+=1){var N=R[k],I=_[N],G=I&&I[0],Y=I&&I[1];R[k]=Y?{regex:G,parser:Y}:N.replace(/^\[|\]$/g,"")}return function(B){for(var F={},x=0,V=0;x<U;x+=1){var L=R[x];if(typeof L=="string")V+=L.length;else{var d=L.regex,m=L.parser,h=B.slice(V),b=d.exec(h)[0];m.call(F,b),B=B.replace(b,"")}}return function(D){var p=D.afternoon;if(p!==void 0){var C=D.hours;p?C<12&&(D.hours+=12):C===12&&(D.hours=0),delete D.afternoon}}(F),F}}return function(v,g,y){y.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(l=v.parseTwoDigitYear);var R=g.prototype,U=R.parse;R.parse=function(k){var N=k.date,I=k.utc,G=k.args;this.$u=I;var Y=G[1];if(typeof Y=="string"){var B=G[2]===!0,F=G[3]===!0,x=B||F,V=G[2];F&&(V=G[2]),a=this.$locale(),!B&&V&&(a=y.Ls[V]),this.$d=function(h,b,D){try{if(["x","X"].indexOf(b)>-1)return new Date((b==="X"?1e3:1)*h);var p=w(b)(h),C=p.year,j=p.month,q=p.day,J=p.hours,re=p.minutes,ee=p.seconds,fe=p.milliseconds,se=p.zone,A=new Date,Z=q||(C||j?1:A.getDate()),E=C||A.getFullYear(),X=0;C&&!j||(X=j>0?j-1:A.getMonth());var me=J||0,$=re||0,O=ee||0,z=fe||0;return se?new Date(Date.UTC(E,X,Z,me,$,O,z+60*se.offset*1e3)):D?new Date(Date.UTC(E,X,Z,me,$,O,z)):new Date(E,X,Z,me,$,O,z)}catch{return new Date("")}}(N,Y,I),this.init(),V&&V!==!0&&(this.$L=this.locale(V).$L),x&&N!=this.format(Y)&&(this.$d=new Date("")),a={}}else if(Y instanceof Array)for(var L=Y.length,d=1;d<=L;d+=1){G[1]=Y[d-1];var m=y.apply(this,G);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}d===L&&(this.$d=new Date(""))}else U.call(this,k)}}})})(In);var Ys=In.exports;const qs=Dr(Ys);function Js(n){let e,t,r,s,i;const o=n[4].default,a=Er(o,n,n[3],null);return{c(){e=W("div"),t=W("h3"),r=Oe(n[0]),s=ce(),a&&a.c(),this.h()},l(l){e=K(l,"DIV",{class:!0,style:!0});var u=H(e);t=K(u,"H3",{class:!0});var c=H(t);r=Ae(c,n[0]),c.forEach(M),s=he(u),a&&a.l(u),u.forEach(M),this.h()},h(){T(t,"class","text-base md:text-lg font-title"),T(e,"class","card w-full group flex gap-4 items-center justify-between svelte-u0mhei"),dr(e,"order",n[1]-n[2])},m(l,u){ge(l,e,u),P(e,t),P(t,r),P(e,s),a&&a.m(e,null),i=!0},p(l,[u]){(!i||u&1)&&st(r,l[0]),a&&a.p&&(!i||u&8)&&Tr(a,o,l,l[3],i?Or(o,l[3],u,null):kr(l[3]),null),(!i||u&6)&&dr(e,"order",l[1]-l[2])},i(l){i||(Je(a,l),i=!0)},o(l){nt(a,l),i=!1},d(l){l&&M(e),a&&a.d(l)}}}function zs(n,e,t){let{$$slots:r={},$$scope:s}=e;$s.extend(qs);let{created_at:i,dates_length:o,order:a}=e;return n.$$set=l=>{"created_at"in l&&t(0,i=l.created_at),"dates_length"in l&&t(1,o=l.dates_length),"order"in l&&t(2,a=l.order),"$$scope"in l&&t(3,s=l.$$scope)},[i,o,a,s,r]}class sa extends bt{constructor(e){super(),wt(this,e,zs,Js,St,{created_at:0,dates_length:1,order:2})}}var Ws=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Ks=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ws(void 0,void 0,void 0,function*(){return yield(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class jr extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class Gs extends jr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Vs extends jr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Zs extends jr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xs=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Qs{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=Ks(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Xs(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let a={},l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(_=>{throw new Gs(_)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new Vs(u);if(!u.ok)throw new Zs(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),S;return f==="application/json"?S=yield u.json():f==="application/octet-stream"?S=yield u.blob():f==="multipart/form-data"?S=yield u.formData():S=yield u.text(),{data:S,error:null}}catch(s){return{data:null,error:s}}})}}var pr={exports:{}};(function(n,e){var t=typeof self<"u"?self:Ar,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function l(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(d){return d&&u.indexOf(Object.prototype.toString.call(d))>-1};function f(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function S(d){return typeof d!="string"&&(d=String(d)),d}function _(d){var m={next:function(){var h=d.shift();return{done:h===void 0,value:h}}};return a.iterable&&(m[Symbol.iterator]=function(){return m}),m}function w(d){this.map={},d instanceof w?d.forEach(function(m,h){this.append(h,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}w.prototype.append=function(d,m){d=f(d),m=S(m);var h=this.map[d];this.map[d]=h?h+", "+m:m},w.prototype.delete=function(d){delete this.map[f(d)]},w.prototype.get=function(d){return d=f(d),this.has(d)?this.map[d]:null},w.prototype.has=function(d){return this.map.hasOwnProperty(f(d))},w.prototype.set=function(d,m){this.map[f(d)]=S(m)},w.prototype.forEach=function(d,m){for(var h in this.map)this.map.hasOwnProperty(h)&&d.call(m,this.map[h],h,this)},w.prototype.keys=function(){var d=[];return this.forEach(function(m,h){d.push(h)}),_(d)},w.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),_(d)},w.prototype.entries=function(){var d=[];return this.forEach(function(m,h){d.push([h,m])}),_(d)},a.iterable&&(w.prototype[Symbol.iterator]=w.prototype.entries);function v(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function g(d){return new Promise(function(m,h){d.onload=function(){m(d.result)},d.onerror=function(){h(d.error)}})}function y(d){var m=new FileReader,h=g(m);return m.readAsArrayBuffer(d),h}function R(d){var m=new FileReader,h=g(m);return m.readAsText(d),h}function U(d){for(var m=new Uint8Array(d),h=new Array(m.length),b=0;b<m.length;b++)h[b]=String.fromCharCode(m[b]);return h.join("")}function k(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&l(d)?(this._bodyArrayBuffer=k(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||c(d))?this._bodyArrayBuffer=k(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=v(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var d=v(this);if(d)return d;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function G(d){var m=d.toUpperCase();return I.indexOf(m)>-1?m:d}function Y(d,m){m=m||{};var h=m.body;if(d instanceof Y){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new w(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!h&&d._bodyInit!=null&&(h=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new w(m.headers)),this.method=G(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(h)}Y.prototype.clone=function(){return new Y(this,{body:this._bodyInit})};function B(d){var m=new FormData;return d.trim().split("&").forEach(function(h){if(h){var b=h.split("="),D=b.shift().replace(/\+/g," "),p=b.join("=").replace(/\+/g," ");m.append(decodeURIComponent(D),decodeURIComponent(p))}}),m}function F(d){var m=new w,h=d.replace(/\r?\n[\t ]+/g," ");return h.split(/\r?\n/).forEach(function(b){var D=b.split(":"),p=D.shift().trim();if(p){var C=D.join(":").trim();m.append(p,C)}}),m}N.call(Y.prototype);function x(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new w(m.headers),this.url=m.url||"",this._initBody(d)}N.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new w(this.headers),url:this.url})},x.error=function(){var d=new x(null,{status:0,statusText:""});return d.type="error",d};var V=[301,302,303,307,308];x.redirect=function(d,m){if(V.indexOf(m)===-1)throw new RangeError("Invalid status code");return new x(null,{status:m,headers:{location:d}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,h){this.message=m,this.name=h;var b=Error(m);this.stack=b.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function L(d,m){return new Promise(function(h,b){var D=new Y(d,m);if(D.signal&&D.signal.aborted)return b(new o.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function C(){p.abort()}p.onload=function(){var j={status:p.status,statusText:p.statusText,headers:F(p.getAllResponseHeaders()||"")};j.url="responseURL"in p?p.responseURL:j.headers.get("X-Request-URL");var q="response"in p?p.response:p.responseText;h(new x(q,j))},p.onerror=function(){b(new TypeError("Network request failed"))},p.ontimeout=function(){b(new TypeError("Network request failed"))},p.onabort=function(){b(new o.DOMException("Aborted","AbortError"))},p.open(D.method,D.url,!0),D.credentials==="include"?p.withCredentials=!0:D.credentials==="omit"&&(p.withCredentials=!1),"responseType"in p&&a.blob&&(p.responseType="blob"),D.headers.forEach(function(j,q){p.setRequestHeader(q,j)}),D.signal&&(D.signal.addEventListener("abort",C),p.onreadystatechange=function(){p.readyState===4&&D.signal.removeEventListener("abort",C)}),p.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return L.polyfill=!0,i.fetch||(i.fetch=L,i.Headers=w,i.Request=Y,i.Response=x),o.Headers=w,o.Request=Y,o.Response=x,o.fetch=L,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e})(pr,pr.exports);var Pr=pr.exports;const Cr=Dr(Pr),Zt=es({__proto__:null,default:Cr},[Pr]);class ei{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Cr:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,c=null,f=null,S=i.status,_=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=y:c=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&g&&g.length>1&&(f=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,f=null,S=406,_="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(c=[],u=null,S=200,_="OK")}catch{i.status===404&&v===""?(S=204,_="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("Results contain 0 rows"))&&(u=null,S=200,_="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:f,status:S,statusText:_}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class ti extends ei{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class pt extends ti{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class ri{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new pt({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new pt({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new pt({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new pt({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new pt({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const ni="1.6.1",si={"X-Client-Info":`postgrest-js/${ni}`};class ii{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},si),t),this.schema=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new ri(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:s}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;r?(i="HEAD",Object.entries(t).forEach(([u,c])=>{o.searchParams.append(u,`${c}`)})):(i="POST",a=t);const l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new pt({method:i,url:o,headers:l,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var nr,dn;function oi(){if(dn)return nr;dn=1;var n=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return nr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}(),nr}const ai="websocket",li="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",ui=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],ci="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",hi=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],di="1.0.34",fi={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},vi="https://github.com/theturtle32/WebSocket-Node",mi={node:">=4.0.0"},pi={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},yi={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},gi={verbose:!1},_i={test:"tape test/unit/*.js",gulp:"gulp"},bi="index",wi={lib:"./lib"},Si="lib/browser.js",Ei="Apache-2.0",Ti={name:ai,description:li,keywords:ui,author:ci,contributors:hi,version:di,repository:fi,homepage:vi,engines:mi,dependencies:pi,devDependencies:yi,config:gi,scripts:_i,main:bi,directories:wi,browser:Si,license:Ei};var ki=Ti.version,ut;if(typeof globalThis=="object")ut=globalThis;else try{ut=oi()}catch{}finally{if(!ut&&typeof window<"u"&&(ut=window),!ut)throw new Error("Could not determine global this")}var xt=ut.WebSocket||ut.MozWebSocket,Oi=ki;function xn(n,e){var t;return e?t=new xt(n,e):t=new xt(n),t}xt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(n){Object.defineProperty(xn,n,{get:function(){return xt[n]}})});var Ai={w3cwebsocket:xt?xn:null,version:Oi};const Di="2.7.2",ji={"X-Client-Info":`realtime-js/${Di}`},Pi="1.0.0",Mn=1e4,Ci=1e3;var Pt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Pt||(Pt={}));var Fe;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Fe||(Fe={}));var Ye;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ye||(Ye={}));var yr;(function(n){n.websocket="websocket"})(yr||(yr={}));var ct;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ct||(ct={}));class Ln{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ri{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class sr{constructor(e,t,r={},s=Mn){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fn;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(fn||(fn={}));class Ct{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ct.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Ct.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ct.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=i[u];if(f){const S=c.map(g=>g.presence_ref),_=f.map(g=>g.presence_ref),w=c.filter(g=>_.indexOf(g.presence_ref)<0),v=f.filter(g=>S.indexOf(g.presence_ref)<0);w.length>0&&(a[u]=w),v.length>0&&(l[u]=v)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const f=e[a].map(_=>_.presence_ref),S=c.filter(_=>f.indexOf(_.presence_ref)<0);e[a].unshift(...S)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var le;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(le||(le={}));const vn=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=Ii(o,n,e,s),i),{})},Ii=(n,e,t,r)=>{const s=e.find(a=>a.name===n),i=s==null?void 0:s.type,o=t[n];return i&&!r.includes(i)?Un(i,o):gr(o)},Un=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Ui(e,t)}switch(n){case le.bool:return xi(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Mi(e);case le.json:case le.jsonb:return Li(e);case le.timestamp:return Fi(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return gr(e);default:return gr(e)}},gr=n=>n,xi=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Mi=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Li=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Ui=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Un(e,a))}return n},Fi=n=>typeof n=="string"?n.replace(" ","T"):n;var mn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},pn;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(pn||(pn={}));var yn;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes"})(yn||(yn={}));var gn;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(gn||(gn={}));class Rr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new sr(this,Ye.join,this.params,this.timeout),this.rejoinTimer=new Ln(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Fe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ye.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Ct(this)}subscribe(e,t=this.timeout){var r,s;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const a={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,S=(c=f==null?void 0:f.length)!==null&&c!==void 0?c:0,_=[];for(let w=0;w<S;w++){const v=f[w],{filter:{event:g,schema:y,table:R,filter:U}}=v,k=u&&u[w];if(k&&k.event===g&&k.schema===y&&k.table===R&&k.filter===U)_.push(Object.assign(Object.assign({},v),{id:k.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return mn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return mn(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise(r=>{var s,i,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&r("rate limited"),e.type==="broadcast"&&!(!((o=(i=(s=this.params)===null||s===void 0?void 0:s.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),a.receive("ok",()=>r("ok")),a.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Fe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ye.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new sr(this,Ye.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new sr(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ye;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let S=this._onMessage(o,t,r);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var w,v,g;return((w=_.filter)===null||w===void 0?void 0:w.event)==="*"||((g=(v=_.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(_=>_.callback(S,r)):(i=this.bindings[o])===null||i===void 0||i.filter(_=>{var w,v,g,y,R,U;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in _){const k=_.id,N=(w=_.filter)===null||w===void 0?void 0:w.event;return k&&((v=t.ids)===null||v===void 0?void 0:v.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const k=(R=(y=_==null?void 0:_.filter)===null||y===void 0?void 0:y.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return k==="*"||k===((U=t==null?void 0:t.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===o}).map(_=>{if(typeof S=="object"&&"ids"in S){const w=S.data,{schema:v,table:g,commit_timestamp:y,type:R,errors:U}=w;S=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:y,eventType:R,new:{},old:{},errors:U}),this._getPayloadRecords(w))}_.callback(S,r)})}_isClosed(){return this.state===Fe.closed}_isJoined(){return this.state===Fe.joined}_isJoining(){return this.state===Fe.joining}_isLeaving(){return this.state===Fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Rr.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ye.close,{},e)}_onError(e){this._on(Ye.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=vn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=vn(e.columns,e.old_record)),t}}var ir=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Ni=()=>{};class $i{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=ji,this.params={},this.timeout=Mn,this.transport=Ai.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ni,this.conn=null,this.sendBuffer=[],this.serializer=new Ri,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${yr.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ln(()=>ir(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return ir(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return ir(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pt.connecting:return ct.Connecting;case Pt.open:return ct.Open;case Pt.closing:return ct.Closing;default:return ct.Closed}}isConnected(){return this.connectionState()===ct.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new Rr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e;let o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};if(this.log("push",`${t} ${r} (${i})`,s),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Ye.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pi}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ye.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Ci,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Ir extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ee(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Bi extends Ir{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _n extends Ir{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Fn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Nn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Fn(void 0,void 0,void 0,function*(){return yield(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Hi=()=>Fn(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).Response:Response});var Et=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const or=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Yi=(n,e)=>Et(void 0,void 0,void 0,function*(){const t=yield Hi();n instanceof t?n.json().then(r=>{e(new Bi(or(r),n.status||500))}).catch(r=>{e(new _n(or(r),r))}):e(new _n(or(n),n))}),qi=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function Xt(n,e,t,r,s,i){return Et(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,qi(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Yi(l,a))})})}function _r(n,e,t,r){return Et(this,void 0,void 0,function*(){return Xt(n,"GET",e,t,r)})}function tt(n,e,t,r,s){return Et(this,void 0,void 0,function*(){return Xt(n,"POST",e,r,s,t)})}function Ji(n,e,t,r,s){return Et(this,void 0,void 0,function*(){return Xt(n,"PUT",e,r,s,t)})}function $n(n,e,t,r,s){return Et(this,void 0,void 0,function*(){return Xt(n,"DELETE",e,r,s,t)})}var Ne=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const zi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Wi{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Nn(s)}uploadOrUpdate(e,t,r,s){return Ne(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},bn),s),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl)):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return c.ok?{data:{path:l},error:null}:{data:null,error:yield c.json()}}catch(i){if(Ee(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:bn.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c});return f.ok?{data:{path:i},error:null}:{data:null,error:yield f.json()}}catch(l){if(Ee(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Ne(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const r=yield tt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+r.url),i=s.searchParams.get("token");if(!i)throw new Ir("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}update(e,t,r){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}copy(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,r){return Ne(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield tt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Ne(this,void 0,void 0,function*(){try{const s=yield tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}download(e,t){return Ne(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield _r(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ee(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ne(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},zi),t),{prefix:e||""});return{data:yield tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ki="2.5.1",Gi={"X-Client-Info":`storage-js/${Ki}`};var vt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Vi{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Gi),t),this.fetch=Nn(r)}listBuckets(){return vt(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ee(e))return{data:null,error:e};throw e}})}getBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield _r(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return vt(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return vt(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}emptyBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}deleteBucket(e){return vt(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}}class Zi extends Vi{constructor(e,t={},r){super(e,t,r)}from(e){return new Wi(this.url,this.headers,e,this.fetch)}}const Xi="2.22.0",Qi={"X-Client-Info":`supabase-js/${Xi}`};var eo=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const to=n=>{let e;return n?e=n:typeof fetch>"u"?e=Cr:e=fetch,(...t)=>e(...t)},ro=()=>typeof Headers>"u"?Pr.Headers:Headers,no=(n,e,t)=>{const r=to(t),s=ro();return(i,o)=>eo(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};function so(n){return n.replace(/\/$/,"")}function io(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:o,auth:a,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i)}}var ft=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function oo(n){return Math.round(Date.now()/1e3)+n}function ao(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const et=()=>typeof document<"u",at={tested:!1,writable:!1},ar=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(at.tested)return at.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),at.tested=!0,at.writable=!0}catch{at.tested=!0,at.writable=!1}return at.writable};function Pe(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const Bn=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ft(void 0,void 0,void 0,function*(){return yield(yield Kt(()=>Promise.resolve().then(()=>Zt),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},lo=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ot=(n,e,t)=>ft(void 0,void 0,void 0,function*(){yield n.setItem(e,JSON.stringify(t))}),Bt=(n,e)=>ft(void 0,void 0,void 0,function*(){const t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),lr=(n,e)=>ft(void 0,void 0,void 0,function*(){yield n.removeItem(e)});function uo(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,o,a,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)o=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=o<<2|a>>4,s=(a&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Qt{constructor(){this.promise=new Qt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Qt.promiseConstructor=Promise;function wn(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(uo(r))}function co(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function ho(n,e){return new Promise((r,s)=>{ft(this,void 0,void 0,function*(){for(let i=0;i<1/0;i++)try{const o=yield n(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})})}function fo(n){return("0"+n.toString(16)).substr(-2)}function Ht(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,fo).join("")}function vo(n){return ft(this,void 0,void 0,function*(){const t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function mo(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Yt(n){return ft(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=yield vo(n);return mo(e)})}class xr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function ie(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class po extends xr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function yo(n){return ie(n)&&n.name==="AuthApiError"}class Hn extends xr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Lt extends xr{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class At extends Lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class qt extends Lt{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class ze extends Lt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ur extends Lt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class br extends Lt{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var Mr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},go=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Jt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_o=(n,e)=>Mr(void 0,void 0,void 0,function*(){const t=[502,503,504];lo(n)?t.includes(n.status)?e(new br(Jt(n),n.status)):n.json().then(r=>{e(new po(Jt(r),n.status||500))}).catch(r=>{e(new Hn(Jt(r),r))}):e(new br(Jt(n),0))}),bo=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};function oe(n,e,t,r){var s;return Mr(this,void 0,void 0,function*(){const i=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield wo(n,e,t+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function wo(n,e,t,r,s,i){return Mr(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,bo(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>_o(l,a))})})}function Qe(n){var e;let t=null;ko(n)&&(t=Object.assign({},n),t.expires_at=oo(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ht(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function So(n){return{data:n,error:null}}function Eo(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,o=go(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function To(n){return n}function ko(n){return n.access_token&&n.refresh_token&&n.expires_in}var qe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})},Oo=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class Ao{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Bn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ht})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}generateLink(e){return qe(this,void 0,void 0,function*(){try{const{options:t}=e,r=Oo(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),yield oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Eo,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ie(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ht})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,r,s,i,o,a,l;return qe(this,void 0,void 0,function*(){try{const u={nextPage:null,lastPage:0,total:0},c=yield oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:To});if(c.error)throw c.error;const f=yield c.json(),S=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,_=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return _.length>0&&(_.forEach(w=>{const v=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(w.split(";")[1].split("=")[1]);u[`${g}Page`]=v}),u.total=parseInt(S)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ie(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ht})}catch(t){if(ie(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ht})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return qe(this,void 0,void 0,function*(){try{return yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ht})}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return qe(this,void 0,void 0,function*(){try{const{data:t,error:r}=yield oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ie(t))return{data:null,error:t};throw t}})}}const Do="2.27.0",jo="http://localhost:9999",Po="supabase.auth.token",Co={"X-Client-Info":`gotrue-js/${Do}`},Ro=10,Io={getItem:n=>ar()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{ar()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{ar()&&globalThis.localStorage.removeItem(n)}};function xo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Q=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};xo();const Mo={url:jo,storageKey:Po,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Co,flowType:"implicit"},cr=30*1e3,Lo=3;class Uo{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const r=Object.assign(Object.assign({},Mo),e);if(this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||Io,this.admin=new Ao({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Bn(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",s=>{this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return Q(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=yield this._isPKCEFlow();if(this.detectSessionInUrl&&this._isImplicitGrantFlow()||e){const{data:t,error:r}=yield this._getSessionFromUrl(e);if(r)return yield this._removeSession(),{error:r};const{session:s,redirectType:i}=t;return yield this._saveSession(s),setTimeout(()=>{i==="recovery"?this._notifyAllSubscribers("PASSWORD_RECOVERY",s):this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return ie(e)?{error:e}:{error:new Hn("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}})}signUp(e){var t,r,s;return Q(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:c,password:f,options:S}=e;let _=null,w=null;if(this.flowType==="pkce"){const v=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,v),_=yield Yt(v),w=v===_?"plain":"s256"}i=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:c,password:f,data:(t=S==null?void 0:S.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:_,code_challenge_method:w},xform:Qe})}else if("phone"in e){const{phone:c,password:f,options:S}=e;i=yield oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=S==null?void 0:S.data)!==null&&r!==void 0?r:{},channel:(s=S==null?void 0:S.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:Qe})}else throw new qt("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(ie(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){return Q(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qe})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Qe})}else throw new qt("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s||!r?{data:{user:null,session:null},error:s}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,r,s,i;return Q(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(e){return Q(this,void 0,void 0,function*(){const t=yield Bt(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:s}=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Qe});return yield lr(this.storage,`${this.storageKey}-code-verifier`),s||!r?{data:{user:null,session:null},error:s}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})})}signInWithIdToken(e){return Q(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:r,token:s,nonce:i}=e,o=yield oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Qe}),{data:a,error:l}=o;return l||!a?{data:{user:null,session:null},error:l}:(a.session&&(yield this._saveSession(a.session),this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,r,s,i,o;return Q(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:a,options:l}=e;let u=null,c=null;if(this.flowType==="pkce"){const S=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,S),u=yield Yt(S),c=S===u?"plain":"s256"}const{error:f}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{error:u}=yield oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null},error:u}}throw new qt("You must provide either an email or phone number.")}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}})}verifyOtp(e){var t,r;return Q(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:s,error:i}=yield oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Qe});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,a=s.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){var t,r,s;return Q(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:So})}catch(i){if(ie(i))return{data:null,error:i};throw i}})}resend(e){return Q(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{error:o}=yield oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null},error:o}}throw new qt("You must provide either an email or phone number and a type")}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return Q(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const i=yield Bt(this.storage,this.storageKey);i!==null&&(this._isValidSession(i)?e=i:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:r,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}})}getUser(e){var t,r;return Q(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:i}=yield this.getSession();if(i)throw i;e=(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0}return yield oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ht})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}})}updateUser(e,t={}){return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();if(s)throw s;if(!r.session)throw new At;const i=r.session,{data:o,error:a}=yield oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:i.access_token,xform:ht});if(a)throw a;return i.user=o.user,yield this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(r){if(ie(r))return{data:{user:null},error:r};throw r}})}_decodeJWT(e){return wn(e)}setSession(e){return Q(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new At;const t=Date.now()/1e3;let r=t,s=!0,i=null;const o=wn(e.access_token);if(o.exp&&(r=o.exp,s=r<=t),s){const{session:a,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=yield this.getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ie(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return Q(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:o}=yield this.getSession();if(o)throw o;e=(t=i.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new At;const{session:r,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(ie(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(e){return Q(this,void 0,void 0,function*(){try{if(!et())throw new ze("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new ze("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ur("Not a valid PKCE flow url.");if(e){const g=Pe("code");if(!g)throw new ur("No code detected.");const{data:y,error:R}=yield this.exchangeCodeForSession(g);if(R)throw R;if(!y.session)throw new ur("No session detected.");let U=new URL(window.location.href);return U.searchParams.delete("code"),window.history.replaceState(window.history.state,"",U.toString()),{data:{session:y.session,redirectType:null},error:null}}const t=Pe("error_description");if(t){const g=Pe("error_code");if(!g)throw new ze("No error_code detected.");const y=Pe("error");throw y?new ze(t,{error:y,code:g}):new ze("No error detected.")}const r=Pe("provider_token"),s=Pe("provider_refresh_token"),i=Pe("access_token");if(!i)throw new ze("No access_token detected.");const o=Pe("expires_in");if(!o)throw new ze("No expires_in detected.");const a=Pe("refresh_token");if(!a)throw new ze("No refresh_token detected.");const l=Pe("token_type");if(!l)throw new ze("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(o),{data:f,error:S}=yield this.getUser(i);if(S)throw S;const _=f.user,w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:parseInt(o),expires_at:c,refresh_token:a,token_type:l,user:_},v=Pe("type");return window.location.hash="",{data:{session:w,redirectType:v},error:null}}catch(t){if(ie(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return et()&&(!!Pe("access_token")||!!Pe("error_description"))}_isPKCEFlow(){return Q(this,void 0,void 0,function*(){const e=yield Bt(this.storage,`${this.storageKey}-code-verifier`);return et()&&!!Pe("code")&&!!e})}signOut(){var e;return Q(this,void 0,void 0,function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const s=(e=t.session)===null||e===void 0?void 0:e.access_token;if(s){const{error:i}=yield this.admin.signOut(s);if(i&&!(yo(i)&&(i.status===404||i.status===401)))return{error:i}}return yield this._removeSession(),yield lr(this.storage,`${this.storageKey}-code-verifier`),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=ao(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),this.emitInitialSession(t),{data:{subscription:r}}}emitInitialSession(e){var t,r;return Q(this,void 0,void 0,function*(){try{const{data:{session:s},error:i}=yield this.getSession();if(i)throw i;(t=this.stateChangeEmitters.get(e))===null||t===void 0||t.callback("INITIAL_SESSION",s)}catch(s){(r=this.stateChangeEmitters.get(e))===null||r===void 0||r.callback("INITIAL_SESSION",null),console.error(s)}})}resetPasswordForEmail(e,t={}){return Q(this,void 0,void 0,function*(){let r=null,s=null;if(this.flowType==="pkce"){const i=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,i),r=yield Yt(i),s=i===r?"plain":"s256"}try{return yield oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ie(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return Q(this,void 0,void 0,function*(){try{const t=Date.now();return yield ho(r=>Q(this,void 0,void 0,function*(){return yield co(r*200),yield oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qe})}),(r,s,i)=>i&&i.error&&i.error instanceof br&&Date.now()+(r+1)*200-t<cr)}catch(t){if(ie(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return Q(this,void 0,void 0,function*(){const r=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return et()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}})}_recoverAndRefresh(){var e;return Q(this,void 0,void 0,function*(){try{const t=yield Bt(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+Ro){if(this.autoRefreshToken&&t.refresh_token){const{error:s}=yield this._callRefreshToken(t.refresh_token);s&&(console.log(s.message),yield this._removeSession())}}else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,r;return Q(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Qt,!e)throw new At;const{data:s,error:i}=yield this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new At;yield this._saveSession(s.session),this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(ie(s)){const i={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach(s=>s.callback(e,t))}_saveSession(e){return Q(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Ot(this.storage,this.storageKey,e)}_removeSession(){return Q(this,void 0,void 0,function*(){this.persistSession?yield lr(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return Q(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const e=setInterval(()=>this._autoRefreshTokenTick(),cr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return Q(this,void 0,void 0,function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return Q(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return Q(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return Q(this,void 0,void 0,function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((t.expires_at*1e3-e)/cr)<Lo&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}})}_handleVisibilityChange(){return Q(this,void 0,void 0,function*(){if(!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>Q(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return Q(this,void 0,void 0,function*(){document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return Q(this,void 0,void 0,function*(){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=Ht();yield Ot(this.storage,`${this.storageKey}-code-verifier`,s);const i=yield Yt(s),o=s===i?"plain":"s256",a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return`${this.url}/authorize?${r.join("&")}`})}_unenroll(e){var t;return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();return s?{data:null,error:s}:yield oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(ie(r))return{data:null,error:r};throw r}})}_enroll(e){var t,r;return Q(this,void 0,void 0,function*(){try{const{data:s,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:o,error:a}=yield oe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=s==null?void 0:s.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}_verify(e){var t;return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:i,error:o}=yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}catch(r){if(ie(r))return{data:null,error:r};throw r}})}_challenge(e){var t;return Q(this,void 0,void 0,function*(){try{const{data:r,error:s}=yield this.getSession();return s?{data:null,error:s}:yield oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})}catch(r){if(ie(r))return{data:null,error:r};throw r}})}_challengeAndVerify(e){return Q(this,void 0,void 0,function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return Q(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return Q(this,void 0,void 0,function*(){const{data:{session:r},error:s}=yield this.getSession();if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}})}}class Fo extends Uo{constructor(e){super(e)}}var No=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const $o={headers:Qi},Bo={schema:"public"},Ho={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yo={};class qo{constructor(e,t,r){var s,i,o,a,l,u,c,f;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const S=so(e);if(this.realtimeUrl=`${S}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${S}/auth/v1`,this.storageUrl=`${S}/storage/v1`,S.match(/(supabase\.co)|(supabase\.in)/)){const y=S.split(".");this.functionsUrl=`${y[0]}.functions.${y[1]}.${y[2]}`}else this.functionsUrl=`${S}/functions/v1`;const w=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,v={db:Bo,realtime:Yo,auth:Object.assign(Object.assign({},Ho),{storageKey:w}),global:$o},g=io(r??{},v);this.storageKey=(i=(s=g.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,(u=g.global)===null||u===void 0?void 0:u.fetch),this.fetch=no(t,this._getAccessToken.bind(this),(c=g.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new ii(`${S}/rest/v1`,{headers:this.headers,schema:(f=g.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Qs(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Zi(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return No(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o},a,l){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fo({url:this.authUrl,headers:Object.assign(Object.assign({},u),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:o,fetch:l})}_initRealtimeClient(e){return new $i(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jo=(n,e,t)=>new qo(n,e,t),ia=Jo("https://weaughxswjpwirdjraab.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndlYXVnaHhzd2pwd2lyZGpyYWFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODM5NDc4NTcsImV4cCI6MTk5OTUyMzg1N30.hB8oikmuFAR1AyhmydMqRTKc-gw3QK8aLbOZzpTl2Wk");function Sn(n){let e,t,r,s,i,o,a,l,u,c,f,S,_,w,v,g,y,R,U,k,N,I,G,Y,B;return{c(){e=W("nav"),t=W("button"),r=Ce("svg"),s=Ce("path"),i=Oe("Open Form"),o=ce(),a=W("a"),l=Ce("svg"),u=Ce("path"),c=Oe("Home"),f=ce(),S=W("a"),_=Ce("svg"),w=Ce("path"),v=Oe("Table"),g=ce(),y=W("a"),R=Oe("Green Tara"),U=ce(),k=W("a"),N=Oe("Guru Rinpoche"),this.h()},l(F){e=K(F,"NAV",{class:!0});var x=H(e);t=K(x,"BUTTON",{class:!0});var V=H(t);r=Re(V,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var L=H(r);s=Re(L,"path",{fill:!0,d:!0}),H(s).forEach(M),L.forEach(M),i=Ae(V,"Open Form"),V.forEach(M),o=he(x),a=K(x,"A",{href:!0,class:!0});var d=H(a);l=Re(d,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var m=H(l);u=Re(m,"path",{fill:!0,d:!0}),H(u).forEach(M),m.forEach(M),c=Ae(d,"Home"),d.forEach(M),f=he(x),S=K(x,"A",{href:!0,class:!0});var h=H(S);_=Re(h,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0});var b=H(_);w=Re(b,"path",{fill:!0,d:!0}),H(w).forEach(M),b.forEach(M),v=Ae(h,"Table"),h.forEach(M),g=he(x),y=K(x,"A",{href:!0,class:!0});var D=H(y);R=Ae(D,"Green Tara"),D.forEach(M),U=he(x),k=K(x,"A",{href:!0,class:!0});var p=H(k);N=Ae(p,"Guru Rinpoche"),p.forEach(M),x.forEach(M),this.h()},h(){T(s,"fill","currentColor"),T(s,"d","M6 22q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V11.1l-8 7.975V22H6Zm8.5 0q-.2 0-.35-.15T14 21.5v-1.2q0-.2.088-.4t.212-.325l4.85-4.875l2.15 2.1l-4.875 4.9q-.125.15-.325.225t-.4.075h-1.2Zm7.525-5.9L19.9 13.975l.7-.7q.3-.3.725-.3t.7.3l.7.725q.275.3.275.713t-.275.687l-.7.7ZM14 9h4l-5-5v4q0 .425.288.713T14 9Z"),T(r,"xmlns","http://www.w3.org/2000/svg"),T(r,"width","16"),T(r,"height","16"),T(r,"viewBox","0 0 24 24"),T(t,"class","text-sm py-2 px-4 cursor-pointer rounded-md flex-center border-none gap-2 hover:border-gray bg-white hover:border-gray-900 hover:shadow transition-all ease-in"),T(u,"fill","currentColor"),T(u,"d","M4 21V9l8-6l8 6v12h-6v-7h-4v7H4Z"),T(l,"xmlns","http://www.w3.org/2000/svg"),T(l,"width","16"),T(l,"height","16"),T(l,"viewBox","0 0 24 24"),T(a,"href",Ft+"/"),T(a,"class","text-sm py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray text-dark-600 bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in"),T(w,"fill","currentColor"),T(w,"d","M3 8V3h19v5H3Zm5 2v11H3V10h5Zm14 11h-5V10h5v11Zm-7-11v11h-5V10h5Z"),T(_,"xmlns","http://www.w3.org/2000/svg"),T(_,"width","16"),T(_,"height","16"),T(_,"viewBox","0 0 24 24"),T(S,"href",Ft+"/table"),T(S,"class","text-sm py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray text-dark-600 bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in"),T(y,"href",Ft+"/tara"),T(y,"class","text-sm py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray text-dark-600 bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in"),T(k,"href",Ft+"/guru_rinpoche"),T(k,"class","text-sm py-2 px-4 cursor-pointer rounded-md flex items-center border-none gap-2 hover:border-gray text-dark-600 bg-white decoration-none hover:border-gray-900 hover:shadow transition-all ease-in"),T(e,"class","absolute gap-1 bottom-21 right-2 rounded-md cursor-pointer text-white p-4 flex flex-col border-gray-900 shadow border-2 min-w-[8rem]")},m(F,x){ge(F,e,x),P(e,t),P(t,r),P(r,s),P(t,i),P(e,o),P(e,a),P(a,l),P(l,u),P(a,c),P(e,f),P(e,S),P(S,_),P(_,w),P(S,v),P(e,g),P(e,y),P(y,R),P(e,U),P(e,k),P(k,N),G=!0,Y||(B=we(t,"click",n[2]),Y=!0)},p:hr,i(F){G||(Sr(()=>{G&&(I||(I=_t(e,zt,{},!0)),I.run(1))}),G=!0)},o(F){I||(I=_t(e,zt,{},!1)),I.run(0),G=!1},d(F){F&&M(e),F&&I&&I.end(),Y=!1,B()}}}function zo(n){let e,t,r,s,i,o,a,l,u,c,f,S,_,w,v,g,y,R,U,k=n[0]&&Sn(n);return{c(){k&&k.c(),e=ce(),t=W("div"),r=W("nav"),s=W("button"),i=W("span"),o=Oe("Open main"),a=ce(),l=W("div"),u=W("span"),f=ce(),S=W("span"),w=ce(),v=W("span"),this.h()},l(N){k&&k.l(N),e=he(N),t=K(N,"DIV",{class:!0});var I=H(t);r=K(I,"NAV",{});var G=H(r);s=K(G,"BUTTON",{class:!0});var Y=H(s);i=K(Y,"SPAN",{class:!0});var B=H(i);o=Ae(B,"Open main"),B.forEach(M),a=he(Y),l=K(Y,"DIV",{class:!0});var F=H(l);u=K(F,"SPAN",{"aria-hidden":!0,class:!0}),H(u).forEach(M),f=he(F),S=K(F,"SPAN",{"aria-hidden":!0,class:!0}),H(S).forEach(M),w=he(F),v=K(F,"SPAN",{"aria-hidden":!0,class:!0}),H(v).forEach(M),F.forEach(M),Y.forEach(M),G.forEach(M),I.forEach(M),this.h()},h(){T(i,"class","sr-only"),T(u,"aria-hidden","true"),T(u,"class",c="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(n[0]?"rotate-45":" -translate-y-1.5")),T(S,"aria-hidden","true"),T(S,"class",_="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(n[0]?"opacity-0":"")),T(v,"aria-hidden","true"),T(v,"class",g="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(n[0]?"-rotate-45":" translate-y-1.5")),T(l,"class","block w-5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"),T(s,"class","rounded-full text-gray-500 w-10 h-10 md:w-14 md:h-14 relative focus:outline-none bg-white cursor-pointer"),T(t,"class","absolute bottom-1 right-2 py-3 sm:max-w-xl mx-auto")},m(N,I){k&&k.m(N,I),ge(N,e,I),ge(N,t,I),P(t,r),P(r,s),P(s,i),P(i,o),P(s,a),P(s,l),P(l,u),P(l,f),P(l,S),P(l,w),P(l,v),y=!0,R||(U=we(s,"click",n[3]),R=!0)},p(N,[I]){N[0]?k?(k.p(N,I),I&1&&Je(k,1)):(k=Sn(N),k.c(),Je(k,1),k.m(e.parentNode,e)):k&&(kn(),nt(k,1,1,()=>{k=null}),On()),(!y||I&1&&c!==(c="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(N[0]?"rotate-45":" -translate-y-1.5")))&&T(u,"class",c),(!y||I&1&&_!==(_="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(N[0]?"opacity-0":"")))&&T(S,"class",_),(!y||I&1&&g!==(g="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out "+(N[0]?"-rotate-45":" translate-y-1.5")))&&T(v,"class",g)},i(N){y||(Je(k),y=!0)},o(N){nt(k),y=!1},d(N){k&&k.d(N),N&&M(e),N&&M(t),R=!1,U()}}}function Wo(n,e,t){let{menuVisible:r,visible:s}=e;const i=()=>(t(1,s=!s),t(0,r=!1)),o=()=>t(0,r=!r);return n.$$set=a=>{"menuVisible"in a&&t(0,r=a.menuVisible),"visible"in a&&t(1,s=a.visible)},[r,s,i,o]}class oa extends bt{constructor(e){super(),wt(this,e,Wo,zo,St,{menuVisible:0,visible:1})}}function Ko(n){let e,t,r,s,i,o,a,l,u,c,f,S,_,w;const v=n[5].default,g=Er(v,n,n[4],null);return{c(){e=W("div"),t=ce(),r=W("form"),g&&g.c(),s=ce(),i=W("button"),o=W("span"),a=ce(),l=W("span"),u=Oe("Submit"),this.h()},l(y){e=K(y,"DIV",{class:!0,backdrop:!0}),H(e).forEach(M),t=he(y),r=K(y,"FORM",{class:!0,grid:!0});var R=H(r);g&&g.l(R),s=he(R),i=K(R,"BUTTON",{type:!0,class:!0});var U=H(i);o=K(U,"SPAN",{class:!0}),H(o).forEach(M),a=he(U),l=K(U,"SPAN",{class:!0});var k=H(l);u=Ae(k,"Submit"),k.forEach(M),U.forEach(M),R.forEach(M),this.h()},h(){T(e,"class","absolute top-0 left-0 bottom-0 right-0 cursor-pointer"),T(e,"backdrop","blur-md brightness-75"),T(o,"class","absolute inset-0 border-0 group-hover:border-[25px] ease-linear duration-100 transition-all border-white rounded-full"),T(l,"class","relative w-full text-left text-base text-white transition-colors duration-200 ease-in-out group-hover:text-green-600 text-lg"),T(i,"type","submit"),T(i,"class",c="relative inline-flex items-center justify-start inline-block px-8 py-4 overflow-hidden font-medium transition-all bg-"+n[1]+" rounded-full hover:bg-white group cursor-pointer col-start-1 row-start-5 justify-self-start self-center"),T(r,"class","bg-dark-500 px-10 py-16 rounded gap-4 text-white grid absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"),T(r,"grid","cols-[1fr_1fr] rows-4")},m(y,R){ge(y,e,R),ge(y,t,R),ge(y,r,R),g&&g.m(r,null),P(r,s),P(r,i),P(i,o),P(i,a),P(i,l),P(l,u),S=!0,_||(w=[we(e,"click",n[6]),Qn(n[2].call(null,r))],_=!0)},p(y,[R]){g&&g.p&&(!S||R&16)&&Tr(g,v,y,y[4],S?Or(v,y[4],R,null):kr(y[4]),null),(!S||R&2&&c!==(c="relative inline-flex items-center justify-start inline-block px-8 py-4 overflow-hidden font-medium transition-all bg-"+y[1]+" rounded-full hover:bg-white group cursor-pointer col-start-1 row-start-5 justify-self-start self-center"))&&T(i,"class",c)},i(y){S||(Je(g,y),Sr(()=>{S&&(f||(f=_t(r,Br,{duration:500},!0)),f.run(1))}),S=!0)},o(y){nt(g,y),f||(f=_t(r,Br,{duration:500},!1)),f.run(0),S=!1},d(y){y&&M(e),y&&M(t),y&&M(r),g&&g.d(y),y&&f&&f.end(),_=!1,wr(w)}}}function Go(n,e,t){let{$$slots:r={},$$scope:s}=e,{visible:i,buttonColor:o,form:a,gridClasses:l}=e;const u=()=>t(0,i=!1);return n.$$set=c=>{"visible"in c&&t(0,i=c.visible),"buttonColor"in c&&t(1,o=c.buttonColor),"form"in c&&t(2,a=c.form),"gridClasses"in c&&t(3,l=c.gridClasses),"$$scope"in c&&t(4,s=c.$$scope)},[i,o,a,l,s,r,u]}class aa extends bt{constructor(e){super(),wt(this,e,Go,Ko,St,{visible:0,buttonColor:1,form:2,gridClasses:3})}}export{ra as D,oa as O,na as S,aa as a,sa as b,ta as c,$s as d,ia as s};
